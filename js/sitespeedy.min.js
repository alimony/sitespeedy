(function(){var f=this;var t=f._;var B={};var h=Array.prototype,C=Object.prototype,p=Function.prototype;var J=h.push,r=h.slice,H=h.concat,q=C.toString,e=C.hasOwnProperty;var M=h.forEach,L=h.map,n=h.reduce,i=h.reduceRight,b=h.filter,E=h.every,z=h.some,A=h.indexOf,d=h.lastIndexOf,F=Array.isArray,x=Object.keys,K=p.bind;var m=function(N){if(N instanceof m){return N}if(!(this instanceof m)){return new m(N)}this._wrapped=N};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=m}exports._=m}else{f._=m}m.VERSION="1.4.3";var j=m.each=m.forEach=function(S,R,Q){if(S==null){return}if(M&&S.forEach===M){S.forEach(R,Q)}else{if(S.length===+S.length){for(var P=0,N=S.length;P<N;P++){if(R.call(Q,S[P],P,S)===B){return}}}else{for(var O in S){if(m.has(S,O)){if(R.call(Q,S[O],O,S)===B){return}}}}}};m.map=m.collect=function(Q,P,O){var N=[];if(Q==null){return N}if(L&&Q.map===L){return Q.map(P,O)}j(Q,function(T,R,S){N[N.length]=P.call(O,T,R,S)});return N};var c="Reduce of empty array with no initial value";m.reduce=m.foldl=m.inject=function(O,N,P,R){var Q=arguments.length>2;if(O==null){O=[]}if(n&&O.reduce===n){if(R){N=m.bind(N,R)}return Q?O.reduce(N,P):O.reduce(N)}j(O,function(U,S,T){if(!Q){P=U;Q=true}else{P=N.call(R,P,U,S,T)}});if(!Q){throw new TypeError(c)}return P};m.reduceRight=m.foldr=function(R,O,S,N){var T=arguments.length>2;if(R==null){R=[]}if(i&&R.reduceRight===i){if(N){O=m.bind(O,N)}return T?R.reduceRight(O,S):R.reduceRight(O)}var Q=R.length;if(Q!==+Q){var P=m.keys(R);Q=P.length}j(R,function(W,U,V){U=P?P[--Q]:--Q;if(!T){S=R[U];T=true}else{S=O.call(N,S,R[U],U,V)}});if(!T){throw new TypeError(c)}return S};m.find=m.detect=function(Q,P,O){var N;D(Q,function(T,R,S){if(P.call(O,T,R,S)){N=T;return true}});return N};m.filter=m.select=function(Q,P,O){var N=[];if(Q==null){return N}if(b&&Q.filter===b){return Q.filter(P,O)}j(Q,function(T,R,S){if(P.call(O,T,R,S)){N[N.length]=T}});return N};m.reject=function(P,O,N){return m.filter(P,function(S,Q,R){return !O.call(N,S,Q,R)},N)};m.every=m.all=function(Q,P,O){P||(P=m.identity);var N=true;if(Q==null){return N}if(E&&Q.every===E){return Q.every(P,O)}j(Q,function(T,R,S){if(!(N=N&&P.call(O,T,R,S))){return B}});return !!N};var D=m.some=m.any=function(Q,P,O){P||(P=m.identity);var N=false;if(Q==null){return N}if(z&&Q.some===z){return Q.some(P,O)}j(Q,function(T,R,S){if(N||(N=P.call(O,T,R,S))){return B}});return !!N};m.contains=m.include=function(O,N){if(O==null){return false}if(A&&O.indexOf===A){return O.indexOf(N)!=-1}return D(O,function(P){return P===N})};m.invoke=function(O,P){var N=r.call(arguments,2);return m.map(O,function(Q){return(m.isFunction(P)?P:Q[P]).apply(Q,N)})};m.pluck=function(O,N){return m.map(O,function(P){return P[N]})};m.where=function(O,N){if(m.isEmpty(N)){return[]}return m.filter(O,function(Q){for(var P in N){if(N[P]!==Q[P]){return false}}return true})};m.max=function(Q,P,O){if(!P&&m.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.max.apply(Math,Q)}if(!P&&m.isEmpty(Q)){return -Infinity}var N={computed:-Infinity,value:-Infinity};j(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S>=N.computed&&(N={value:U,computed:S})});return N.value};m.min=function(Q,P,O){if(!P&&m.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.min.apply(Math,Q)}if(!P&&m.isEmpty(Q)){return Infinity}var N={computed:Infinity,value:Infinity};j(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S<N.computed&&(N={value:U,computed:S})});return N.value};m.shuffle=function(Q){var P;var O=0;var N=[];j(Q,function(R){P=m.random(O++);N[O-1]=N[P];N[P]=R});return N};var g=function(N){return m.isFunction(N)?N:function(O){return O[N]}};m.sortBy=function(Q,P,N){var O=g(P);return m.pluck(m.map(Q,function(T,R,S){return{value:T,index:R,criteria:O.call(N,T,R,S)}}).sort(function(U,T){var S=U.criteria;var R=T.criteria;if(S!==R){if(S>R||S===void 0){return 1}if(S<R||R===void 0){return -1}}return U.index<T.index?-1:1}),"value")};var y=function(S,R,O,Q){var N={};var P=g(R||m.identity);j(S,function(V,T){var U=P.call(O,V,T,S);Q(N,U,V)});return N};m.groupBy=function(P,O,N){return y(P,O,N,function(Q,R,S){(m.has(Q,R)?Q[R]:(Q[R]=[])).push(S)})};m.countBy=function(P,O,N){return y(P,O,N,function(Q,R){if(!m.has(Q,R)){Q[R]=0}Q[R]++})};m.sortedIndex=function(Q,P,U,T){U=U==null?m.identity:g(U);var O=U.call(T,P);var R=0,N=Q.length;while(R<N){var S=(R+N)>>>1;U.call(T,Q[S])<O?R=S+1:N=S}return R};m.toArray=function(N){if(!N){return[]}if(m.isArray(N)){return r.call(N)}if(N.length===+N.length){return m.map(N,m.identity)}return m.values(N)};m.size=function(N){if(N==null){return 0}return(N.length===+N.length)?N.length:m.keys(N).length};m.first=m.head=m.take=function(P,O,N){if(P==null){return void 0}return(O!=null)&&!N?r.call(P,0,O):P[0]};m.initial=function(P,O,N){return r.call(P,0,P.length-((O==null)||N?1:O))};m.last=function(P,O,N){if(P==null){return void 0}if((O!=null)&&!N){return r.call(P,Math.max(P.length-O,0))}else{return P[P.length-1]}};m.rest=m.tail=m.drop=function(P,O,N){return r.call(P,(O==null)||N?1:O)};m.compact=function(N){return m.filter(N,m.identity)};var w=function(O,P,N){j(O,function(Q){if(m.isArray(Q)){P?J.apply(N,Q):w(Q,P,N)}else{N.push(Q)}});return N};m.flatten=function(O,N){return w(O,N,[])};m.without=function(N){return m.difference(N,r.call(arguments,1))};m.uniq=m.unique=function(R,Q,P,O){if(m.isFunction(Q)){O=P;P=Q;Q=false}var T=P?m.map(R,P,O):R;var N=[];var S=[];j(T,function(V,U){if(Q?(!U||S[S.length-1]!==V):!m.contains(S,V)){S.push(V);N.push(R[U])}});return N};m.union=function(){return m.uniq(H.apply(h,arguments))};m.intersection=function(O){var N=r.call(arguments,1);return m.filter(m.uniq(O),function(P){return m.every(N,function(Q){return m.indexOf(Q,P)>=0})})};m.difference=function(O){var N=H.apply(h,r.call(arguments,1));return m.filter(O,function(P){return !m.contains(N,P)})};m.zip=function(){var N=r.call(arguments);var Q=m.max(m.pluck(N,"length"));var P=new Array(Q);for(var O=0;O<Q;O++){P[O]=m.pluck(N,""+O)}return P};m.object=function(O,R){if(O==null){return{}}var P={};for(var N=0,Q=O.length;N<Q;N++){if(R){P[O[N]]=R[N]}else{P[O[N][0]]=O[N][1]}}return P};m.indexOf=function(O,R,N){if(O==null){return -1}var Q=0,P=O.length;if(N){if(typeof N=="number"){Q=(N<0?Math.max(0,P+N):N)}else{Q=m.sortedIndex(O,R);return O[Q]===R?Q:-1}}if(A&&O.indexOf===A){return O.indexOf(R,N)}for(;Q<P;Q++){if(O[Q]===R){return Q}}return -1};m.lastIndexOf=function(O,R,N){if(O==null){return -1}var P=N!=null;if(d&&O.lastIndexOf===d){return P?O.lastIndexOf(R,N):O.lastIndexOf(R)}var Q=(P?N:O.length);while(Q--){if(O[Q]===R){return Q}}return -1};m.range=function(S,Q,R){if(arguments.length<=1){Q=S||0;S=0}R=arguments[2]||1;var O=Math.max(Math.ceil((Q-S)/R),0);var N=0;var P=new Array(O);while(N<O){P[N++]=S;S+=R}return P};var k=function(){};m.bind=function(Q,O){var N,P;if(Q.bind===K&&K){return K.apply(Q,r.call(arguments,1))}if(!m.isFunction(Q)){throw new TypeError}N=r.call(arguments,2);return P=function(){if(!(this instanceof P)){return Q.apply(O,N.concat(r.call(arguments)))}k.prototype=Q.prototype;var S=new k;k.prototype=null;var R=Q.apply(S,N.concat(r.call(arguments)));if(Object(R)===R){return R}return S}};m.bindAll=function(O){var N=r.call(arguments,1);if(N.length==0){N=m.functions(O)}j(N,function(P){O[P]=m.bind(O[P],O)});return O};m.memoize=function(P,O){var N={};O||(O=m.identity);return function(){var Q=O.apply(this,arguments);return m.has(N,Q)?N[Q]:(N[Q]=P.apply(this,arguments))}};m.delay=function(O,P){var N=r.call(arguments,2);return setTimeout(function(){return O.apply(null,N)},P)};m.defer=function(N){return m.delay.apply(m,[N,1].concat(r.call(arguments,1)))};m.throttle=function(O,Q){var U,T,P,R;var N=0;var S=function(){N=new Date;P=null;R=O.apply(U,T)};return function(){var V=new Date;var W=Q-(V-N);U=this;T=arguments;if(W<=0){clearTimeout(P);P=null;N=V;R=O.apply(U,T)}else{if(!P){P=setTimeout(S,W)}}return R}};m.debounce=function(R,O,Q){var N,P;return function(){var V=this,U=arguments;var T=function(){N=null;if(!Q){P=R.apply(V,U)}};var S=Q&&!N;clearTimeout(N);N=setTimeout(T,O);if(S){P=R.apply(V,U)}return P}};m.once=function(P){var N=false,O;return function(){if(N){return O}N=true;O=P.apply(this,arguments);P=null;return O}};m.wrap=function(N,O){return function(){var P=[N];J.apply(P,arguments);return O.apply(this,P)}};m.compose=function(){var N=arguments;return function(){var O=arguments;for(var P=N.length-1;P>=0;P--){O=[N[P].apply(this,O)]}return O[0]}};m.after=function(O,N){if(O<=0){return N()}return function(){if(--O<1){return N.apply(this,arguments)}}};m.keys=x||function(P){if(P!==Object(P)){throw new TypeError("Invalid object")}var O=[];for(var N in P){if(m.has(P,N)){O[O.length]=N}}return O};m.values=function(P){var N=[];for(var O in P){if(m.has(P,O)){N.push(P[O])}}return N};m.pairs=function(P){var O=[];for(var N in P){if(m.has(P,N)){O.push([N,P[N]])}}return O};m.invert=function(P){var N={};for(var O in P){if(m.has(P,O)){N[P[O]]=O}}return N};m.functions=m.methods=function(P){var O=[];for(var N in P){if(m.isFunction(P[N])){O.push(N)}}return O.sort()};m.extend=function(N){j(r.call(arguments,1),function(O){if(O){for(var P in O){N[P]=O[P]}}});return N};m.pick=function(O){var P={};var N=H.apply(h,r.call(arguments,1));j(N,function(Q){if(Q in O){P[Q]=O[Q]}});return P};m.omit=function(P){var Q={};var O=H.apply(h,r.call(arguments,1));for(var N in P){if(!m.contains(O,N)){Q[N]=P[N]}}return Q};m.defaults=function(N){j(r.call(arguments,1),function(O){if(O){for(var P in O){if(N[P]==null){N[P]=O[P]}}}});return N};m.clone=function(N){if(!m.isObject(N)){return N}return m.isArray(N)?N.slice():m.extend({},N)};m.tap=function(O,N){N(O);return O};var I=function(U,T,O,P){if(U===T){return U!==0||1/U==1/T}if(U==null||T==null){return U===T}if(U instanceof m){U=U._wrapped}if(T instanceof m){T=T._wrapped}var R=q.call(U);if(R!=q.call(T)){return false}switch(R){case"[object String]":return U==String(T);case"[object Number]":return U!=+U?T!=+T:(U==0?1/U==1/T:U==+T);case"[object Date]":case"[object Boolean]":return +U==+T;case"[object RegExp]":return U.source==T.source&&U.global==T.global&&U.multiline==T.multiline&&U.ignoreCase==T.ignoreCase}if(typeof U!="object"||typeof T!="object"){return false}var N=O.length;while(N--){if(O[N]==U){return P[N]==T}}O.push(U);P.push(T);var W=0,X=true;if(R=="[object Array]"){W=U.length;X=W==T.length;if(X){while(W--){if(!(X=I(U[W],T[W],O,P))){break}}}}else{var S=U.constructor,Q=T.constructor;if(S!==Q&&!(m.isFunction(S)&&(S instanceof S)&&m.isFunction(Q)&&(Q instanceof Q))){return false}for(var V in U){if(m.has(U,V)){W++;if(!(X=m.has(T,V)&&I(U[V],T[V],O,P))){break}}}if(X){for(V in T){if(m.has(T,V)&&!(W--)){break}}X=!W}}O.pop();P.pop();return X};m.isEqual=function(O,N){return I(O,N,[],[])};m.isEmpty=function(O){if(O==null){return true}if(m.isArray(O)||m.isString(O)){return O.length===0}for(var N in O){if(m.has(O,N)){return false}}return true};m.isElement=function(N){return !!(N&&N.nodeType===1)};m.isArray=F||function(N){return q.call(N)=="[object Array]"};m.isObject=function(N){return N===Object(N)};j(["Arguments","Function","String","Number","Date","RegExp"],function(N){m["is"+N]=function(O){return q.call(O)=="[object "+N+"]"}});if(!m.isArguments(arguments)){m.isArguments=function(N){return !!(N&&m.has(N,"callee"))}}if(typeof(/./)!=="function"){m.isFunction=function(N){return typeof N==="function"}}m.isFinite=function(N){return isFinite(N)&&!isNaN(parseFloat(N))};m.isNaN=function(N){return m.isNumber(N)&&N!=+N};m.isBoolean=function(N){return N===true||N===false||q.call(N)=="[object Boolean]"};m.isNull=function(N){return N===null};m.isUndefined=function(N){return N===void 0};m.has=function(O,N){return e.call(O,N)};m.noConflict=function(){f._=t;return this};m.identity=function(N){return N};m.times=function(O,N,R){var P=Array(O);for(var Q=0;Q<O;Q++){P[Q]=N.call(R,Q)}return P};m.random=function(O,N){if(N==null){N=O;O=0}return O+(0|Math.random()*(N-O+1))};var v={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};v.unescape=m.invert(v.escape);var o={escape:new RegExp("["+m.keys(v.escape).join("")+"]","g"),unescape:new RegExp("("+m.keys(v.unescape).join("|")+")","g")};m.each(["escape","unescape"],function(N){m[N]=function(O){if(O==null){return""}return(""+O).replace(o[N],function(P){return v[N][P]})}});m.result=function(N,P){if(N==null){return null}var O=N[P];return m.isFunction(O)?O.call(N):O};m.mixin=function(N){j(m.functions(N),function(O){var P=m[O]=N[O];m.prototype[O]=function(){var Q=[this._wrapped];J.apply(Q,arguments);return u.call(this,P.apply(m,Q))}})};var a=0;m.uniqueId=function(N){var O=""+ ++a;return N?N+O:O};m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/;var l={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var s=/\\|'|\r|\n|\t|\u2028|\u2029/g;m.template=function(V,Q,P){P=m.defaults({},P,m.templateSettings);var R=new RegExp([(P.escape||G).source,(P.interpolate||G).source,(P.evaluate||G).source].join("|")+"|$","g");var S=0;var N="__p+='";V.replace(R,function(X,aa,W,Y,Z){N+=V.slice(S,Z).replace(s,function(ab){return"\\"+l[ab]});if(aa){N+="'+\n((__t=("+aa+"))==null?'':_.escape(__t))+\n'"}if(W){N+="'+\n((__t=("+W+"))==null?'':__t)+\n'"}if(Y){N+="';\n"+Y+"\n__p+='"}S=Z+X.length;return X});N+="';\n";if(!P.variable){N="with(obj||{}){\n"+N+"}\n"}N="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+N+"return __p;\n";try{var O=new Function(P.variable||"obj","_",N)}catch(T){T.source=N;throw T}if(Q){return O(Q,m)}var U=function(W){return O.call(this,W,m)};U.source="function("+(P.variable||"obj")+"){\n"+N+"}";return U};m.chain=function(N){return m(N).chain()};var u=function(N){return this._chain?m(N).chain():N};m.mixin(m);j(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var O=h[N];m.prototype[N]=function(){var P=this._wrapped;O.apply(P,arguments);if((N=="shift"||N=="splice")&&P.length===0){delete P[0]}return u.call(this,P)}});j(["concat","join","slice"],function(N){var O=h[N];m.prototype[N]=function(){return u.call(this,O.apply(this._wrapped,arguments))}});m.extend(m.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var L=true;function v(a){if(L){console.log(a)}}var M,B,u;var H=[];var D=10;function y(a,b){a.removeClass("loading");if(b){a.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(c){c.preventDefault();var b=$(this);b.removeClass("selected").addClass("selected");var a=b.closest(".account-selector");a.find("li:not(.selected)").slideUp("fast");a.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){J(true)},1)};$("#authorize-button").click(function(a){a.preventDefault();J(false)});function J(a){y($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:a},F)}function F(a){if(a){$("#authorize-button").hide();gapi.client.load("analytics","v3",z)}else{y($("#authorization"),false);$("#authorize-button").show()}}function z(){y($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(w)}$("#log-out").click(function(a){a.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){x();J(true)},1)})});function x(){}function I(a,c,f,e){var b;if(!a.code){c.empty();if(a&&a.items&&a.items.length){var d=_.sortBy(a.items,"created").reverse();_.each(d,function(g){b=$("<li />");b.attr("rel",g.id);b.text(g.name);b.one("click",e);c.append(b)})}else{b=$("<li />");b.text("No "+f+" found.");c.append(b)}}else{v(a.message);b=$("<li />");b.text("Could not get "+f+".");c.append(b)}c.show()}function w(a){y($("#authorization"),false);y($("#accounts"),false);$("#username").html(a.username).show();$("#log-out").show();I(a,$("#accounts"),"accounts",function(){y($("#web-properties"),true);M=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:M}).execute(G)})}function G(a){y($("#web-properties"),false);I(a,$("#web-properties"),"web properties",function(){y($("#profiles"),true);B=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:M,webPropertyId:B}).execute(E)})}function E(a){y($("#profiles"),false);I(a,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();u=$(this).attr("rel");var c=A(new Date());var b=new Date();b.setMonth(b.getMonth()-1);b=A(b);gapi.client.analytics.data.ga.get({ids:"ga:"+u,"start-date":b,"end-date":c,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":D}).execute(N)})}function N(b){if(!b.code){if(b&&b.rows&&b.rows.length){var a=_.map(b.rows,function(d){var c=d[0];var e=d[1];if(e.indexOf(c)!==-1){return e}else{return c+e}});_.each(a,function(c){H.push({url:c})});gapi.client.load("pagespeedonline","v1",C)}}}function C(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(H,function(c,a){var b="http://"+c.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:b}).execute(function(d){K(a,d)})})}function K(g,a){if(a.code){H.splice(g,1);v("Error "+a.code+" - "+a.message)}else{H[g].pageSpeedScore=a.score;H[g].url=a.id}var b=_.countBy(H,function(j){return _.has(j,"pageSpeedScore")});if(_.has(b,"false")){$("#progress-bar").css("width",b["true"]/(H.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(H.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var i=0;var c=0;var e=0;_.each(H,function(j,k){i=H.length-k;c+=i;e+=j.pageSpeedScore*i});var d=Math.round(e/c);var h=$("#score");h.html(d);h.css("color","hsl("+parseInt((d/100)*120,10)+", 60%, 40%)");h.parent().show();var f=$("#details tbody").empty();_.each(H,function(j){var k=decodeURIComponent(j.url);f.append($('<tr><td><a href="'+k+'" target="_blank">'+k+"</a></td><td>"+j.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(j){j.preventDefault();$("#details").slideToggle("fast");var k=$(this);if(k.hasClass("expanded")){k.html("Show details →").removeClass("expanded")}else{k.html("Hide details ←").addClass("expanded")}}).show()}}function A(a){function b(c){return c<10?"0"+c:c}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())}}());(function(){var ax=this;var P=ax._;var ak={};var aw=Array.prototype,aj=Object.prototype,R=Function.prototype;var ac=aw.push,Q=aw.slice,ae=aw.concat,ar=aj.toString,X=aj.hasOwnProperty;var aA=aw.forEach,aa=aw.map,at=aw.reduce,V=aw.reduceRight,az=aw.filter,ah=aw.every,am=aw.some,al=aw.indexOf,ay=aw.lastIndexOf,ag=Array.isArray,N=Object.keys,ab=R.bind;var au=function(a){if(a instanceof au){return a}if(!(this instanceof au)){return new au(a)}this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=au}exports._=au}else{ax._=au}au.VERSION="1.4.3";var av=au.each=au.forEach=function(c,d,e){if(c==null){return}if(aA&&c.forEach===aA){c.forEach(d,e)}else{if(c.length===+c.length){for(var f=0,b=c.length;f<b;f++){if(d.call(e,c[f],f,c)===ak){return}}}else{for(var a in c){if(au.has(c,a)){if(d.call(e,c[a],a,c)===ak){return}}}}}};au.map=au.collect=function(c,d,a){var b=[];if(c==null){return b}if(aa&&c.map===aa){return c.map(d,a)}av(c,function(e,g,f){b[b.length]=d.call(a,e,g,f)});return b};var Y="Reduce of empty array with no initial value";au.reduce=au.foldl=au.inject=function(a,b,e,c){var d=arguments.length>2;if(a==null){a=[]}if(at&&a.reduce===at){if(c){b=au.bind(b,c)}return d?a.reduce(b,e):a.reduce(b)}av(a,function(f,h,g){if(!d){e=f;d=true}else{e=b.call(c,e,f,h,g)}});if(!d){throw new TypeError(Y)}return e};au.reduceRight=au.foldr=function(e,a,d,b){var c=arguments.length>2;if(e==null){e=[]}if(V&&e.reduceRight===V){if(b){a=au.bind(a,b)}return c?e.reduceRight(a,d):e.reduceRight(a)}var f=e.length;if(f!==+f){var g=au.keys(e);f=g.length}av(e,function(h,j,i){j=g?g[--f]:--f;if(!c){d=e[j];c=true}else{d=a.call(b,d,e[j],j,i)}});if(!c){throw new TypeError(Y)}return d};au.find=au.detect=function(c,d,a){var b;ai(c,function(e,g,f){if(d.call(a,e,g,f)){b=e;return true}});return b};au.filter=au.select=function(c,d,a){var b=[];if(c==null){return b}if(az&&c.filter===az){return c.filter(d,a)}av(c,function(e,g,f){if(d.call(a,e,g,f)){b[b.length]=e}});return b};au.reject=function(c,a,b){return au.filter(c,function(d,f,e){return !a.call(b,d,f,e)},b)};au.every=au.all=function(c,d,a){d||(d=au.identity);var b=true;if(c==null){return b}if(ah&&c.every===ah){return c.every(d,a)}av(c,function(e,g,f){if(!(b=b&&d.call(a,e,g,f))){return ak}});return !!b};var ai=au.some=au.any=function(c,d,a){d||(d=au.identity);var b=false;if(c==null){return b}if(am&&c.some===am){return c.some(d,a)}av(c,function(e,g,f){if(b||(b=d.call(a,e,g,f))){return ak}});return !!b};au.contains=au.include=function(a,b){if(a==null){return false}if(al&&a.indexOf===al){return a.indexOf(b)!=-1}return ai(a,function(c){return c===b})};au.invoke=function(a,c){var b=Q.call(arguments,2);return au.map(a,function(d){return(au.isFunction(c)?c:d[c]).apply(d,b)})};au.pluck=function(a,b){return au.map(a,function(c){return c[b]})};au.where=function(a,b){if(au.isEmpty(b)){return[]}return au.filter(a,function(c){for(var d in b){if(b[d]!==c[d]){return false}}return true})};au.max=function(c,d,a){if(!d&&au.isArray(c)&&c[0]===+c[0]&&c.length<65535){return Math.max.apply(Math,c)}if(!d&&au.isEmpty(c)){return -Infinity}var b={computed:-Infinity,value:-Infinity};av(c,function(e,h,f){var g=d?d.call(a,e,h,f):e;g>=b.computed&&(b={value:e,computed:g})});return b.value};au.min=function(c,d,a){if(!d&&au.isArray(c)&&c[0]===+c[0]&&c.length<65535){return Math.min.apply(Math,c)}if(!d&&au.isEmpty(c)){return Infinity}var b={computed:Infinity,value:Infinity};av(c,function(e,h,f){var g=d?d.call(a,e,h,f):e;g<b.computed&&(b={value:e,computed:g})});return b.value};au.shuffle=function(c){var d;var a=0;var b=[];av(c,function(e){d=au.random(a++);b[a-1]=b[d];b[d]=e});return b};var W=function(a){return au.isFunction(a)?a:function(b){return b[a]}};au.sortBy=function(c,d,b){var a=W(d);return au.pluck(au.map(c,function(e,g,f){return{value:e,index:g,criteria:a.call(b,e,g,f)}}).sort(function(e,f){var g=e.criteria;var h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(g<h||h===void 0){return -1}}return e.index<f.index?-1:1}),"value")};var an=function(c,d,a,e){var b={};var f=W(d||au.identity);av(c,function(g,i){var h=f.call(a,g,i,c);e(b,h,g)});return b};au.groupBy=function(c,a,b){return an(c,a,b,function(f,e,d){(au.has(f,e)?f[e]:(f[e]=[])).push(d)})};au.countBy=function(c,a,b){return an(c,a,b,function(e,d){if(!au.has(e,d)){e[d]=0}e[d]++})};au.sortedIndex=function(g,h,c,d){c=c==null?au.identity:W(c);var a=c.call(d,h);var f=0,b=g.length;while(f<b){var e=(f+b)>>>1;c.call(d,g[e])<a?f=e+1:b=e}return f};au.toArray=function(a){if(!a){return[]}if(au.isArray(a)){return Q.call(a)}if(a.length===+a.length){return au.map(a,au.identity)}return au.values(a)};au.size=function(a){if(a==null){return 0}return(a.length===+a.length)?a.length:au.keys(a).length};au.first=au.head=au.take=function(c,a,b){if(c==null){return void 0}return(a!=null)&&!b?Q.call(c,0,a):c[0]};au.initial=function(c,a,b){return Q.call(c,0,c.length-((a==null)||b?1:a))};au.last=function(c,a,b){if(c==null){return void 0}if((a!=null)&&!b){return Q.call(c,Math.max(c.length-a,0))}else{return c[c.length-1]}};au.rest=au.tail=au.drop=function(c,a,b){return Q.call(c,(a==null)||b?1:a)};au.compact=function(a){return au.filter(a,au.identity)};var ao=function(a,c,b){av(a,function(d){if(au.isArray(d)){c?ac.apply(b,d):ao(d,c,b)}else{b.push(d)}});return b};au.flatten=function(a,b){return ao(a,b,[])};au.without=function(a){return au.difference(a,Q.call(arguments,1))};au.uniq=au.unique=function(e,f,g,a){if(au.isFunction(f)){a=g;g=f;f=false}var c=g?au.map(e,g,a):e;var b=[];var d=[];av(c,function(h,i){if(f?(!i||d[d.length-1]!==h):!au.contains(d,h)){d.push(h);b.push(e[i])}});return b};au.union=function(){return au.uniq(ae.apply(aw,arguments))};au.intersection=function(a){var b=Q.call(arguments,1);return au.filter(au.uniq(a),function(c){return au.every(b,function(d){return au.indexOf(d,c)>=0})})};au.difference=function(a){var b=ae.apply(aw,Q.call(arguments,1));return au.filter(a,function(c){return !au.contains(b,c)})};au.zip=function(){var b=Q.call(arguments);var c=au.max(au.pluck(b,"length"));var d=new Array(c);for(var a=0;a<c;a++){d[a]=au.pluck(b,""+a)}return d};au.object=function(a,c){if(a==null){return{}}var e={};for(var b=0,d=a.length;b<d;b++){if(c){e[a[b]]=c[b]}else{e[a[b][0]]=a[b][1]}}return e};au.indexOf=function(a,c,b){if(a==null){return -1}var d=0,e=a.length;if(b){if(typeof b=="number"){d=(b<0?Math.max(0,e+b):b)}else{d=au.sortedIndex(a,c);return a[d]===c?d:-1}}if(al&&a.indexOf===al){return a.indexOf(c,b)}for(;d<e;d++){if(a[d]===c){return d}}return -1};au.lastIndexOf=function(a,c,b){if(a==null){return -1}var e=b!=null;if(ay&&a.lastIndexOf===ay){return e?a.lastIndexOf(c,b):a.lastIndexOf(c)}var d=(e?b:a.length);while(d--){if(a[d]===c){return d}}return -1};au.range=function(c,e,d){if(arguments.length<=1){e=c||0;c=0}d=arguments[2]||1;var a=Math.max(Math.ceil((e-c)/d),0);var b=0;var f=new Array(a);while(b<a){f[b++]=c;c+=d}return f};var U=function(){};au.bind=function(c,a){var b,d;if(c.bind===ab&&ab){return ab.apply(c,Q.call(arguments,1))}if(!au.isFunction(c)){throw new TypeError}b=Q.call(arguments,2);return d=function(){if(!(this instanceof d)){return c.apply(a,b.concat(Q.call(arguments)))}U.prototype=c.prototype;var e=new U;U.prototype=null;var f=c.apply(e,b.concat(Q.call(arguments)));if(Object(f)===f){return f}return e}};au.bindAll=function(a){var b=Q.call(arguments,1);if(b.length==0){b=au.functions(a)}av(b,function(c){a[c]=au.bind(a[c],a)});return a};au.memoize=function(c,a){var b={};a||(a=au.identity);return function(){var d=a.apply(this,arguments);return au.has(b,d)?b[d]:(b[d]=c.apply(this,arguments))}};au.delay=function(a,c){var b=Q.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},c)};au.defer=function(a){return au.delay.apply(au,[a,1].concat(Q.call(arguments,1)))};au.throttle=function(a,g){var c,d,h,f;var b=0;var e=function(){b=new Date;h=null;f=a.apply(c,d)};return function(){var j=new Date;var i=g-(j-b);c=this;d=arguments;if(i<=0){clearTimeout(h);h=null;b=j;f=a.apply(c,d)}else{if(!h){h=setTimeout(e,i)}}return f}};au.debounce=function(c,a,d){var b,e;return function(){var f=this,g=arguments;var h=function(){b=null;if(!d){e=c.apply(f,g)}};var i=d&&!b;clearTimeout(b);b=setTimeout(h,a);if(i){e=c.apply(f,g)}return e}};au.once=function(c){var b=false,a;return function(){if(b){return a}b=true;a=c.apply(this,arguments);c=null;return a}};au.wrap=function(b,a){return function(){var c=[b];ac.apply(c,arguments);return a.apply(this,c)}};au.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}};au.after=function(a,b){if(a<=0){return b()}return function(){if(--a<1){return b.apply(this,arguments)}}};au.keys=N||function(c){if(c!==Object(c)){throw new TypeError("Invalid object")}var a=[];for(var b in c){if(au.has(c,b)){a[a.length]=b}}return a};au.values=function(c){var b=[];for(var a in c){if(au.has(c,a)){b.push(c[a])}}return b};au.pairs=function(c){var a=[];for(var b in c){if(au.has(c,b)){a.push([b,c[b]])}}return a};au.invert=function(c){var b={};for(var a in c){if(au.has(c,a)){b[c[a]]=a}}return b};au.functions=au.methods=function(c){var a=[];for(var b in c){if(au.isFunction(c[b])){a.push(b)}}return a.sort()};au.extend=function(a){av(Q.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}});return a};au.pick=function(a){var c={};var b=ae.apply(aw,Q.call(arguments,1));av(b,function(d){if(d in a){c[d]=a[d]}});return c};au.omit=function(d){var c={};var a=ae.apply(aw,Q.call(arguments,1));for(var b in d){if(!au.contains(a,b)){c[b]=d[b]}}return c};au.defaults=function(a){av(Q.call(arguments,1),function(b){if(b){for(var c in b){if(a[c]==null){a[c]=b[c]}}}});return a};au.clone=function(a){if(!au.isObject(a)){return a}return au.isArray(a)?a.slice():au.extend({},a)};au.tap=function(a,b){b(a);return a};var ad=function(d,e,j,i){if(d===e){return d!==0||1/d==1/e}if(d==null||e==null){return d===e}if(d instanceof au){d=d._wrapped}if(e instanceof au){e=e._wrapped}var g=ar.call(d);if(g!=ar.call(e)){return false}switch(g){case"[object String]":return d==String(e);case"[object Number]":return d!=+d?e!=+e:(d==0?1/d==1/e:d==+e);case"[object Date]":case"[object Boolean]":return +d==+e;case"[object RegExp]":return d.source==e.source&&d.global==e.global&&d.multiline==e.multiline&&d.ignoreCase==e.ignoreCase}if(typeof d!="object"||typeof e!="object"){return false}var k=j.length;while(k--){if(j[k]==d){return i[k]==e}}j.push(d);i.push(e);var b=0,a=true;if(g=="[object Array]"){b=d.length;a=b==e.length;if(a){while(b--){if(!(a=ad(d[b],e[b],j,i))){break}}}}else{var f=d.constructor,h=e.constructor;if(f!==h&&!(au.isFunction(f)&&(f instanceof f)&&au.isFunction(h)&&(h instanceof h))){return false}for(var c in d){if(au.has(d,c)){b++;if(!(a=au.has(e,c)&&ad(d[c],e[c],j,i))){break}}}if(a){for(c in e){if(au.has(e,c)&&!(b--)){break}}a=!b}}j.pop();i.pop();return a};au.isEqual=function(a,b){return ad(a,b,[],[])};au.isEmpty=function(a){if(a==null){return true}if(au.isArray(a)||au.isString(a)){return a.length===0}for(var b in a){if(au.has(a,b)){return false}}return true};au.isElement=function(a){return !!(a&&a.nodeType===1)};au.isArray=ag||function(a){return ar.call(a)=="[object Array]"};au.isObject=function(a){return a===Object(a)};av(["Arguments","Function","String","Number","Date","RegExp"],function(a){au["is"+a]=function(b){return ar.call(b)=="[object "+a+"]"}});if(!au.isArguments(arguments)){au.isArguments=function(a){return !!(a&&au.has(a,"callee"))}}if(typeof(/./)!=="function"){au.isFunction=function(a){return typeof a==="function"}}au.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};au.isNaN=function(a){return au.isNumber(a)&&a!=+a};au.isBoolean=function(a){return a===true||a===false||ar.call(a)=="[object Boolean]"};au.isNull=function(a){return a===null};au.isUndefined=function(a){return a===void 0};au.has=function(a,b){return X.call(a,b)};au.noConflict=function(){ax._=P;return this};au.identity=function(a){return a};au.times=function(a,b,c){var e=Array(a);for(var d=0;d<a;d++){e[d]=b.call(c,d)}return e};au.random=function(a,b){if(b==null){b=a;a=0}return a+(0|Math.random()*(b-a+1))};var ap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};ap.unescape=au.invert(ap.escape);var S={escape:new RegExp("["+au.keys(ap.escape).join("")+"]","g"),unescape:new RegExp("("+au.keys(ap.unescape).join("|")+")","g")};au.each(["escape","unescape"],function(a){au[a]=function(b){if(b==null){return""}return(""+b).replace(S[a],function(c){return ap[a][c]})}});au.result=function(b,c){if(b==null){return null}var a=b[c];return au.isFunction(a)?a.call(b):a};au.mixin=function(a){av(au.functions(a),function(b){var c=au[b]=a[b];au.prototype[b]=function(){var d=[this._wrapped];ac.apply(d,arguments);return O.call(this,c.apply(au,d))}})};var Z=0;au.uniqueId=function(b){var a=""+ ++Z;return b?b+a:a};au.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var af=/(.)^/;var T={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var aq=/\\|'|\r|\n|\t|\u2028|\u2029/g;au.template=function(a,f,g){g=au.defaults({},g,au.templateSettings);var e=new RegExp([(g.escape||af).source,(g.interpolate||af).source,(g.evaluate||af).source].join("|")+"|$","g");var d=0;var i="__p+='";a.replace(e,function(l,n,m,k,j){i+=a.slice(d,j).replace(aq,function(o){return"\\"+T[o]});if(n){i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}if(m){i+="'+\n((__t=("+m+"))==null?'':__t)+\n'"}if(k){i+="';\n"+k+"\n__p+='"}d=j+l.length;return l});i+="';\n";if(!g.variable){i="with(obj||{}){\n"+i+"}\n"}i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var h=new Function(g.variable||"obj","_",i)}catch(c){c.source=i;throw c}if(f){return h(f,au)}var b=function(j){return h.call(this,j,au)};b.source="function("+(g.variable||"obj")+"){\n"+i+"}";return b};au.chain=function(a){return au(a).chain()};var O=function(a){return this._chain?au(a).chain():a};au.mixin(au);av(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=aw[b];au.prototype[b]=function(){var c=this._wrapped;a.apply(c,arguments);if((b=="shift"||b=="splice")&&c.length===0){delete c[0]}return O.call(this,c)}});av(["concat","join","slice"],function(b){var a=aw[b];au.prototype[b]=function(){return O.call(this,a.apply(this._wrapped,arguments))}});au.extend(au.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var c=true;function s(u){if(c){console.log(u)}}var b,m,t;var g=[];var k=10;function p(v,u){v.removeClass("loading");if(u){v.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(u){u.preventDefault();var v=$(this);v.removeClass("selected").addClass("selected");var w=v.closest(".account-selector");w.find("li:not(.selected)").slideUp("fast");w.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){e(true)},1)};$("#authorize-button").click(function(u){u.preventDefault();e(false)});function e(u){p($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:u},i)}function i(u){if(u){$("#authorize-button").hide();gapi.client.load("analytics","v3",o)}else{p($("#authorization"),false);$("#authorize-button").show()}}function o(){p($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(r)}$("#log-out").click(function(u){u.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){q();e(true)},1)})});function q(){}function f(x,v,y,z){var w;if(!x.code){v.empty();if(x&&x.items&&x.items.length){var u=_.sortBy(x.items,"created").reverse();_.each(u,function(A){w=$("<li />");w.attr("rel",A.id);w.text(A.name);w.one("click",z);v.append(w)})}else{w=$("<li />");w.text("No "+y+" found.");v.append(w)}}else{s(x.message);w=$("<li />");w.text("Could not get "+y+".");v.append(w)}v.show()}function r(u){p($("#authorization"),false);p($("#accounts"),false);$("#username").html(u.username).show();$("#log-out").show();f(u,$("#accounts"),"accounts",function(){p($("#web-properties"),true);b=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:b}).execute(h)})}function h(u){p($("#web-properties"),false);f(u,$("#web-properties"),"web properties",function(){p($("#profiles"),true);m=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:b,webPropertyId:m}).execute(j)})}function j(u){p($("#profiles"),false);f(u,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();t=$(this).attr("rel");var v=n(new Date());var w=new Date();w.setMonth(w.getMonth()-1);w=n(w);gapi.client.analytics.data.ga.get({ids:"ga:"+t,"start-date":w,"end-date":v,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":k}).execute(a)})}function a(u){if(!u.code){if(u&&u.rows&&u.rows.length){var v=_.map(u.rows,function(w){var x=w[0];var y=w[1];if(y.indexOf(x)!==-1){return y}else{return x+y}});_.each(v,function(w){g.push({url:w})});gapi.client.load("pagespeedonline","v1",l)}}}function l(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(g,function(u,w){var v="http://"+u.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:v}).execute(function(x){d(w,x)})})}function d(w,C){if(C.code){g.splice(w,1);s("Error "+C.code+" - "+C.message)}else{g[w].pageSpeedScore=C.score;g[w].url=C.id}var B=_.countBy(g,function(D){return _.has(D,"pageSpeedScore")});if(_.has(B,"false")){$("#progress-bar").css("width",B["true"]/(g.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(g.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var u=0;var A=0;var y=0;_.each(g,function(E,D){u=g.length-D;A+=u;y+=E.pageSpeedScore*u});var z=Math.round(y/A);var v=$("#score");v.html(z);v.css("color","hsl("+parseInt((z/100)*120,10)+", 60%, 40%)");v.parent().show();var x=$("#details tbody").empty();_.each(g,function(E){var D=decodeURIComponent(E.url);x.append($('<tr><td><a href="'+D+'" target="_blank">'+D+"</a></td><td>"+E.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(E){E.preventDefault();$("#details").slideToggle("fast");var D=$(this);if(D.hasClass("expanded")){D.html("Show details →").removeClass("expanded")}else{D.html("Hide details ←").addClass("expanded")}}).show()}}function n(v){function u(w){return w<10?"0"+w:w}return v.getFullYear()+"-"+u(v.getMonth()+1)+"-"+u(v.getDate())}}());(function(){var d=this;var K=d._;var p={};var e=Array.prototype,q=Object.prototype,I=Function.prototype;var x=e.push,J=e.slice,v=e.concat,i=q.toString,C=q.hasOwnProperty;var a=e.forEach,z=e.map,h=e.reduce,E=e.reduceRight,b=e.filter,s=e.every,n=e.some,o=e.indexOf,c=e.lastIndexOf,t=Array.isArray,M=Object.keys,y=I.bind;var g=function(N){if(N instanceof g){return N}if(!(this instanceof g)){return new g(N)}this._wrapped=N};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=g}exports._=g}else{d._=g}g.VERSION="1.4.3";var f=g.each=g.forEach=function(Q,P,O){if(Q==null){return}if(a&&Q.forEach===a){Q.forEach(P,O)}else{if(Q.length===+Q.length){for(var N=0,R=Q.length;N<R;N++){if(P.call(O,Q[N],N,Q)===p){return}}}else{for(var S in Q){if(g.has(Q,S)){if(P.call(O,Q[S],S,Q)===p){return}}}}}};g.map=g.collect=function(O,N,Q){var P=[];if(O==null){return P}if(z&&O.map===z){return O.map(N,Q)}f(O,function(T,R,S){P[P.length]=N.call(Q,T,R,S)});return P};var B="Reduce of empty array with no initial value";g.reduce=g.foldl=g.inject=function(R,Q,N,P){var O=arguments.length>2;if(R==null){R=[]}if(h&&R.reduce===h){if(P){Q=g.bind(Q,P)}return O?R.reduce(Q,N):R.reduce(Q)}f(R,function(U,S,T){if(!O){N=U;O=true}else{N=Q.call(P,N,U,S,T)}});if(!O){throw new TypeError(B)}return N};g.reduceRight=g.foldr=function(P,T,Q,S){var R=arguments.length>2;if(P==null){P=[]}if(E&&P.reduceRight===E){if(S){T=g.bind(T,S)}return R?P.reduceRight(T,Q):P.reduceRight(T)}var O=P.length;if(O!==+O){var N=g.keys(P);O=N.length}f(P,function(W,U,V){U=N?N[--O]:--O;if(!R){Q=P[U];R=true}else{Q=T.call(S,Q,P[U],U,V)}});if(!R){throw new TypeError(B)}return Q};g.find=g.detect=function(O,N,Q){var P;r(O,function(T,R,S){if(N.call(Q,T,R,S)){P=T;return true}});return P};g.filter=g.select=function(O,N,Q){var P=[];if(O==null){return P}if(b&&O.filter===b){return O.filter(N,Q)}f(O,function(T,R,S){if(N.call(Q,T,R,S)){P[P.length]=T}});return P};g.reject=function(N,P,O){return g.filter(N,function(S,Q,R){return !P.call(O,S,Q,R)},O)};g.every=g.all=function(O,N,Q){N||(N=g.identity);var P=true;if(O==null){return P}if(s&&O.every===s){return O.every(N,Q)}f(O,function(T,R,S){if(!(P=P&&N.call(Q,T,R,S))){return p}});return !!P};var r=g.some=g.any=function(O,N,Q){N||(N=g.identity);var P=false;if(O==null){return P}if(n&&O.some===n){return O.some(N,Q)}f(O,function(T,R,S){if(P||(P=N.call(Q,T,R,S))){return p}});return !!P};g.contains=g.include=function(O,N){if(O==null){return false}if(o&&O.indexOf===o){return O.indexOf(N)!=-1}return r(O,function(P){return P===N})};g.invoke=function(P,N){var O=J.call(arguments,2);return g.map(P,function(Q){return(g.isFunction(N)?N:Q[N]).apply(Q,O)})};g.pluck=function(O,N){return g.map(O,function(P){return P[N]})};g.where=function(O,N){if(g.isEmpty(N)){return[]}return g.filter(O,function(Q){for(var P in N){if(N[P]!==Q[P]){return false}}return true})};g.max=function(O,N,Q){if(!N&&g.isArray(O)&&O[0]===+O[0]&&O.length<65535){return Math.max.apply(Math,O)}if(!N&&g.isEmpty(O)){return -Infinity}var P={computed:-Infinity,value:-Infinity};f(O,function(U,R,T){var S=N?N.call(Q,U,R,T):U;S>=P.computed&&(P={value:U,computed:S})});return P.value};g.min=function(O,N,Q){if(!N&&g.isArray(O)&&O[0]===+O[0]&&O.length<65535){return Math.min.apply(Math,O)}if(!N&&g.isEmpty(O)){return Infinity}var P={computed:Infinity,value:Infinity};f(O,function(U,R,T){var S=N?N.call(Q,U,R,T):U;S<P.computed&&(P={value:U,computed:S})});return P.value};g.shuffle=function(O){var N;var Q=0;var P=[];f(O,function(R){N=g.random(Q++);P[Q-1]=P[N];P[N]=R});return P};var D=function(N){return g.isFunction(N)?N:function(O){return O[N]}};g.sortBy=function(O,N,P){var Q=D(N);return g.pluck(g.map(O,function(T,R,S){return{value:T,index:R,criteria:Q.call(P,T,R,S)}}).sort(function(U,T){var S=U.criteria;var R=T.criteria;if(S!==R){if(S>R||S===void 0){return 1}if(S<R||R===void 0){return -1}}return U.index<T.index?-1:1}),"value")};var m=function(Q,P,S,O){var R={};var N=D(P||g.identity);f(Q,function(V,T){var U=N.call(S,V,T,Q);O(R,U,V)});return R};g.groupBy=function(N,P,O){return m(N,P,O,function(Q,R,S){(g.has(Q,R)?Q[R]:(Q[R]=[])).push(S)})};g.countBy=function(N,P,O){return m(N,P,O,function(Q,R){if(!g.has(Q,R)){Q[R]=0}Q[R]++})};g.sortedIndex=function(O,N,S,R){S=S==null?g.identity:D(S);var U=S.call(R,N);var P=0,T=O.length;while(P<T){var Q=(P+T)>>>1;S.call(R,O[Q])<U?P=Q+1:T=Q}return P};g.toArray=function(N){if(!N){return[]}if(g.isArray(N)){return J.call(N)}if(N.length===+N.length){return g.map(N,g.identity)}return g.values(N)};g.size=function(N){if(N==null){return 0}return(N.length===+N.length)?N.length:g.keys(N).length};g.first=g.head=g.take=function(N,P,O){if(N==null){return void 0}return(P!=null)&&!O?J.call(N,0,P):N[0]};g.initial=function(N,P,O){return J.call(N,0,N.length-((P==null)||O?1:P))};g.last=function(N,P,O){if(N==null){return void 0}if((P!=null)&&!O){return J.call(N,Math.max(N.length-P,0))}else{return N[N.length-1]}};g.rest=g.tail=g.drop=function(N,P,O){return J.call(N,(P==null)||O?1:P)};g.compact=function(N){return g.filter(N,g.identity)};var l=function(P,N,O){f(P,function(Q){if(g.isArray(Q)){N?x.apply(O,Q):l(Q,N,O)}else{O.push(Q)}});return O};g.flatten=function(O,N){return l(O,N,[])};g.without=function(N){return g.difference(N,J.call(arguments,1))};g.uniq=g.unique=function(P,O,N,T){if(g.isFunction(O)){T=N;N=O;O=false}var R=N?g.map(P,N,T):P;var S=[];var Q=[];f(R,function(V,U){if(O?(!U||Q[Q.length-1]!==V):!g.contains(Q,V)){Q.push(V);S.push(P[U])}});return S};g.union=function(){return g.uniq(v.apply(e,arguments))};g.intersection=function(O){var N=J.call(arguments,1);return g.filter(g.uniq(O),function(P){return g.every(N,function(Q){return g.indexOf(Q,P)>=0})})};g.difference=function(O){var N=v.apply(e,J.call(arguments,1));return g.filter(O,function(P){return !g.contains(N,P)})};g.zip=function(){var P=J.call(arguments);var O=g.max(g.pluck(P,"length"));var N=new Array(O);for(var Q=0;Q<O;Q++){N[Q]=g.pluck(P,""+Q)}return N};g.object=function(R,P){if(R==null){return{}}var N={};for(var Q=0,O=R.length;Q<O;Q++){if(P){N[R[Q]]=P[Q]}else{N[R[Q][0]]=R[Q][1]}}return N};g.indexOf=function(R,P,Q){if(R==null){return -1}var O=0,N=R.length;if(Q){if(typeof Q=="number"){O=(Q<0?Math.max(0,N+Q):Q)}else{O=g.sortedIndex(R,P);return R[O]===P?O:-1}}if(o&&R.indexOf===o){return R.indexOf(P,Q)}for(;O<N;O++){if(R[O]===P){return O}}return -1};g.lastIndexOf=function(R,P,Q){if(R==null){return -1}var N=Q!=null;if(c&&R.lastIndexOf===c){return N?R.lastIndexOf(P,Q):R.lastIndexOf(P)}var O=(N?Q:R.length);while(O--){if(R[O]===P){return O}}return -1};g.range=function(Q,O,P){if(arguments.length<=1){O=Q||0;Q=0}P=arguments[2]||1;var S=Math.max(Math.ceil((O-Q)/P),0);var R=0;var N=new Array(S);while(R<S){N[R++]=Q;Q+=P}return N};var F=function(){};g.bind=function(O,Q){var P,N;if(O.bind===y&&y){return y.apply(O,J.call(arguments,1))}if(!g.isFunction(O)){throw new TypeError}P=J.call(arguments,2);return N=function(){if(!(this instanceof N)){return O.apply(Q,P.concat(J.call(arguments)))}F.prototype=O.prototype;var S=new F;F.prototype=null;var R=O.apply(S,P.concat(J.call(arguments)));if(Object(R)===R){return R}return S}};g.bindAll=function(O){var N=J.call(arguments,1);if(N.length==0){N=g.functions(O)}f(N,function(P){O[P]=g.bind(O[P],O)});return O};g.memoize=function(N,P){var O={};P||(P=g.identity);return function(){var Q=P.apply(this,arguments);return g.has(O,Q)?O[Q]:(O[Q]=N.apply(this,arguments))}};g.delay=function(P,N){var O=J.call(arguments,2);return setTimeout(function(){return P.apply(null,O)},N)};g.defer=function(N){return g.delay.apply(g,[N,1].concat(J.call(arguments,1)))};g.throttle=function(U,O){var S,R,N,P;var T=0;var Q=function(){T=new Date;N=null;P=U.apply(S,R)};return function(){var V=new Date;var W=O-(V-T);S=this;R=arguments;if(W<=0){clearTimeout(N);N=null;T=V;P=U.apply(S,R)}else{if(!N){N=setTimeout(Q,W)}}return P}};g.debounce=function(P,R,O){var Q,N;return function(){var V=this,U=arguments;var T=function(){Q=null;if(!O){N=P.apply(V,U)}};var S=O&&!Q;clearTimeout(Q);Q=setTimeout(T,R);if(S){N=P.apply(V,U)}return N}};g.once=function(N){var O=false,P;return function(){if(O){return P}O=true;P=N.apply(this,arguments);N=null;return P}};g.wrap=function(N,O){return function(){var P=[N];x.apply(P,arguments);return O.apply(this,P)}};g.compose=function(){var N=arguments;return function(){var P=arguments;for(var O=N.length-1;O>=0;O--){P=[N[O].apply(this,P)]}return P[0]}};g.after=function(O,N){if(O<=0){return N()}return function(){if(--O<1){return N.apply(this,arguments)}}};g.keys=M||function(N){if(N!==Object(N)){throw new TypeError("Invalid object")}var P=[];for(var O in N){if(g.has(N,O)){P[P.length]=O}}return P};g.values=function(N){var O=[];for(var P in N){if(g.has(N,P)){O.push(N[P])}}return O};g.pairs=function(N){var P=[];for(var O in N){if(g.has(N,O)){P.push([O,N[O]])}}return P};g.invert=function(N){var O={};for(var P in N){if(g.has(N,P)){O[N[P]]=P}}return O};g.functions=g.methods=function(N){var P=[];for(var O in N){if(g.isFunction(N[O])){P.push(O)}}return P.sort()};g.extend=function(N){f(J.call(arguments,1),function(P){if(P){for(var O in P){N[O]=P[O]}}});return N};g.pick=function(P){var N={};var O=v.apply(e,J.call(arguments,1));f(O,function(Q){if(Q in P){N[Q]=P[Q]}});return N};g.omit=function(N){var O={};var Q=v.apply(e,J.call(arguments,1));for(var P in N){if(!g.contains(Q,P)){O[P]=N[P]}}return O};g.defaults=function(N){f(J.call(arguments,1),function(P){if(P){for(var O in P){if(N[O]==null){N[O]=P[O]}}}});return N};g.clone=function(N){if(!g.isObject(N)){return N}return g.isArray(N)?N.slice():g.extend({},N)};g.tap=function(O,N){N(O);return O};var w=function(U,T,O,P){if(U===T){return U!==0||1/U==1/T}if(U==null||T==null){return U===T}if(U instanceof g){U=U._wrapped}if(T instanceof g){T=T._wrapped}var R=i.call(U);if(R!=i.call(T)){return false}switch(R){case"[object String]":return U==String(T);case"[object Number]":return U!=+U?T!=+T:(U==0?1/U==1/T:U==+T);case"[object Date]":case"[object Boolean]":return +U==+T;case"[object RegExp]":return U.source==T.source&&U.global==T.global&&U.multiline==T.multiline&&U.ignoreCase==T.ignoreCase}if(typeof U!="object"||typeof T!="object"){return false}var N=O.length;while(N--){if(O[N]==U){return P[N]==T}}O.push(U);P.push(T);var W=0,X=true;if(R=="[object Array]"){W=U.length;X=W==T.length;if(X){while(W--){if(!(X=w(U[W],T[W],O,P))){break}}}}else{var S=U.constructor,Q=T.constructor;if(S!==Q&&!(g.isFunction(S)&&(S instanceof S)&&g.isFunction(Q)&&(Q instanceof Q))){return false}for(var V in U){if(g.has(U,V)){W++;if(!(X=g.has(T,V)&&w(U[V],T[V],O,P))){break}}}if(X){for(V in T){if(g.has(T,V)&&!(W--)){break}}X=!W}}O.pop();P.pop();return X};g.isEqual=function(O,N){return w(O,N,[],[])};g.isEmpty=function(O){if(O==null){return true}if(g.isArray(O)||g.isString(O)){return O.length===0}for(var N in O){if(g.has(O,N)){return false}}return true};g.isElement=function(N){return !!(N&&N.nodeType===1)};g.isArray=t||function(N){return i.call(N)=="[object Array]"};g.isObject=function(N){return N===Object(N)};f(["Arguments","Function","String","Number","Date","RegExp"],function(N){g["is"+N]=function(O){return i.call(O)=="[object "+N+"]"}});if(!g.isArguments(arguments)){g.isArguments=function(N){return !!(N&&g.has(N,"callee"))}}if(typeof(/./)!=="function"){g.isFunction=function(N){return typeof N==="function"}}g.isFinite=function(N){return isFinite(N)&&!isNaN(parseFloat(N))};g.isNaN=function(N){return g.isNumber(N)&&N!=+N};g.isBoolean=function(N){return N===true||N===false||i.call(N)=="[object Boolean]"};g.isNull=function(N){return N===null};g.isUndefined=function(N){return N===void 0};g.has=function(O,N){return C.call(O,N)};g.noConflict=function(){d._=K;return this};g.identity=function(N){return N};g.times=function(R,Q,P){var N=Array(R);for(var O=0;O<R;O++){N[O]=Q.call(P,O)}return N};g.random=function(O,N){if(N==null){N=O;O=0}return O+(0|Math.random()*(N-O+1))};var k={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};k.unescape=g.invert(k.escape);var H={escape:new RegExp("["+g.keys(k.escape).join("")+"]","g"),unescape:new RegExp("("+g.keys(k.unescape).join("|")+")","g")};g.each(["escape","unescape"],function(N){g[N]=function(O){if(O==null){return""}return(""+O).replace(H[N],function(P){return k[N][P]})}});g.result=function(O,N){if(O==null){return null}var P=O[N];return g.isFunction(P)?P.call(O):P};g.mixin=function(N){f(g.functions(N),function(P){var O=g[P]=N[P];g.prototype[P]=function(){var Q=[this._wrapped];x.apply(Q,arguments);return L.call(this,O.apply(g,Q))}})};var A=0;g.uniqueId=function(N){var O=""+ ++A;return N?N+O:O};g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u=/(.)^/;var G={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var j=/\\|'|\r|\n|\t|\u2028|\u2029/g;g.template=function(V,Q,P){P=g.defaults({},P,g.templateSettings);var R=new RegExp([(P.escape||u).source,(P.interpolate||u).source,(P.evaluate||u).source].join("|")+"|$","g");var S=0;var N="__p+='";V.replace(R,function(aa,X,Y,Z,W){N+=V.slice(S,W).replace(j,function(ab){return"\\"+G[ab]});if(X){N+="'+\n((__t=("+X+"))==null?'':_.escape(__t))+\n'"}if(Y){N+="'+\n((__t=("+Y+"))==null?'':__t)+\n'"}if(Z){N+="';\n"+Z+"\n__p+='"}S=W+aa.length;return aa});N+="';\n";if(!P.variable){N="with(obj||{}){\n"+N+"}\n"}N="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+N+"return __p;\n";try{var O=new Function(P.variable||"obj","_",N)}catch(T){T.source=N;throw T}if(Q){return O(Q,g)}var U=function(W){return O.call(this,W,g)};U.source="function("+(P.variable||"obj")+"){\n"+N+"}";return U};g.chain=function(N){return g(N).chain()};var L=function(N){return this._chain?g(N).chain():N};g.mixin(g);f(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var O=e[N];g.prototype[N]=function(){var P=this._wrapped;O.apply(P,arguments);if((N=="shift"||N=="splice")&&P.length===0){delete P[0]}return L.call(this,P)}});f(["concat","join","slice"],function(N){var O=e[N];g.prototype[N]=function(){return L.call(this,O.apply(this._wrapped,arguments))}});g.extend(g.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var L=true;function B(a){if(L){console.log(a)}}var M,v,A;var y=[];var w=10;function E(a,b){a.removeClass("loading");if(b){a.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(b){b.preventDefault();var a=$(this);a.removeClass("selected").addClass("selected");var c=a.closest(".account-selector");c.find("li:not(.selected)").slideUp("fast");c.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){z(true)},1)};$("#authorize-button").click(function(a){a.preventDefault();z(false)});function z(a){E($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:a},x)}function x(a){if(a){$("#authorize-button").hide();gapi.client.load("analytics","v3",F)}else{E($("#authorization"),false);$("#authorize-button").show()}}function F(){E($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(C)}$("#log-out").click(function(a){a.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){D();z(true)},1)})});function D(){}function J(e,a,d,c){var f;if(!e.code){a.empty();if(e&&e.items&&e.items.length){var b=_.sortBy(e.items,"created").reverse();_.each(b,function(g){f=$("<li />");f.attr("rel",g.id);f.text(g.name);f.one("click",c);a.append(f)})}else{f=$("<li />");f.text("No "+d+" found.");a.append(f)}}else{B(e.message);f=$("<li />");f.text("Could not get "+d+".");a.append(f)}a.show()}function C(a){E($("#authorization"),false);E($("#accounts"),false);$("#username").html(a.username).show();$("#log-out").show();J(a,$("#accounts"),"accounts",function(){E($("#web-properties"),true);M=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:M}).execute(I)})}function I(a){E($("#web-properties"),false);J(a,$("#web-properties"),"web properties",function(){E($("#profiles"),true);v=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:M,webPropertyId:v}).execute(H)})}function H(a){E($("#profiles"),false);J(a,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();A=$(this).attr("rel");var b=u(new Date());var c=new Date();c.setMonth(c.getMonth()-1);c=u(c);gapi.client.analytics.data.ga.get({ids:"ga:"+A,"start-date":c,"end-date":b,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":w}).execute(N)})}function N(b){if(!b.code){if(b&&b.rows&&b.rows.length){var a=_.map(b.rows,function(e){var d=e[0];var c=e[1];if(c.indexOf(d)!==-1){return c}else{return d+c}});_.each(a,function(c){y.push({url:c})});gapi.client.load("pagespeedonline","v1",G)}}}function G(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(y,function(b,c){var a="http://"+b.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:a}).execute(function(d){K(c,d)})})}function K(g,a){if(a.code){y.splice(g,1);B("Error "+a.code+" - "+a.message)}else{y[g].pageSpeedScore=a.score;y[g].url=a.id}var b=_.countBy(y,function(j){return _.has(j,"pageSpeedScore")});if(_.has(b,"false")){$("#progress-bar").css("width",b["true"]/(y.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(y.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var i=0;var c=0;var e=0;_.each(y,function(j,k){i=y.length-k;c+=i;e+=j.pageSpeedScore*i});var d=Math.round(e/c);var h=$("#score");h.html(d);h.css("color","hsl("+parseInt((d/100)*120,10)+", 60%, 40%)");h.parent().show();var f=$("#details tbody").empty();_.each(y,function(j){var k=decodeURIComponent(j.url);f.append($('<tr><td><a href="'+k+'" target="_blank">'+k+"</a></td><td>"+j.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(j){j.preventDefault();$("#details").slideToggle("fast");var k=$(this);if(k.hasClass("expanded")){k.html("Show details →").removeClass("expanded")}else{k.html("Hide details ←").addClass("expanded")}}).show()}}function u(a){function b(c){return c<10?"0"+c:c}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())}}());(function(){var ay=this;var ab=ay._;var R={};var X=Array.prototype,ar=Object.prototype,ad=Function.prototype;var N=X.push,ac=X.slice,ap=X.concat,V=ar.toString,aj=ar.hasOwnProperty;var Z=X.forEach,am=X.map,aw=X.reduce,ah=X.reduceRight,az=X.filter,aq=X.every,at=X.some,S=X.indexOf,Y=X.lastIndexOf,P=Array.isArray,aA=Object.keys,an=ad.bind;var W=function(a){if(a instanceof W){return a}if(!(this instanceof W)){return new W(a)}this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=W}exports._=W}else{ay._=W}W.VERSION="1.4.3";var ax=W.each=W.forEach=function(e,f,a){if(e==null){return}if(Z&&e.forEach===Z){e.forEach(f,a)}else{if(e.length===+e.length){for(var b=0,d=e.length;b<d;b++){if(f.call(a,e[b],b,e)===R){return}}}else{for(var c in e){if(W.has(e,c)){if(f.call(a,e[c],c,e)===R){return}}}}}};W.map=W.collect=function(a,b,c){var d=[];if(a==null){return d}if(am&&a.map===am){return a.map(b,c)}ax(a,function(e,g,f){d[d.length]=b.call(c,e,g,f)});return d};var ak="Reduce of empty array with no initial value";W.reduce=W.foldl=W.inject=function(c,d,b,e){var a=arguments.length>2;if(c==null){c=[]}if(aw&&c.reduce===aw){if(e){d=W.bind(d,e)}return a?c.reduce(d,b):c.reduce(d)}ax(c,function(f,h,g){if(!a){b=f;a=true}else{b=d.call(e,b,f,h,g)}});if(!a){throw new TypeError(ak)}return b};W.reduceRight=W.foldr=function(g,c,f,d){var e=arguments.length>2;if(g==null){g=[]}if(ah&&g.reduceRight===ah){if(d){c=W.bind(c,d)}return e?g.reduceRight(c,f):g.reduceRight(c)}var a=g.length;if(a!==+a){var b=W.keys(g);a=b.length}ax(g,function(h,j,i){j=b?b[--a]:--a;if(!e){f=g[j];e=true}else{f=c.call(d,f,g[j],j,i)}});if(!e){throw new TypeError(ak)}return f};W.find=W.detect=function(a,b,c){var d;Q(a,function(e,g,f){if(b.call(c,e,g,f)){d=e;return true}});return d};W.filter=W.select=function(a,b,c){var d=[];if(a==null){return d}if(az&&a.filter===az){return a.filter(b,c)}ax(a,function(e,g,f){if(b.call(c,e,g,f)){d[d.length]=e}});return d};W.reject=function(b,c,a){return W.filter(b,function(d,f,e){return !c.call(a,d,f,e)},a)};W.every=W.all=function(a,b,c){b||(b=W.identity);var d=true;if(a==null){return d}if(aq&&a.every===aq){return a.every(b,c)}ax(a,function(e,g,f){if(!(d=d&&b.call(c,e,g,f))){return R}});return !!d};var Q=W.some=W.any=function(a,b,c){b||(b=W.identity);var d=false;if(a==null){return d}if(at&&a.some===at){return a.some(b,c)}ax(a,function(e,g,f){if(d||(d=b.call(c,e,g,f))){return R}});return !!d};W.contains=W.include=function(a,b){if(a==null){return false}if(S&&a.indexOf===S){return a.indexOf(b)!=-1}return Q(a,function(c){return c===b})};W.invoke=function(c,b){var a=ac.call(arguments,2);return W.map(c,function(d){return(W.isFunction(b)?b:d[b]).apply(d,a)})};W.pluck=function(a,b){return W.map(a,function(c){return c[b]})};W.where=function(a,b){if(W.isEmpty(b)){return[]}return W.filter(a,function(c){for(var d in b){if(b[d]!==c[d]){return false}}return true})};W.max=function(a,b,c){if(!b&&W.isArray(a)&&a[0]===+a[0]&&a.length<65535){return Math.max.apply(Math,a)}if(!b&&W.isEmpty(a)){return -Infinity}var d={computed:-Infinity,value:-Infinity};ax(a,function(e,h,f){var g=b?b.call(c,e,h,f):e;g>=d.computed&&(d={value:e,computed:g})});return d.value};W.min=function(a,b,c){if(!b&&W.isArray(a)&&a[0]===+a[0]&&a.length<65535){return Math.min.apply(Math,a)}if(!b&&W.isEmpty(a)){return Infinity}var d={computed:Infinity,value:Infinity};ax(a,function(e,h,f){var g=b?b.call(c,e,h,f):e;g<d.computed&&(d={value:e,computed:g})});return d.value};W.shuffle=function(a){var b;var c=0;var d=[];ax(a,function(e){b=W.random(c++);d[c-1]=d[b];d[b]=e});return d};var ai=function(a){return W.isFunction(a)?a:function(b){return b[a]}};W.sortBy=function(a,b,d){var c=ai(b);return W.pluck(W.map(a,function(e,g,f){return{value:e,index:g,criteria:c.call(d,e,g,f)}}).sort(function(e,f){var g=e.criteria;var h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(g<h||h===void 0){return -1}}return e.index<f.index?-1:1}),"value")};var T=function(e,f,c,a){var d={};var b=ai(f||W.identity);ax(e,function(g,i){var h=b.call(c,g,i,e);a(d,h,g)});return d};W.groupBy=function(b,c,a){return T(b,c,a,function(f,e,d){(W.has(f,e)?f[e]:(f[e]=[])).push(d)})};W.countBy=function(b,c,a){return T(b,c,a,function(e,d){if(!W.has(e,d)){e[d]=0}e[d]++})};W.sortedIndex=function(a,b,e,f){e=e==null?W.identity:ai(e);var c=e.call(f,b);var h=0,d=a.length;while(h<d){var g=(h+d)>>>1;e.call(f,a[g])<c?h=g+1:d=g}return h};W.toArray=function(a){if(!a){return[]}if(W.isArray(a)){return ac.call(a)}if(a.length===+a.length){return W.map(a,W.identity)}return W.values(a)};W.size=function(a){if(a==null){return 0}return(a.length===+a.length)?a.length:W.keys(a).length};W.first=W.head=W.take=function(b,c,a){if(b==null){return void 0}return(c!=null)&&!a?ac.call(b,0,c):b[0]};W.initial=function(b,c,a){return ac.call(b,0,b.length-((c==null)||a?1:c))};W.last=function(b,c,a){if(b==null){return void 0}if((c!=null)&&!a){return ac.call(b,Math.max(b.length-c,0))}else{return b[b.length-1]}};W.rest=W.tail=W.drop=function(b,c,a){return ac.call(b,(c==null)||a?1:c)};W.compact=function(a){return W.filter(a,W.identity)};var au=function(c,b,a){ax(c,function(d){if(W.isArray(d)){b?N.apply(a,d):au(d,b,a)}else{a.push(d)}});return a};W.flatten=function(a,b){return au(a,b,[])};W.without=function(a){return W.difference(a,ac.call(arguments,1))};W.uniq=W.unique=function(g,a,b,c){if(W.isFunction(a)){c=b;b=a;a=false}var e=b?W.map(g,b,c):g;var d=[];var f=[];ax(e,function(h,i){if(a?(!i||f[f.length-1]!==h):!W.contains(f,h)){f.push(h);d.push(g[i])}});return d};W.union=function(){return W.uniq(ap.apply(X,arguments))};W.intersection=function(a){var b=ac.call(arguments,1);return W.filter(W.uniq(a),function(c){return W.every(b,function(d){return W.indexOf(d,c)>=0})})};W.difference=function(a){var b=ap.apply(X,ac.call(arguments,1));return W.filter(a,function(c){return !W.contains(b,c)})};W.zip=function(){var d=ac.call(arguments);var a=W.max(W.pluck(d,"length"));var b=new Array(a);for(var c=0;c<a;c++){b[c]=W.pluck(d,""+c)}return b};W.object=function(c,e){if(c==null){return{}}var b={};for(var d=0,a=c.length;d<a;d++){if(e){b[c[d]]=e[d]}else{b[c[d][0]]=c[d][1]}}return b};W.indexOf=function(c,e,d){if(c==null){return -1}var a=0,b=c.length;if(d){if(typeof d=="number"){a=(d<0?Math.max(0,b+d):d)}else{a=W.sortedIndex(c,e);return c[a]===e?a:-1}}if(S&&c.indexOf===S){return c.indexOf(e,d)}for(;a<b;a++){if(c[a]===e){return a}}return -1};W.lastIndexOf=function(c,e,d){if(c==null){return -1}var b=d!=null;if(Y&&c.lastIndexOf===Y){return b?c.lastIndexOf(e,d):c.lastIndexOf(e)}var a=(b?d:c.length);while(a--){if(c[a]===e){return a}}return -1};W.range=function(e,a,f){if(arguments.length<=1){a=e||0;e=0}f=arguments[2]||1;var c=Math.max(Math.ceil((a-e)/f),0);var d=0;var b=new Array(c);while(d<c){b[d++]=e;e+=f}return b};var ag=function(){};W.bind=function(a,c){var d,b;if(a.bind===an&&an){return an.apply(a,ac.call(arguments,1))}if(!W.isFunction(a)){throw new TypeError}d=ac.call(arguments,2);return b=function(){if(!(this instanceof b)){return a.apply(c,d.concat(ac.call(arguments)))}ag.prototype=a.prototype;var e=new ag;ag.prototype=null;var f=a.apply(e,d.concat(ac.call(arguments)));if(Object(f)===f){return f}return e}};W.bindAll=function(a){var b=ac.call(arguments,1);if(b.length==0){b=W.functions(a)}ax(b,function(c){a[c]=W.bind(a[c],a)});return a};W.memoize=function(b,c){var a={};c||(c=W.identity);return function(){var d=c.apply(this,arguments);return W.has(a,d)?a[d]:(a[d]=b.apply(this,arguments))}};W.delay=function(c,b){var a=ac.call(arguments,2);return setTimeout(function(){return c.apply(null,a)},b)};W.defer=function(a){return W.delay.apply(W,[a,1].concat(ac.call(arguments,1)))};W.throttle=function(c,a){var e,f,b,h;var d=0;var g=function(){d=new Date;b=null;h=c.apply(e,f)};return function(){var j=new Date;var i=a-(j-d);e=this;f=arguments;if(i<=0){clearTimeout(b);b=null;d=j;h=c.apply(e,f)}else{if(!b){b=setTimeout(g,i)}}return h}};W.debounce=function(e,c,a){var d,b;return function(){var f=this,g=arguments;var h=function(){d=null;if(!a){b=e.apply(f,g)}};var i=a&&!d;clearTimeout(d);d=setTimeout(h,c);if(i){b=e.apply(f,g)}return b}};W.once=function(b){var a=false,c;return function(){if(a){return c}a=true;c=b.apply(this,arguments);b=null;return c}};W.wrap=function(b,a){return function(){var c=[b];N.apply(c,arguments);return a.apply(this,c)}};W.compose=function(){var a=arguments;return function(){var c=arguments;for(var b=a.length-1;b>=0;b--){c=[a[b].apply(this,c)]}return c[0]}};W.after=function(a,b){if(a<=0){return b()}return function(){if(--a<1){return b.apply(this,arguments)}}};W.keys=aA||function(b){if(b!==Object(b)){throw new TypeError("Invalid object")}var c=[];for(var a in b){if(W.has(b,a)){c[c.length]=a}}return c};W.values=function(b){var a=[];for(var c in b){if(W.has(b,c)){a.push(b[c])}}return a};W.pairs=function(b){var c=[];for(var a in b){if(W.has(b,a)){c.push([a,b[a]])}}return c};W.invert=function(b){var a={};for(var c in b){if(W.has(b,c)){a[b[c]]=c}}return a};W.functions=W.methods=function(b){var c=[];for(var a in b){if(W.isFunction(b[a])){c.push(a)}}return c.sort()};W.extend=function(a){ax(ac.call(arguments,1),function(c){if(c){for(var b in c){a[b]=c[b]}}});return a};W.pick=function(c){var b={};var a=ap.apply(X,ac.call(arguments,1));ax(a,function(d){if(d in c){b[d]=c[d]}});return b};W.omit=function(b){var a={};var c=ap.apply(X,ac.call(arguments,1));for(var d in b){if(!W.contains(c,d)){a[d]=b[d]}}return a};W.defaults=function(a){ax(ac.call(arguments,1),function(c){if(c){for(var b in c){if(a[b]==null){a[b]=c[b]}}}});return a};W.clone=function(a){if(!W.isObject(a)){return a}return W.isArray(a)?a.slice():W.extend({},a)};W.tap=function(a,b){b(a);return a};var ao=function(d,e,j,i){if(d===e){return d!==0||1/d==1/e}if(d==null||e==null){return d===e}if(d instanceof W){d=d._wrapped}if(e instanceof W){e=e._wrapped}var g=V.call(d);if(g!=V.call(e)){return false}switch(g){case"[object String]":return d==String(e);case"[object Number]":return d!=+d?e!=+e:(d==0?1/d==1/e:d==+e);case"[object Date]":case"[object Boolean]":return +d==+e;case"[object RegExp]":return d.source==e.source&&d.global==e.global&&d.multiline==e.multiline&&d.ignoreCase==e.ignoreCase}if(typeof d!="object"||typeof e!="object"){return false}var k=j.length;while(k--){if(j[k]==d){return i[k]==e}}j.push(d);i.push(e);var b=0,a=true;if(g=="[object Array]"){b=d.length;a=b==e.length;if(a){while(b--){if(!(a=ao(d[b],e[b],j,i))){break}}}}else{var f=d.constructor,h=e.constructor;if(f!==h&&!(W.isFunction(f)&&(f instanceof f)&&W.isFunction(h)&&(h instanceof h))){return false}for(var c in d){if(W.has(d,c)){b++;if(!(a=W.has(e,c)&&ao(d[c],e[c],j,i))){break}}}if(a){for(c in e){if(W.has(e,c)&&!(b--)){break}}a=!b}}j.pop();i.pop();return a};W.isEqual=function(a,b){return ao(a,b,[],[])};W.isEmpty=function(a){if(a==null){return true}if(W.isArray(a)||W.isString(a)){return a.length===0}for(var b in a){if(W.has(a,b)){return false}}return true};W.isElement=function(a){return !!(a&&a.nodeType===1)};W.isArray=P||function(a){return V.call(a)=="[object Array]"};W.isObject=function(a){return a===Object(a)};ax(["Arguments","Function","String","Number","Date","RegExp"],function(a){W["is"+a]=function(b){return V.call(b)=="[object "+a+"]"}});if(!W.isArguments(arguments)){W.isArguments=function(a){return !!(a&&W.has(a,"callee"))}}if(typeof(/./)!=="function"){W.isFunction=function(a){return typeof a==="function"}}W.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};W.isNaN=function(a){return W.isNumber(a)&&a!=+a};W.isBoolean=function(a){return a===true||a===false||V.call(a)=="[object Boolean]"};W.isNull=function(a){return a===null};W.isUndefined=function(a){return a===void 0};W.has=function(a,b){return aj.call(a,b)};W.noConflict=function(){ay._=ab;return this};W.identity=function(a){return a};W.times=function(c,d,e){var b=Array(c);for(var a=0;a<c;a++){b[a]=d.call(e,a)}return b};W.random=function(a,b){if(b==null){b=a;a=0}return a+(0|Math.random()*(b-a+1))};var U={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};U.unescape=W.invert(U.escape);var ae={escape:new RegExp("["+W.keys(U.escape).join("")+"]","g"),unescape:new RegExp("("+W.keys(U.unescape).join("|")+")","g")};W.each(["escape","unescape"],function(a){W[a]=function(b){if(b==null){return""}return(""+b).replace(ae[a],function(c){return U[a][c]})}});W.result=function(a,b){if(a==null){return null}var c=a[b];return W.isFunction(c)?c.call(a):c};W.mixin=function(a){ax(W.functions(a),function(c){var b=W[c]=a[c];W.prototype[c]=function(){var d=[this._wrapped];N.apply(d,arguments);return aa.call(this,b.apply(W,d))}})};var al=0;W.uniqueId=function(b){var a=""+ ++al;return b?b+a:a};W.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/;var af={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var av=/\\|'|\r|\n|\t|\u2028|\u2029/g;W.template=function(a,f,g){g=W.defaults({},g,W.templateSettings);var e=new RegExp([(g.escape||O).source,(g.interpolate||O).source,(g.evaluate||O).source].join("|")+"|$","g");var d=0;var i="__p+='";a.replace(e,function(n,l,k,j,m){i+=a.slice(d,m).replace(av,function(o){return"\\"+af[o]});if(l){i+="'+\n((__t=("+l+"))==null?'':_.escape(__t))+\n'"}if(k){i+="'+\n((__t=("+k+"))==null?'':__t)+\n'"}if(j){i+="';\n"+j+"\n__p+='"}d=m+n.length;return n});i+="';\n";if(!g.variable){i="with(obj||{}){\n"+i+"}\n"}i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var h=new Function(g.variable||"obj","_",i)}catch(c){c.source=i;throw c}if(f){return h(f,W)}var b=function(j){return h.call(this,j,W)};b.source="function("+(g.variable||"obj")+"){\n"+i+"}";return b};W.chain=function(a){return W(a).chain()};var aa=function(a){return this._chain?W(a).chain():a};W.mixin(W);ax(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=X[b];W.prototype[b]=function(){var c=this._wrapped;a.apply(c,arguments);if((b=="shift"||b=="splice")&&c.length===0){delete c[0]}return aa.call(this,c)}});ax(["concat","join","slice"],function(b){var a=X[b];W.prototype[b]=function(){return aa.call(this,a.apply(this._wrapped,arguments))}});W.extend(W.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var c=true;function m(u){if(c){console.log(u)}}var b,s,n;var p=[];var r=10;function j(v,u){v.removeClass("loading");if(u){v.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(v){v.preventDefault();var w=$(this);w.removeClass("selected").addClass("selected");var u=w.closest(".account-selector");u.find("li:not(.selected)").slideUp("fast");u.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){o(true)},1)};$("#authorize-button").click(function(u){u.preventDefault();o(false)});function o(u){j($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:u},q)}function q(u){if(u){$("#authorize-button").hide();gapi.client.load("analytics","v3",i)}else{j($("#authorization"),false);$("#authorize-button").show()}}function i(){j($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(l)}$("#log-out").click(function(u){u.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){k();o(true)},1)})});function k(){}function e(z,x,u,v){var y;if(!z.code){x.empty();if(z&&z.items&&z.items.length){var w=_.sortBy(z.items,"created").reverse();_.each(w,function(A){y=$("<li />");y.attr("rel",A.id);y.text(A.name);y.one("click",v);x.append(y)})}else{y=$("<li />");y.text("No "+u+" found.");x.append(y)}}else{m(z.message);y=$("<li />");y.text("Could not get "+u+".");x.append(y)}x.show()}function l(u){j($("#authorization"),false);j($("#accounts"),false);$("#username").html(u.username).show();$("#log-out").show();e(u,$("#accounts"),"accounts",function(){j($("#web-properties"),true);b=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:b}).execute(f)})}function f(u){j($("#web-properties"),false);e(u,$("#web-properties"),"web properties",function(){j($("#profiles"),true);s=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:b,webPropertyId:s}).execute(g)})}function g(u){j($("#profiles"),false);e(u,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();n=$(this).attr("rel");var w=t(new Date());var v=new Date();v.setMonth(v.getMonth()-1);v=t(v);gapi.client.analytics.data.ga.get({ids:"ga:"+n,"start-date":v,"end-date":w,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":r}).execute(a)})}function a(u){if(!u.code){if(u&&u.rows&&u.rows.length){var v=_.map(u.rows,function(y){var w=y[0];var x=y[1];if(x.indexOf(w)!==-1){return x}else{return w+x}});_.each(v,function(w){p.push({url:w})});gapi.client.load("pagespeedonline","v1",h)}}}function h(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(p,function(v,u){var w="http://"+v.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:w}).execute(function(x){d(u,x)})})}function d(w,C){if(C.code){p.splice(w,1);m("Error "+C.code+" - "+C.message)}else{p[w].pageSpeedScore=C.score;p[w].url=C.id}var B=_.countBy(p,function(D){return _.has(D,"pageSpeedScore")});if(_.has(B,"false")){$("#progress-bar").css("width",B["true"]/(p.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(p.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var u=0;var A=0;var y=0;_.each(p,function(E,D){u=p.length-D;A+=u;y+=E.pageSpeedScore*u});var z=Math.round(y/A);var v=$("#score");v.html(z);v.css("color","hsl("+parseInt((z/100)*120,10)+", 60%, 40%)");v.parent().show();var x=$("#details tbody").empty();_.each(p,function(E){var D=decodeURIComponent(E.url);x.append($('<tr><td><a href="'+D+'" target="_blank">'+D+"</a></td><td>"+E.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(E){E.preventDefault();$("#details").slideToggle("fast");var D=$(this);if(D.hasClass("expanded")){D.html("Show details →").removeClass("expanded")}else{D.html("Hide details ←").addClass("expanded")}}).show()}}function t(v){function u(w){return w<10?"0"+w:w}return v.getFullYear()+"-"+u(v.getMonth()+1)+"-"+u(v.getDate())}}());(function(){var c=this;var y=c._;var I={};var C=Array.prototype,i=Object.prototype,w=Function.prototype;var M=C.push,x=C.slice,k=C.concat,E=i.toString,q=i.hasOwnProperty;var A=C.forEach,n=C.map,e=C.reduce,s=C.reduceRight,b=C.filter,j=C.every,h=C.some,H=C.indexOf,B=C.lastIndexOf,K=Array.isArray,a=Object.keys,m=w.bind;var D=function(N){if(N instanceof D){return N}if(!(this instanceof D)){return new D(N)}this._wrapped=N};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=D}exports._=D}else{c._=D}D.VERSION="1.4.3";var d=D.each=D.forEach=function(O,N,S){if(O==null){return}if(A&&O.forEach===A){O.forEach(N,S)}else{if(O.length===+O.length){for(var R=0,P=O.length;R<P;R++){if(N.call(S,O[R],R,O)===I){return}}}else{for(var Q in O){if(D.has(O,Q)){if(N.call(S,O[Q],Q,O)===I){return}}}}}};D.map=D.collect=function(Q,P,O){var N=[];if(Q==null){return N}if(n&&Q.map===n){return Q.map(P,O)}d(Q,function(T,R,S){N[N.length]=P.call(O,T,R,S)});return N};var p="Reduce of empty array with no initial value";D.reduce=D.foldl=D.inject=function(P,O,Q,N){var R=arguments.length>2;if(P==null){P=[]}if(e&&P.reduce===e){if(N){O=D.bind(O,N)}return R?P.reduce(O,Q):P.reduce(O)}d(P,function(U,S,T){if(!R){Q=U;R=true}else{Q=O.call(N,Q,U,S,T)}});if(!R){throw new TypeError(p)}return Q};D.reduceRight=D.foldr=function(N,R,O,Q){var P=arguments.length>2;if(N==null){N=[]}if(s&&N.reduceRight===s){if(Q){R=D.bind(R,Q)}return P?N.reduceRight(R,O):N.reduceRight(R)}var T=N.length;if(T!==+T){var S=D.keys(N);T=S.length}d(N,function(W,U,V){U=S?S[--T]:--T;if(!P){O=N[U];P=true}else{O=R.call(Q,O,N[U],U,V)}});if(!P){throw new TypeError(p)}return O};D.find=D.detect=function(Q,P,O){var N;J(Q,function(T,R,S){if(P.call(O,T,R,S)){N=T;return true}});return N};D.filter=D.select=function(Q,P,O){var N=[];if(Q==null){return N}if(b&&Q.filter===b){return Q.filter(P,O)}d(Q,function(T,R,S){if(P.call(O,T,R,S)){N[N.length]=T}});return N};D.reject=function(O,N,P){return D.filter(O,function(S,Q,R){return !N.call(P,S,Q,R)},P)};D.every=D.all=function(Q,P,O){P||(P=D.identity);var N=true;if(Q==null){return N}if(j&&Q.every===j){return Q.every(P,O)}d(Q,function(T,R,S){if(!(N=N&&P.call(O,T,R,S))){return I}});return !!N};var J=D.some=D.any=function(Q,P,O){P||(P=D.identity);var N=false;if(Q==null){return N}if(h&&Q.some===h){return Q.some(P,O)}d(Q,function(T,R,S){if(N||(N=P.call(O,T,R,S))){return I}});return !!N};D.contains=D.include=function(O,N){if(O==null){return false}if(H&&O.indexOf===H){return O.indexOf(N)!=-1}return J(O,function(P){return P===N})};D.invoke=function(N,O){var P=x.call(arguments,2);return D.map(N,function(Q){return(D.isFunction(O)?O:Q[O]).apply(Q,P)})};D.pluck=function(O,N){return D.map(O,function(P){return P[N]})};D.where=function(O,N){if(D.isEmpty(N)){return[]}return D.filter(O,function(Q){for(var P in N){if(N[P]!==Q[P]){return false}}return true})};D.max=function(Q,P,O){if(!P&&D.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.max.apply(Math,Q)}if(!P&&D.isEmpty(Q)){return -Infinity}var N={computed:-Infinity,value:-Infinity};d(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S>=N.computed&&(N={value:U,computed:S})});return N.value};D.min=function(Q,P,O){if(!P&&D.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.min.apply(Math,Q)}if(!P&&D.isEmpty(Q)){return Infinity}var N={computed:Infinity,value:Infinity};d(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S<N.computed&&(N={value:U,computed:S})});return N.value};D.shuffle=function(Q){var P;var O=0;var N=[];d(Q,function(R){P=D.random(O++);N[O-1]=N[P];N[P]=R});return N};var r=function(N){return D.isFunction(N)?N:function(O){return O[N]}};D.sortBy=function(Q,P,N){var O=r(P);return D.pluck(D.map(Q,function(T,R,S){return{value:T,index:R,criteria:O.call(N,T,R,S)}}).sort(function(U,T){var S=U.criteria;var R=T.criteria;if(S!==R){if(S>R||S===void 0){return 1}if(S<R||R===void 0){return -1}}return U.index<T.index?-1:1}),"value")};var G=function(O,N,Q,S){var P={};var R=r(N||D.identity);d(O,function(V,T){var U=R.call(Q,V,T,O);S(P,U,V)});return P};D.groupBy=function(O,N,P){return G(O,N,P,function(Q,R,S){(D.has(Q,R)?Q[R]:(Q[R]=[])).push(S)})};D.countBy=function(O,N,P){return G(O,N,P,function(Q,R){if(!D.has(Q,R)){Q[R]=0}Q[R]++})};D.sortedIndex=function(U,T,Q,P){Q=Q==null?D.identity:r(Q);var S=Q.call(P,T);var N=0,R=U.length;while(N<R){var O=(N+R)>>>1;Q.call(P,U[O])<S?N=O+1:R=O}return N};D.toArray=function(N){if(!N){return[]}if(D.isArray(N)){return x.call(N)}if(N.length===+N.length){return D.map(N,D.identity)}return D.values(N)};D.size=function(N){if(N==null){return 0}return(N.length===+N.length)?N.length:D.keys(N).length};D.first=D.head=D.take=function(O,N,P){if(O==null){return void 0}return(N!=null)&&!P?x.call(O,0,N):O[0]};D.initial=function(O,N,P){return x.call(O,0,O.length-((N==null)||P?1:N))};D.last=function(O,N,P){if(O==null){return void 0}if((N!=null)&&!P){return x.call(O,Math.max(O.length-N,0))}else{return O[O.length-1]}};D.rest=D.tail=D.drop=function(O,N,P){return x.call(O,(N==null)||P?1:N)};D.compact=function(N){return D.filter(N,D.identity)};var g=function(N,O,P){d(N,function(Q){if(D.isArray(Q)){O?M.apply(P,Q):g(Q,O,P)}else{P.push(Q)}});return P};D.flatten=function(O,N){return g(O,N,[])};D.without=function(N){return D.difference(N,x.call(arguments,1))};D.uniq=D.unique=function(N,T,S,R){if(D.isFunction(T)){R=S;S=T;T=false}var P=S?D.map(N,S,R):N;var Q=[];var O=[];d(P,function(V,U){if(T?(!U||O[O.length-1]!==V):!D.contains(O,V)){O.push(V);Q.push(N[U])}});return Q};D.union=function(){return D.uniq(k.apply(C,arguments))};D.intersection=function(O){var N=x.call(arguments,1);return D.filter(D.uniq(O),function(P){return D.every(N,function(Q){return D.indexOf(Q,P)>=0})})};D.difference=function(O){var N=k.apply(C,x.call(arguments,1));return D.filter(O,function(P){return !D.contains(N,P)})};D.zip=function(){var N=x.call(arguments);var Q=D.max(D.pluck(N,"length"));var P=new Array(Q);for(var O=0;O<Q;O++){P[O]=D.pluck(N,""+O)}return P};D.object=function(P,N){if(P==null){return{}}var Q={};for(var O=0,R=P.length;O<R;O++){if(N){Q[P[O]]=N[O]}else{Q[P[O][0]]=P[O][1]}}return Q};D.indexOf=function(P,N,O){if(P==null){return -1}var R=0,Q=P.length;if(O){if(typeof O=="number"){R=(O<0?Math.max(0,Q+O):O)}else{R=D.sortedIndex(P,N);return P[R]===N?R:-1}}if(H&&P.indexOf===H){return P.indexOf(N,O)}for(;R<Q;R++){if(P[R]===N){return R}}return -1};D.lastIndexOf=function(P,N,O){if(P==null){return -1}var Q=O!=null;if(B&&P.lastIndexOf===B){return Q?P.lastIndexOf(N,O):P.lastIndexOf(N)}var R=(Q?O:P.length);while(R--){if(P[R]===N){return R}}return -1};D.range=function(O,S,N){if(arguments.length<=1){S=O||0;O=0}N=arguments[2]||1;var Q=Math.max(Math.ceil((S-O)/N),0);var P=0;var R=new Array(Q);while(P<Q){R[P++]=O;O+=N}return R};var t=function(){};D.bind=function(Q,O){var N,P;if(Q.bind===m&&m){return m.apply(Q,x.call(arguments,1))}if(!D.isFunction(Q)){throw new TypeError}N=x.call(arguments,2);return P=function(){if(!(this instanceof P)){return Q.apply(O,N.concat(x.call(arguments)))}t.prototype=Q.prototype;var S=new t;t.prototype=null;var R=Q.apply(S,N.concat(x.call(arguments)));if(Object(R)===R){return R}return S}};D.bindAll=function(O){var N=x.call(arguments,1);if(N.length==0){N=D.functions(O)}d(N,function(P){O[P]=D.bind(O[P],O)});return O};D.memoize=function(O,N){var P={};N||(N=D.identity);return function(){var Q=N.apply(this,arguments);return D.has(P,Q)?P[Q]:(P[Q]=O.apply(this,arguments))}};D.delay=function(N,O){var P=x.call(arguments,2);return setTimeout(function(){return N.apply(null,P)},O)};D.defer=function(N){return D.delay.apply(D,[N,1].concat(x.call(arguments,1)))};D.throttle=function(S,U){var Q,P,T,N;var R=0;var O=function(){R=new Date;T=null;N=S.apply(Q,P)};return function(){var V=new Date;var W=U-(V-R);Q=this;P=arguments;if(W<=0){clearTimeout(T);T=null;R=V;N=S.apply(Q,P)}else{if(!T){T=setTimeout(O,W)}}return N}};D.debounce=function(N,P,R){var O,Q;return function(){var V=this,U=arguments;var T=function(){O=null;if(!R){Q=N.apply(V,U)}};var S=R&&!O;clearTimeout(O);O=setTimeout(T,P);if(S){Q=N.apply(V,U)}return Q}};D.once=function(O){var P=false,N;return function(){if(P){return N}P=true;N=O.apply(this,arguments);O=null;return N}};D.wrap=function(N,O){return function(){var P=[N];M.apply(P,arguments);return O.apply(this,P)}};D.compose=function(){var N=arguments;return function(){var O=arguments;for(var P=N.length-1;P>=0;P--){O=[N[P].apply(this,O)]}return O[0]}};D.after=function(O,N){if(O<=0){return N()}return function(){if(--O<1){return N.apply(this,arguments)}}};D.keys=a||function(O){if(O!==Object(O)){throw new TypeError("Invalid object")}var N=[];for(var P in O){if(D.has(O,P)){N[N.length]=P}}return N};D.values=function(O){var P=[];for(var N in O){if(D.has(O,N)){P.push(O[N])}}return P};D.pairs=function(O){var N=[];for(var P in O){if(D.has(O,P)){N.push([P,O[P]])}}return N};D.invert=function(O){var P={};for(var N in O){if(D.has(O,N)){P[O[N]]=N}}return P};D.functions=D.methods=function(O){var N=[];for(var P in O){if(D.isFunction(O[P])){N.push(P)}}return N.sort()};D.extend=function(N){d(x.call(arguments,1),function(O){if(O){for(var P in O){N[P]=O[P]}}});return N};D.pick=function(N){var O={};var P=k.apply(C,x.call(arguments,1));d(P,function(Q){if(Q in N){O[Q]=N[Q]}});return O};D.omit=function(P){var Q={};var O=k.apply(C,x.call(arguments,1));for(var N in P){if(!D.contains(O,N)){Q[N]=P[N]}}return Q};D.defaults=function(N){d(x.call(arguments,1),function(O){if(O){for(var P in O){if(N[P]==null){N[P]=O[P]}}}});return N};D.clone=function(N){if(!D.isObject(N)){return N}return D.isArray(N)?N.slice():D.extend({},N)};D.tap=function(O,N){N(O);return O};var l=function(U,T,O,P){if(U===T){return U!==0||1/U==1/T}if(U==null||T==null){return U===T}if(U instanceof D){U=U._wrapped}if(T instanceof D){T=T._wrapped}var R=E.call(U);if(R!=E.call(T)){return false}switch(R){case"[object String]":return U==String(T);case"[object Number]":return U!=+U?T!=+T:(U==0?1/U==1/T:U==+T);case"[object Date]":case"[object Boolean]":return +U==+T;case"[object RegExp]":return U.source==T.source&&U.global==T.global&&U.multiline==T.multiline&&U.ignoreCase==T.ignoreCase}if(typeof U!="object"||typeof T!="object"){return false}var N=O.length;while(N--){if(O[N]==U){return P[N]==T}}O.push(U);P.push(T);var W=0,X=true;if(R=="[object Array]"){W=U.length;X=W==T.length;if(X){while(W--){if(!(X=l(U[W],T[W],O,P))){break}}}}else{var S=U.constructor,Q=T.constructor;if(S!==Q&&!(D.isFunction(S)&&(S instanceof S)&&D.isFunction(Q)&&(Q instanceof Q))){return false}for(var V in U){if(D.has(U,V)){W++;if(!(X=D.has(T,V)&&l(U[V],T[V],O,P))){break}}}if(X){for(V in T){if(D.has(T,V)&&!(W--)){break}}X=!W}}O.pop();P.pop();return X};D.isEqual=function(O,N){return l(O,N,[],[])};D.isEmpty=function(O){if(O==null){return true}if(D.isArray(O)||D.isString(O)){return O.length===0}for(var N in O){if(D.has(O,N)){return false}}return true};D.isElement=function(N){return !!(N&&N.nodeType===1)};D.isArray=K||function(N){return E.call(N)=="[object Array]"};D.isObject=function(N){return N===Object(N)};d(["Arguments","Function","String","Number","Date","RegExp"],function(N){D["is"+N]=function(O){return E.call(O)=="[object "+N+"]"}});if(!D.isArguments(arguments)){D.isArguments=function(N){return !!(N&&D.has(N,"callee"))}}if(typeof(/./)!=="function"){D.isFunction=function(N){return typeof N==="function"}}D.isFinite=function(N){return isFinite(N)&&!isNaN(parseFloat(N))};D.isNaN=function(N){return D.isNumber(N)&&N!=+N};D.isBoolean=function(N){return N===true||N===false||E.call(N)=="[object Boolean]"};D.isNull=function(N){return N===null};D.isUndefined=function(N){return N===void 0};D.has=function(O,N){return q.call(O,N)};D.noConflict=function(){c._=y;return this};D.identity=function(N){return N};D.times=function(P,O,N){var Q=Array(P);for(var R=0;R<P;R++){Q[R]=O.call(N,R)}return Q};D.random=function(O,N){if(N==null){N=O;O=0}return O+(0|Math.random()*(N-O+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=D.invert(F.escape);var v={escape:new RegExp("["+D.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+D.keys(F.unescape).join("|")+")","g")};D.each(["escape","unescape"],function(N){D[N]=function(O){if(O==null){return""}return(""+O).replace(v[N],function(P){return F[N][P]})}});D.result=function(P,O){if(P==null){return null}var N=P[O];return D.isFunction(N)?N.call(P):N};D.mixin=function(N){d(D.functions(N),function(O){var P=D[O]=N[O];D.prototype[O]=function(){var Q=[this._wrapped];M.apply(Q,arguments);return z.call(this,P.apply(D,Q))}})};var o=0;D.uniqueId=function(N){var O=""+ ++o;return N?N+O:O};D.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/;var u={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var f=/\\|'|\r|\n|\t|\u2028|\u2029/g;D.template=function(V,Q,P){P=D.defaults({},P,D.templateSettings);var R=new RegExp([(P.escape||L).source,(P.interpolate||L).source,(P.evaluate||L).source].join("|")+"|$","g");var S=0;var N="__p+='";V.replace(R,function(X,aa,Z,W,Y){N+=V.slice(S,Y).replace(f,function(ab){return"\\"+u[ab]});if(aa){N+="'+\n((__t=("+aa+"))==null?'':_.escape(__t))+\n'"}if(Z){N+="'+\n((__t=("+Z+"))==null?'':__t)+\n'"}if(W){N+="';\n"+W+"\n__p+='"}S=Y+X.length;return X});N+="';\n";if(!P.variable){N="with(obj||{}){\n"+N+"}\n"}N="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+N+"return __p;\n";try{var O=new Function(P.variable||"obj","_",N)}catch(T){T.source=N;throw T}if(Q){return O(Q,D)}var U=function(W){return O.call(this,W,D)};U.source="function("+(P.variable||"obj")+"){\n"+N+"}";return U};D.chain=function(N){return D(N).chain()};var z=function(N){return this._chain?D(N).chain():N};D.mixin(D);d(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var O=C[N];D.prototype[N]=function(){var P=this._wrapped;O.apply(P,arguments);if((N=="shift"||N=="splice")&&P.length===0){delete P[0]}return z.call(this,P)}});d(["concat","join","slice"],function(N){var O=C[N];D.prototype[N]=function(){return z.call(this,O.apply(this._wrapped,arguments))}});D.extend(D.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var L=true;function v(a){if(L){console.log(a)}}var M,B,F;var E=[];var C=10;function H(a,b){a.removeClass("loading");if(b){a.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(a){a.preventDefault();var c=$(this);c.removeClass("selected").addClass("selected");var b=c.closest(".account-selector");b.find("li:not(.selected)").slideUp("fast");b.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){u(true)},1)};$("#authorize-button").click(function(a){a.preventDefault();u(false)});function u(a){H($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:a},D)}function D(a){if(a){$("#authorize-button").hide();gapi.client.load("analytics","v3",x)}else{H($("#authorization"),false);$("#authorize-button").show()}}function x(){H($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(G)}$("#log-out").click(function(a){a.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){w();u(true)},1)})});function w(){}function z(c,e,b,a){var d;if(!c.code){e.empty();if(c&&c.items&&c.items.length){var f=_.sortBy(c.items,"created").reverse();_.each(f,function(g){d=$("<li />");d.attr("rel",g.id);d.text(g.name);d.one("click",a);e.append(d)})}else{d=$("<li />");d.text("No "+b+" found.");e.append(d)}}else{v(c.message);d=$("<li />");d.text("Could not get "+b+".");e.append(d)}e.show()}function G(a){H($("#authorization"),false);H($("#accounts"),false);$("#username").html(a.username).show();$("#log-out").show();z(a,$("#accounts"),"accounts",function(){H($("#web-properties"),true);M=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:M}).execute(J)})}function J(a){H($("#web-properties"),false);z(a,$("#web-properties"),"web properties",function(){H($("#profiles"),true);B=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:M,webPropertyId:B}).execute(y)})}function y(a){H($("#profiles"),false);z(a,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();F=$(this).attr("rel");var c=A(new Date());var b=new Date();b.setMonth(b.getMonth()-1);b=A(b);gapi.client.analytics.data.ga.get({ids:"ga:"+F,"start-date":b,"end-date":c,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":C}).execute(N)})}function N(b){if(!b.code){if(b&&b.rows&&b.rows.length){var a=_.map(b.rows,function(c){var e=c[0];var d=c[1];if(d.indexOf(e)!==-1){return d}else{return e+d}});_.each(a,function(c){E.push({url:c})});gapi.client.load("pagespeedonline","v1",I)}}}function I(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(E,function(a,b){var c="http://"+a.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:c}).execute(function(d){K(b,d)})})}function K(g,a){if(a.code){E.splice(g,1);v("Error "+a.code+" - "+a.message)}else{E[g].pageSpeedScore=a.score;E[g].url=a.id}var b=_.countBy(E,function(j){return _.has(j,"pageSpeedScore")});if(_.has(b,"false")){$("#progress-bar").css("width",b["true"]/(E.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(E.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var i=0;var c=0;var e=0;_.each(E,function(j,k){i=E.length-k;c+=i;e+=j.pageSpeedScore*i});var d=Math.round(e/c);var h=$("#score");h.html(d);h.css("color","hsl("+parseInt((d/100)*120,10)+", 60%, 40%)");h.parent().show();var f=$("#details tbody").empty();_.each(E,function(j){var k=decodeURIComponent(j.url);f.append($('<tr><td><a href="'+k+'" target="_blank">'+k+"</a></td><td>"+j.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(j){j.preventDefault();$("#details").slideToggle("fast");var k=$(this);if(k.hasClass("expanded")){k.html("Show details →").removeClass("expanded")}else{k.html("Hide details ←").addClass("expanded")}}).show()}}function A(a){function b(c){return c<10?"0"+c:c}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())}}());(function(){var Y=this;var an=Y._;var ad={};var aj=Array.prototype,V=Object.prototype,ao=Function.prototype;var aA=aj.push,N=aj.slice,U=aj.concat,ah=V.toString,ar=V.hasOwnProperty;var al=aj.forEach,at=aj.map,X=aj.reduce,aq=aj.reduceRight,az=aj.filter,av=aj.every,aw=aj.some,ae=aj.indexOf,ak=aj.lastIndexOf,ab=Array.isArray,Z=Object.keys,T=ao.bind;var ai=function(a){if(a instanceof ai){return a}if(!(this instanceof ai)){return new ai(a)}this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=ai}exports._=ai}else{Y._=ai}ai.VERSION="1.4.3";var ay=ai.each=ai.forEach=function(a,b,c){if(a==null){return}if(al&&a.forEach===al){a.forEach(b,c)}else{if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++){if(b.call(c,a[d],d,a)===ad){return}}}else{for(var e in a){if(ai.has(a,e)){if(b.call(c,a[e],e,a)===ad){return}}}}}};ai.map=ai.collect=function(c,d,a){var b=[];if(c==null){return b}if(at&&c.map===at){return c.map(d,a)}ay(c,function(e,g,f){b[b.length]=d.call(a,e,g,f)});return b};var R="Reduce of empty array with no initial value";ai.reduce=ai.foldl=ai.inject=function(e,a,d,b){var c=arguments.length>2;if(e==null){e=[]}if(X&&e.reduce===X){if(b){a=ai.bind(a,b)}return c?e.reduce(a,d):e.reduce(a)}ay(e,function(f,h,g){if(!c){d=f;c=true}else{d=a.call(b,d,f,h,g)}});if(!c){throw new TypeError(R)}return d};ai.reduceRight=ai.foldr=function(b,e,a,f){var g=arguments.length>2;if(b==null){b=[]}if(aq&&b.reduceRight===aq){if(f){e=ai.bind(e,f)}return g?b.reduceRight(e,a):b.reduceRight(e)}var c=b.length;if(c!==+c){var d=ai.keys(b);c=d.length}ay(b,function(h,j,i){j=d?d[--c]:--c;if(!g){a=b[j];g=true}else{a=e.call(f,a,b[j],j,i)}});if(!g){throw new TypeError(R)}return a};ai.find=ai.detect=function(c,d,a){var b;ac(c,function(e,g,f){if(d.call(a,e,g,f)){b=e;return true}});return b};ai.filter=ai.select=function(c,d,a){var b=[];if(c==null){return b}if(az&&c.filter===az){return c.filter(d,a)}ay(c,function(e,g,f){if(d.call(a,e,g,f)){b[b.length]=e}});return b};ai.reject=function(a,b,c){return ai.filter(a,function(d,f,e){return !b.call(c,d,f,e)},c)};ai.every=ai.all=function(c,d,a){d||(d=ai.identity);var b=true;if(c==null){return b}if(av&&c.every===av){return c.every(d,a)}ay(c,function(e,g,f){if(!(b=b&&d.call(a,e,g,f))){return ad}});return !!b};var ac=ai.some=ai.any=function(c,d,a){d||(d=ai.identity);var b=false;if(c==null){return b}if(aw&&c.some===aw){return c.some(d,a)}ay(c,function(e,g,f){if(b||(b=d.call(a,e,g,f))){return ad}});return !!b};ai.contains=ai.include=function(a,b){if(a==null){return false}if(ae&&a.indexOf===ae){return a.indexOf(b)!=-1}return ac(a,function(c){return c===b})};ai.invoke=function(b,a){var c=N.call(arguments,2);return ai.map(b,function(d){return(ai.isFunction(a)?a:d[a]).apply(d,c)})};ai.pluck=function(a,b){return ai.map(a,function(c){return c[b]})};ai.where=function(a,b){if(ai.isEmpty(b)){return[]}return ai.filter(a,function(c){for(var d in b){if(b[d]!==c[d]){return false}}return true})};ai.max=function(c,d,a){if(!d&&ai.isArray(c)&&c[0]===+c[0]&&c.length<65535){return Math.max.apply(Math,c)}if(!d&&ai.isEmpty(c)){return -Infinity}var b={computed:-Infinity,value:-Infinity};ay(c,function(e,h,f){var g=d?d.call(a,e,h,f):e;g>=b.computed&&(b={value:e,computed:g})});return b.value};ai.min=function(c,d,a){if(!d&&ai.isArray(c)&&c[0]===+c[0]&&c.length<65535){return Math.min.apply(Math,c)}if(!d&&ai.isEmpty(c)){return Infinity}var b={computed:Infinity,value:Infinity};ay(c,function(e,h,f){var g=d?d.call(a,e,h,f):e;g<b.computed&&(b={value:e,computed:g})});return b.value};ai.shuffle=function(c){var d;var a=0;var b=[];ay(c,function(e){d=ai.random(a++);b[a-1]=b[d];b[d]=e});return b};var Q=function(a){return ai.isFunction(a)?a:function(b){return b[a]}};ai.sortBy=function(c,d,b){var a=Q(d);return ai.pluck(ai.map(c,function(e,g,f){return{value:e,index:g,criteria:a.call(b,e,g,f)}}).sort(function(e,f){var g=e.criteria;var h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(g<h||h===void 0){return -1}}return e.index<f.index?-1:1}),"value")};var af=function(a,b,e,c){var f={};var d=Q(b||ai.identity);ay(a,function(g,i){var h=d.call(e,g,i,a);c(f,h,g)});return f};ai.groupBy=function(a,b,c){return af(a,b,c,function(f,e,d){(ai.has(f,e)?f[e]:(f[e]=[])).push(d)})};ai.countBy=function(a,b,c){return af(a,b,c,function(e,d){if(!ai.has(e,d)){e[d]=0}e[d]++})};ai.sortedIndex=function(c,d,g,h){g=g==null?ai.identity:Q(g);var e=g.call(h,d);var b=0,f=c.length;while(b<f){var a=(b+f)>>>1;g.call(h,c[a])<e?b=a+1:f=a}return b};ai.toArray=function(a){if(!a){return[]}if(ai.isArray(a)){return N.call(a)}if(a.length===+a.length){return ai.map(a,ai.identity)}return ai.values(a)};ai.size=function(a){if(a==null){return 0}return(a.length===+a.length)?a.length:ai.keys(a).length};ai.first=ai.head=ai.take=function(a,b,c){if(a==null){return void 0}return(b!=null)&&!c?N.call(a,0,b):a[0]};ai.initial=function(a,b,c){return N.call(a,0,a.length-((b==null)||c?1:b))};ai.last=function(a,b,c){if(a==null){return void 0}if((b!=null)&&!c){return N.call(a,Math.max(a.length-b,0))}else{return a[a.length-1]}};ai.rest=ai.tail=ai.drop=function(a,b,c){return N.call(a,(b==null)||c?1:b)};ai.compact=function(a){return ai.filter(a,ai.identity)};var W=function(b,a,c){ay(b,function(d){if(ai.isArray(d)){a?aA.apply(c,d):W(d,a,c)}else{c.push(d)}});return c};ai.flatten=function(a,b){return W(a,b,[])};ai.without=function(a){return ai.difference(a,N.call(arguments,1))};ai.uniq=ai.unique=function(b,c,d,e){if(ai.isFunction(c)){e=d;d=c;c=false}var g=d?ai.map(b,d,e):b;var f=[];var a=[];ay(g,function(h,i){if(c?(!i||a[a.length-1]!==h):!ai.contains(a,h)){a.push(h);f.push(b[i])}});return f};ai.union=function(){return ai.uniq(U.apply(aj,arguments))};ai.intersection=function(a){var b=N.call(arguments,1);return ai.filter(ai.uniq(a),function(c){return ai.every(b,function(d){return ai.indexOf(d,c)>=0})})};ai.difference=function(a){var b=U.apply(aj,N.call(arguments,1));return ai.filter(a,function(c){return !ai.contains(b,c)})};ai.zip=function(){var b=N.call(arguments);var c=ai.max(ai.pluck(b,"length"));var d=new Array(c);for(var a=0;a<c;a++){d[a]=ai.pluck(b,""+a)}return d};ai.object=function(e,b){if(e==null){return{}}var d={};for(var a=0,c=e.length;a<c;a++){if(b){d[e[a]]=b[a]}else{d[e[a][0]]=e[a][1]}}return d};ai.indexOf=function(e,b,a){if(e==null){return -1}var c=0,d=e.length;if(a){if(typeof a=="number"){c=(a<0?Math.max(0,d+a):a)}else{c=ai.sortedIndex(e,b);return e[c]===b?c:-1}}if(ae&&e.indexOf===ae){return e.indexOf(b,a)}for(;c<d;c++){if(e[c]===b){return c}}return -1};ai.lastIndexOf=function(e,b,a){if(e==null){return -1}var d=a!=null;if(ak&&e.lastIndexOf===ak){return d?e.lastIndexOf(b,a):e.lastIndexOf(b)}var c=(d?a:e.length);while(c--){if(e[c]===b){return c}}return -1};ai.range=function(a,c,b){if(arguments.length<=1){c=a||0;a=0}b=arguments[2]||1;var e=Math.max(Math.ceil((c-a)/b),0);var f=0;var d=new Array(e);while(f<e){d[f++]=a;a+=b}return d};var P=function(){};ai.bind=function(c,a){var b,d;if(c.bind===T&&T){return T.apply(c,N.call(arguments,1))}if(!ai.isFunction(c)){throw new TypeError}b=N.call(arguments,2);return d=function(){if(!(this instanceof d)){return c.apply(a,b.concat(N.call(arguments)))}P.prototype=c.prototype;var e=new P;P.prototype=null;var f=c.apply(e,b.concat(N.call(arguments)));if(Object(f)===f){return f}return e}};ai.bindAll=function(a){var b=N.call(arguments,1);if(b.length==0){b=ai.functions(a)}ay(b,function(c){a[c]=ai.bind(a[c],a)});return a};ai.memoize=function(a,b){var c={};b||(b=ai.identity);return function(){var d=b.apply(this,arguments);return ai.has(c,d)?c[d]:(c[d]=a.apply(this,arguments))}};ai.delay=function(b,a){var c=N.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},a)};ai.defer=function(a){return ai.delay.apply(ai,[a,1].concat(N.call(arguments,1)))};ai.throttle=function(e,c){var g,h,d,b;var f=0;var a=function(){f=new Date;d=null;b=e.apply(g,h)};return function(){var j=new Date;var i=c-(j-f);g=this;h=arguments;if(i<=0){clearTimeout(d);d=null;f=j;b=e.apply(g,h)}else{if(!d){d=setTimeout(a,i)}}return b}};ai.debounce=function(b,e,c){var a,d;return function(){var f=this,g=arguments;var h=function(){a=null;if(!c){d=b.apply(f,g)}};var i=c&&!a;clearTimeout(a);a=setTimeout(h,e);if(i){d=b.apply(f,g)}return d}};ai.once=function(a){var c=false,b;return function(){if(c){return b}c=true;b=a.apply(this,arguments);a=null;return b}};ai.wrap=function(b,a){return function(){var c=[b];aA.apply(c,arguments);return a.apply(this,c)}};ai.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}};ai.after=function(a,b){if(a<=0){return b()}return function(){if(--a<1){return b.apply(this,arguments)}}};ai.keys=Z||function(a){if(a!==Object(a)){throw new TypeError("Invalid object")}var b=[];for(var c in a){if(ai.has(a,c)){b[b.length]=c}}return b};ai.values=function(a){var c=[];for(var b in a){if(ai.has(a,b)){c.push(a[b])}}return c};ai.pairs=function(a){var b=[];for(var c in a){if(ai.has(a,c)){b.push([c,a[c]])}}return b};ai.invert=function(a){var c={};for(var b in a){if(ai.has(a,b)){c[a[b]]=b}}return c};ai.functions=ai.methods=function(a){var b=[];for(var c in a){if(ai.isFunction(a[c])){b.push(c)}}return b.sort()};ai.extend=function(a){ay(N.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}});return a};ai.pick=function(b){var a={};var c=U.apply(aj,N.call(arguments,1));ay(c,function(d){if(d in b){a[d]=b[d]}});return a};ai.omit=function(d){var c={};var a=U.apply(aj,N.call(arguments,1));for(var b in d){if(!ai.contains(a,b)){c[b]=d[b]}}return c};ai.defaults=function(a){ay(N.call(arguments,1),function(b){if(b){for(var c in b){if(a[c]==null){a[c]=b[c]}}}});return a};ai.clone=function(a){if(!ai.isObject(a)){return a}return ai.isArray(a)?a.slice():ai.extend({},a)};ai.tap=function(a,b){b(a);return a};var au=function(d,e,j,i){if(d===e){return d!==0||1/d==1/e}if(d==null||e==null){return d===e}if(d instanceof ai){d=d._wrapped}if(e instanceof ai){e=e._wrapped}var g=ah.call(d);if(g!=ah.call(e)){return false}switch(g){case"[object String]":return d==String(e);case"[object Number]":return d!=+d?e!=+e:(d==0?1/d==1/e:d==+e);case"[object Date]":case"[object Boolean]":return +d==+e;case"[object RegExp]":return d.source==e.source&&d.global==e.global&&d.multiline==e.multiline&&d.ignoreCase==e.ignoreCase}if(typeof d!="object"||typeof e!="object"){return false}var k=j.length;while(k--){if(j[k]==d){return i[k]==e}}j.push(d);i.push(e);var b=0,a=true;if(g=="[object Array]"){b=d.length;a=b==e.length;if(a){while(b--){if(!(a=au(d[b],e[b],j,i))){break}}}}else{var f=d.constructor,h=e.constructor;if(f!==h&&!(ai.isFunction(f)&&(f instanceof f)&&ai.isFunction(h)&&(h instanceof h))){return false}for(var c in d){if(ai.has(d,c)){b++;if(!(a=ai.has(e,c)&&au(d[c],e[c],j,i))){break}}}if(a){for(c in e){if(ai.has(e,c)&&!(b--)){break}}a=!b}}j.pop();i.pop();return a};ai.isEqual=function(a,b){return au(a,b,[],[])};ai.isEmpty=function(a){if(a==null){return true}if(ai.isArray(a)||ai.isString(a)){return a.length===0}for(var b in a){if(ai.has(a,b)){return false}}return true};ai.isElement=function(a){return !!(a&&a.nodeType===1)};ai.isArray=ab||function(a){return ah.call(a)=="[object Array]"};ai.isObject=function(a){return a===Object(a)};ay(["Arguments","Function","String","Number","Date","RegExp"],function(a){ai["is"+a]=function(b){return ah.call(b)=="[object "+a+"]"}});if(!ai.isArguments(arguments)){ai.isArguments=function(a){return !!(a&&ai.has(a,"callee"))}}if(typeof(/./)!=="function"){ai.isFunction=function(a){return typeof a==="function"}}ai.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};ai.isNaN=function(a){return ai.isNumber(a)&&a!=+a};ai.isBoolean=function(a){return a===true||a===false||ah.call(a)=="[object Boolean]"};ai.isNull=function(a){return a===null};ai.isUndefined=function(a){return a===void 0};ai.has=function(a,b){return ar.call(a,b)};ai.noConflict=function(){Y._=an;return this};ai.identity=function(a){return a};ai.times=function(e,a,b){var d=Array(e);for(var c=0;c<e;c++){d[c]=a.call(b,c)}return d};ai.random=function(a,b){if(b==null){b=a;a=0}return a+(0|Math.random()*(b-a+1))};var ag={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};ag.unescape=ai.invert(ag.escape);var ap={escape:new RegExp("["+ai.keys(ag.escape).join("")+"]","g"),unescape:new RegExp("("+ai.keys(ag.unescape).join("|")+")","g")};ai.each(["escape","unescape"],function(a){ai[a]=function(b){if(b==null){return""}return(""+b).replace(ap[a],function(c){return ag[a][c]})}});ai.result=function(c,a){if(c==null){return null}var b=c[a];return ai.isFunction(b)?b.call(c):b};ai.mixin=function(a){ay(ai.functions(a),function(b){var c=ai[b]=a[b];ai.prototype[b]=function(){var d=[this._wrapped];aA.apply(d,arguments);return am.call(this,c.apply(ai,d))}})};var S=0;ai.uniqueId=function(b){var a=""+ ++S;return b?b+a:a};ai.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var aa=/(.)^/;var O={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var ax=/\\|'|\r|\n|\t|\u2028|\u2029/g;ai.template=function(a,f,g){g=ai.defaults({},g,ai.templateSettings);var e=new RegExp([(g.escape||aa).source,(g.interpolate||aa).source,(g.evaluate||aa).source].join("|")+"|$","g");var d=0;var i="__p+='";a.replace(e,function(l,n,j,m,k){i+=a.slice(d,k).replace(ax,function(o){return"\\"+O[o]});if(n){i+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"}if(j){i+="'+\n((__t=("+j+"))==null?'':__t)+\n'"}if(m){i+="';\n"+m+"\n__p+='"}d=k+l.length;return l});i+="';\n";if(!g.variable){i="with(obj||{}){\n"+i+"}\n"}i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var h=new Function(g.variable||"obj","_",i)}catch(c){c.source=i;throw c}if(f){return h(f,ai)}var b=function(j){return h.call(this,j,ai)};b.source="function("+(g.variable||"obj")+"){\n"+i+"}";return b};ai.chain=function(a){return ai(a).chain()};var am=function(a){return this._chain?ai(a).chain():a};ai.mixin(ai);ay(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=aj[b];ai.prototype[b]=function(){var c=this._wrapped;a.apply(c,arguments);if((b=="shift"||b=="splice")&&c.length===0){delete c[0]}return am.call(this,c)}});ay(["concat","join","slice"],function(b){var a=aj[b];ai.prototype[b]=function(){return am.call(this,a.apply(this._wrapped,arguments))}});ai.extend(ai.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var c=true;function s(u){if(c){console.log(u)}}var b,m,i;var j=[];var l=10;function g(v,u){v.removeClass("loading");if(u){v.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(w){w.preventDefault();var u=$(this);u.removeClass("selected").addClass("selected");var v=u.closest(".account-selector");v.find("li:not(.selected)").slideUp("fast");v.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){t(true)},1)};$("#authorize-button").click(function(u){u.preventDefault();t(false)});function t(u){g($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:u},k)}function k(u){if(u){$("#authorize-button").hide();gapi.client.load("analytics","v3",q)}else{g($("#authorization"),false);$("#authorize-button").show()}}function q(){g($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(h)}$("#log-out").click(function(u){u.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){r();t(true)},1)})});function r(){}function o(v,z,w,x){var u;if(!v.code){z.empty();if(v&&v.items&&v.items.length){var y=_.sortBy(v.items,"created").reverse();_.each(y,function(A){u=$("<li />");u.attr("rel",A.id);u.text(A.name);u.one("click",x);z.append(u)})}else{u=$("<li />");u.text("No "+w+" found.");z.append(u)}}else{s(v.message);u=$("<li />");u.text("Could not get "+w+".");z.append(u)}z.show()}function h(u){g($("#authorization"),false);g($("#accounts"),false);$("#username").html(u.username).show();$("#log-out").show();o(u,$("#accounts"),"accounts",function(){g($("#web-properties"),true);b=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:b}).execute(e)})}function e(u){g($("#web-properties"),false);o(u,$("#web-properties"),"web properties",function(){g($("#profiles"),true);m=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:b,webPropertyId:m}).execute(p)})}function p(u){g($("#profiles"),false);o(u,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();i=$(this).attr("rel");var v=n(new Date());var w=new Date();w.setMonth(w.getMonth()-1);w=n(w);gapi.client.analytics.data.ga.get({ids:"ga:"+i,"start-date":w,"end-date":v,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":l}).execute(a)})}function a(u){if(!u.code){if(u&&u.rows&&u.rows.length){var v=_.map(u.rows,function(x){var y=x[0];var w=x[1];if(w.indexOf(y)!==-1){return w}else{return y+w}});_.each(v,function(w){j.push({url:w})});gapi.client.load("pagespeedonline","v1",f)}}}function f(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(j,function(w,v){var u="http://"+w.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:u}).execute(function(x){d(v,x)})})}function d(w,C){if(C.code){j.splice(w,1);s("Error "+C.code+" - "+C.message)}else{j[w].pageSpeedScore=C.score;j[w].url=C.id}var B=_.countBy(j,function(D){return _.has(D,"pageSpeedScore")});if(_.has(B,"false")){$("#progress-bar").css("width",B["true"]/(j.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(j.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var u=0;var A=0;var y=0;_.each(j,function(E,D){u=j.length-D;A+=u;y+=E.pageSpeedScore*u});var z=Math.round(y/A);var v=$("#score");v.html(z);v.css("color","hsl("+parseInt((z/100)*120,10)+", 60%, 40%)");v.parent().show();var x=$("#details tbody").empty();_.each(j,function(E){var D=decodeURIComponent(E.url);x.append($('<tr><td><a href="'+D+'" target="_blank">'+D+"</a></td><td>"+E.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(E){E.preventDefault();$("#details").slideToggle("fast");var D=$(this);if(D.hasClass("expanded")){D.html("Show details →").removeClass("expanded")}else{D.html("Hide details ←").addClass("expanded")}}).show()}}function n(v){function u(w){return w<10?"0"+w:w}return v.getFullYear()+"-"+u(v.getMonth()+1)+"-"+u(v.getDate())}}());(function(){var B=this;var m=B._;var w={};var q=Array.prototype,E=Object.prototype,l=Function.prototype;var a=q.push,M=q.slice,F=q.concat,s=E.toString,i=E.hasOwnProperty;var o=q.forEach,h=q.map,C=q.reduce,j=q.reduceRight,b=q.filter,f=q.every,e=q.some,v=q.indexOf,p=q.lastIndexOf,y=Array.isArray,A=Object.keys,G=l.bind;var r=function(N){if(N instanceof r){return N}if(!(this instanceof r)){return new r(N)}this._wrapped=N};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=r}exports._=r}else{B._=r}r.VERSION="1.4.3";var c=r.each=r.forEach=function(S,R,Q){if(S==null){return}if(o&&S.forEach===o){S.forEach(R,Q)}else{if(S.length===+S.length){for(var P=0,N=S.length;P<N;P++){if(R.call(Q,S[P],P,S)===w){return}}}else{for(var O in S){if(r.has(S,O)){if(R.call(Q,S[O],O,S)===w){return}}}}}};r.map=r.collect=function(O,N,Q){var P=[];if(O==null){return P}if(h&&O.map===h){return O.map(N,Q)}c(O,function(T,R,S){P[P.length]=N.call(Q,T,R,S)});return P};var I="Reduce of empty array with no initial value";r.reduce=r.foldl=r.inject=function(N,R,O,Q){var P=arguments.length>2;if(N==null){N=[]}if(C&&N.reduce===C){if(Q){R=r.bind(R,Q)}return P?N.reduce(R,O):N.reduce(R)}c(N,function(U,S,T){if(!P){O=U;P=true}else{O=R.call(Q,O,U,S,T)}});if(!P){throw new TypeError(I)}return O};r.reduceRight=r.foldr=function(S,P,T,O){var N=arguments.length>2;if(S==null){S=[]}if(j&&S.reduceRight===j){if(O){P=r.bind(P,O)}return N?S.reduceRight(P,T):S.reduceRight(P)}var R=S.length;if(R!==+R){var Q=r.keys(S);R=Q.length}c(S,function(W,U,V){U=Q?Q[--R]:--R;if(!N){T=S[U];N=true}else{T=P.call(O,T,S[U],U,V)}});if(!N){throw new TypeError(I)}return T};r.find=r.detect=function(O,N,Q){var P;x(O,function(T,R,S){if(N.call(Q,T,R,S)){P=T;return true}});return P};r.filter=r.select=function(O,N,Q){var P=[];if(O==null){return P}if(b&&O.filter===b){return O.filter(N,Q)}c(O,function(T,R,S){if(N.call(Q,T,R,S)){P[P.length]=T}});return P};r.reject=function(P,O,N){return r.filter(P,function(S,Q,R){return !O.call(N,S,Q,R)},N)};r.every=r.all=function(O,N,Q){N||(N=r.identity);var P=true;if(O==null){return P}if(f&&O.every===f){return O.every(N,Q)}c(O,function(T,R,S){if(!(P=P&&N.call(Q,T,R,S))){return w}});return !!P};var x=r.some=r.any=function(O,N,Q){N||(N=r.identity);var P=false;if(O==null){return P}if(e&&O.some===e){return O.some(N,Q)}c(O,function(T,R,S){if(P||(P=N.call(Q,T,R,S))){return w}});return !!P};r.contains=r.include=function(O,N){if(O==null){return false}if(v&&O.indexOf===v){return O.indexOf(N)!=-1}return x(O,function(P){return P===N})};r.invoke=function(O,P){var N=M.call(arguments,2);return r.map(O,function(Q){return(r.isFunction(P)?P:Q[P]).apply(Q,N)})};r.pluck=function(O,N){return r.map(O,function(P){return P[N]})};r.where=function(O,N){if(r.isEmpty(N)){return[]}return r.filter(O,function(Q){for(var P in N){if(N[P]!==Q[P]){return false}}return true})};r.max=function(O,N,Q){if(!N&&r.isArray(O)&&O[0]===+O[0]&&O.length<65535){return Math.max.apply(Math,O)}if(!N&&r.isEmpty(O)){return -Infinity}var P={computed:-Infinity,value:-Infinity};c(O,function(U,R,T){var S=N?N.call(Q,U,R,T):U;S>=P.computed&&(P={value:U,computed:S})});return P.value};r.min=function(O,N,Q){if(!N&&r.isArray(O)&&O[0]===+O[0]&&O.length<65535){return Math.min.apply(Math,O)}if(!N&&r.isEmpty(O)){return Infinity}var P={computed:Infinity,value:Infinity};c(O,function(U,R,T){var S=N?N.call(Q,U,R,T):U;S<P.computed&&(P={value:U,computed:S})});return P.value};r.shuffle=function(O){var N;var Q=0;var P=[];c(O,function(R){N=r.random(Q++);P[Q-1]=P[N];P[N]=R});return P};var J=function(N){return r.isFunction(N)?N:function(O){return O[N]}};r.sortBy=function(O,N,P){var Q=J(N);return r.pluck(r.map(O,function(T,R,S){return{value:T,index:R,criteria:Q.call(P,T,R,S)}}).sort(function(U,T){var S=U.criteria;var R=T.criteria;if(S!==R){if(S>R||S===void 0){return 1}if(S<R||R===void 0){return -1}}return U.index<T.index?-1:1}),"value")};var u=function(S,R,O,Q){var N={};var P=J(R||r.identity);c(S,function(V,T){var U=P.call(O,V,T,S);Q(N,U,V)});return N};r.groupBy=function(P,O,N){return u(P,O,N,function(Q,R,S){(r.has(Q,R)?Q[R]:(Q[R]=[])).push(S)})};r.countBy=function(P,O,N){return u(P,O,N,function(Q,R){if(!r.has(Q,R)){Q[R]=0}Q[R]++})};r.sortedIndex=function(S,R,O,N){O=O==null?r.identity:J(O);var Q=O.call(N,R);var T=0,P=S.length;while(T<P){var U=(T+P)>>>1;O.call(N,S[U])<Q?T=U+1:P=U}return T};r.toArray=function(N){if(!N){return[]}if(r.isArray(N)){return M.call(N)}if(N.length===+N.length){return r.map(N,r.identity)}return r.values(N)};r.size=function(N){if(N==null){return 0}return(N.length===+N.length)?N.length:r.keys(N).length};r.first=r.head=r.take=function(P,O,N){if(P==null){return void 0}return(O!=null)&&!N?M.call(P,0,O):P[0]};r.initial=function(P,O,N){return M.call(P,0,P.length-((O==null)||N?1:O))};r.last=function(P,O,N){if(P==null){return void 0}if((O!=null)&&!N){return M.call(P,Math.max(P.length-O,0))}else{return P[P.length-1]}};r.rest=r.tail=r.drop=function(P,O,N){return M.call(P,(O==null)||N?1:O)};r.compact=function(N){return r.filter(N,r.identity)};var D=function(O,P,N){c(O,function(Q){if(r.isArray(Q)){P?a.apply(N,Q):D(Q,P,N)}else{N.push(Q)}});return N};r.flatten=function(O,N){return D(O,N,[])};r.without=function(N){return r.difference(N,M.call(arguments,1))};r.uniq=r.unique=function(S,R,Q,P){if(r.isFunction(R)){P=Q;Q=R;R=false}var N=Q?r.map(S,Q,P):S;var O=[];var T=[];c(N,function(V,U){if(R?(!U||T[T.length-1]!==V):!r.contains(T,V)){T.push(V);O.push(S[U])}});return O};r.union=function(){return r.uniq(F.apply(q,arguments))};r.intersection=function(O){var N=M.call(arguments,1);return r.filter(r.uniq(O),function(P){return r.every(N,function(Q){return r.indexOf(Q,P)>=0})})};r.difference=function(O){var N=F.apply(q,M.call(arguments,1));return r.filter(O,function(P){return !r.contains(N,P)})};r.zip=function(){var P=M.call(arguments);var O=r.max(r.pluck(P,"length"));var N=new Array(O);for(var Q=0;Q<O;Q++){N[Q]=r.pluck(P,""+Q)}return N};r.object=function(N,Q){if(N==null){return{}}var O={};for(var R=0,P=N.length;R<P;R++){if(Q){O[N[R]]=Q[R]}else{O[N[R][0]]=N[R][1]}}return O};r.indexOf=function(N,Q,R){if(N==null){return -1}var P=0,O=N.length;if(R){if(typeof R=="number"){P=(R<0?Math.max(0,O+R):R)}else{P=r.sortedIndex(N,Q);return N[P]===Q?P:-1}}if(v&&N.indexOf===v){return N.indexOf(Q,R)}for(;P<O;P++){if(N[P]===Q){return P}}return -1};r.lastIndexOf=function(N,Q,R){if(N==null){return -1}var O=R!=null;if(p&&N.lastIndexOf===p){return O?N.lastIndexOf(Q,R):N.lastIndexOf(Q)}var P=(O?R:N.length);while(P--){if(N[P]===Q){return P}}return -1};r.range=function(S,Q,R){if(arguments.length<=1){Q=S||0;S=0}R=arguments[2]||1;var O=Math.max(Math.ceil((Q-S)/R),0);var N=0;var P=new Array(O);while(N<O){P[N++]=S;S+=R}return P};var K=function(){};r.bind=function(O,Q){var P,N;if(O.bind===G&&G){return G.apply(O,M.call(arguments,1))}if(!r.isFunction(O)){throw new TypeError}P=M.call(arguments,2);return N=function(){if(!(this instanceof N)){return O.apply(Q,P.concat(M.call(arguments)))}K.prototype=O.prototype;var S=new K;K.prototype=null;var R=O.apply(S,P.concat(M.call(arguments)));if(Object(R)===R){return R}return S}};r.bindAll=function(O){var N=M.call(arguments,1);if(N.length==0){N=r.functions(O)}c(N,function(P){O[P]=r.bind(O[P],O)});return O};r.memoize=function(P,O){var N={};O||(O=r.identity);return function(){var Q=O.apply(this,arguments);return r.has(N,Q)?N[Q]:(N[Q]=P.apply(this,arguments))}};r.delay=function(O,P){var N=M.call(arguments,2);return setTimeout(function(){return O.apply(null,N)},P)};r.defer=function(N){return r.delay.apply(r,[N,1].concat(M.call(arguments,1)))};r.throttle=function(Q,S){var O,N,R,T;var P=0;var U=function(){P=new Date;R=null;T=Q.apply(O,N)};return function(){var V=new Date;var W=S-(V-P);O=this;N=arguments;if(W<=0){clearTimeout(R);R=null;P=V;T=Q.apply(O,N)}else{if(!R){R=setTimeout(U,W)}}return T}};r.debounce=function(Q,N,P){var R,O;return function(){var V=this,U=arguments;var T=function(){R=null;if(!P){O=Q.apply(V,U)}};var S=P&&!R;clearTimeout(R);R=setTimeout(T,N);if(S){O=Q.apply(V,U)}return O}};r.once=function(P){var N=false,O;return function(){if(N){return O}N=true;O=P.apply(this,arguments);P=null;return O}};r.wrap=function(N,O){return function(){var P=[N];a.apply(P,arguments);return O.apply(this,P)}};r.compose=function(){var N=arguments;return function(){var P=arguments;for(var O=N.length-1;O>=0;O--){P=[N[O].apply(this,P)]}return P[0]}};r.after=function(O,N){if(O<=0){return N()}return function(){if(--O<1){return N.apply(this,arguments)}}};r.keys=A||function(P){if(P!==Object(P)){throw new TypeError("Invalid object")}var O=[];for(var N in P){if(r.has(P,N)){O[O.length]=N}}return O};r.values=function(P){var N=[];for(var O in P){if(r.has(P,O)){N.push(P[O])}}return N};r.pairs=function(P){var O=[];for(var N in P){if(r.has(P,N)){O.push([N,P[N]])}}return O};r.invert=function(P){var N={};for(var O in P){if(r.has(P,O)){N[P[O]]=O}}return N};r.functions=r.methods=function(P){var O=[];for(var N in P){if(r.isFunction(P[N])){O.push(N)}}return O.sort()};r.extend=function(N){c(M.call(arguments,1),function(P){if(P){for(var O in P){N[O]=P[O]}}});return N};r.pick=function(O){var P={};var N=F.apply(q,M.call(arguments,1));c(N,function(Q){if(Q in O){P[Q]=O[Q]}});return P};r.omit=function(N){var O={};var Q=F.apply(q,M.call(arguments,1));for(var P in N){if(!r.contains(Q,P)){O[P]=N[P]}}return O};r.defaults=function(N){c(M.call(arguments,1),function(P){if(P){for(var O in P){if(N[O]==null){N[O]=P[O]}}}});return N};r.clone=function(N){if(!r.isObject(N)){return N}return r.isArray(N)?N.slice():r.extend({},N)};r.tap=function(O,N){N(O);return O};var g=function(U,T,O,P){if(U===T){return U!==0||1/U==1/T}if(U==null||T==null){return U===T}if(U instanceof r){U=U._wrapped}if(T instanceof r){T=T._wrapped}var R=s.call(U);if(R!=s.call(T)){return false}switch(R){case"[object String]":return U==String(T);case"[object Number]":return U!=+U?T!=+T:(U==0?1/U==1/T:U==+T);case"[object Date]":case"[object Boolean]":return +U==+T;case"[object RegExp]":return U.source==T.source&&U.global==T.global&&U.multiline==T.multiline&&U.ignoreCase==T.ignoreCase}if(typeof U!="object"||typeof T!="object"){return false}var N=O.length;while(N--){if(O[N]==U){return P[N]==T}}O.push(U);P.push(T);var W=0,X=true;if(R=="[object Array]"){W=U.length;X=W==T.length;if(X){while(W--){if(!(X=g(U[W],T[W],O,P))){break}}}}else{var S=U.constructor,Q=T.constructor;if(S!==Q&&!(r.isFunction(S)&&(S instanceof S)&&r.isFunction(Q)&&(Q instanceof Q))){return false}for(var V in U){if(r.has(U,V)){W++;if(!(X=r.has(T,V)&&g(U[V],T[V],O,P))){break}}}if(X){for(V in T){if(r.has(T,V)&&!(W--)){break}}X=!W}}O.pop();P.pop();return X};r.isEqual=function(O,N){return g(O,N,[],[])};r.isEmpty=function(O){if(O==null){return true}if(r.isArray(O)||r.isString(O)){return O.length===0}for(var N in O){if(r.has(O,N)){return false}}return true};r.isElement=function(N){return !!(N&&N.nodeType===1)};r.isArray=y||function(N){return s.call(N)=="[object Array]"};r.isObject=function(N){return N===Object(N)};c(["Arguments","Function","String","Number","Date","RegExp"],function(N){r["is"+N]=function(O){return s.call(O)=="[object "+N+"]"}});if(!r.isArguments(arguments)){r.isArguments=function(N){return !!(N&&r.has(N,"callee"))}}if(typeof(/./)!=="function"){r.isFunction=function(N){return typeof N==="function"}}r.isFinite=function(N){return isFinite(N)&&!isNaN(parseFloat(N))};r.isNaN=function(N){return r.isNumber(N)&&N!=+N};r.isBoolean=function(N){return N===true||N===false||s.call(N)=="[object Boolean]"};r.isNull=function(N){return N===null};r.isUndefined=function(N){return N===void 0};r.has=function(O,N){return i.call(O,N)};r.noConflict=function(){B._=m;return this};r.identity=function(N){return N};r.times=function(N,R,Q){var O=Array(N);for(var P=0;P<N;P++){O[P]=R.call(Q,P)}return O};r.random=function(O,N){if(N==null){N=O;O=0}return O+(0|Math.random()*(N-O+1))};var t={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};t.unescape=r.invert(t.escape);var k={escape:new RegExp("["+r.keys(t.escape).join("")+"]","g"),unescape:new RegExp("("+r.keys(t.unescape).join("|")+")","g")};r.each(["escape","unescape"],function(N){r[N]=function(O){if(O==null){return""}return(""+O).replace(k[N],function(P){return t[N][P]})}});r.result=function(N,P){if(N==null){return null}var O=N[P];return r.isFunction(O)?O.call(N):O};r.mixin=function(N){c(r.functions(N),function(P){var O=r[P]=N[P];r.prototype[P]=function(){var Q=[this._wrapped];a.apply(Q,arguments);return n.call(this,O.apply(r,Q))}})};var H=0;r.uniqueId=function(N){var O=""+ ++H;return N?N+O:O};r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/;var L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var d=/\\|'|\r|\n|\t|\u2028|\u2029/g;r.template=function(V,Q,P){P=r.defaults({},P,r.templateSettings);var R=new RegExp([(P.escape||z).source,(P.interpolate||z).source,(P.evaluate||z).source].join("|")+"|$","g");var S=0;var N="__p+='";V.replace(R,function(aa,X,W,Y,Z){N+=V.slice(S,Z).replace(d,function(ab){return"\\"+L[ab]});if(X){N+="'+\n((__t=("+X+"))==null?'':_.escape(__t))+\n'"}if(W){N+="'+\n((__t=("+W+"))==null?'':__t)+\n'"}if(Y){N+="';\n"+Y+"\n__p+='"}S=Z+aa.length;return aa});N+="';\n";if(!P.variable){N="with(obj||{}){\n"+N+"}\n"}N="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+N+"return __p;\n";try{var O=new Function(P.variable||"obj","_",N)}catch(T){T.source=N;throw T}if(Q){return O(Q,r)}var U=function(W){return O.call(this,W,r)};U.source="function("+(P.variable||"obj")+"){\n"+N+"}";return U};r.chain=function(N){return r(N).chain()};var n=function(N){return this._chain?r(N).chain():N};r.mixin(r);c(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var O=q[N];r.prototype[N]=function(){var P=this._wrapped;O.apply(P,arguments);if((N=="shift"||N=="splice")&&P.length===0){delete P[0]}return n.call(this,P)}});c(["concat","join","slice"],function(N){var O=q[N];r.prototype[N]=function(){return n.call(this,O.apply(this._wrapped,arguments))}});r.extend(r.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var L=true;function B(a){if(L){console.log(a)}}var M,v,x;var H=[];var G=10;function J(a,b){a.removeClass("loading");if(b){a.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(c){c.preventDefault();var b=$(this);b.removeClass("selected").addClass("selected");var a=b.closest(".account-selector");a.find("li:not(.selected)").slideUp("fast");a.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){A(true)},1)};$("#authorize-button").click(function(a){a.preventDefault();A(false)});function A(a){J($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:a},w)}function w(a){if(a){$("#authorize-button").hide();gapi.client.load("analytics","v3",D)}else{J($("#authorization"),false);$("#authorize-button").show()}}function D(){J($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(I)}$("#log-out").click(function(a){a.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){C();A(true)},1)})});function C(){}function F(a,c,f,e){var b;if(!a.code){c.empty();if(a&&a.items&&a.items.length){var d=_.sortBy(a.items,"created").reverse();_.each(d,function(g){b=$("<li />");b.attr("rel",g.id);b.text(g.name);b.one("click",e);c.append(b)})}else{b=$("<li />");b.text("No "+f+" found.");c.append(b)}}else{B(a.message);b=$("<li />");b.text("Could not get "+f+".");c.append(b)}c.show()}function I(a){J($("#authorization"),false);J($("#accounts"),false);$("#username").html(a.username).show();$("#log-out").show();F(a,$("#accounts"),"accounts",function(){J($("#web-properties"),true);M=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:M}).execute(z)})}function z(a){J($("#web-properties"),false);F(a,$("#web-properties"),"web properties",function(){J($("#profiles"),true);v=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:M,webPropertyId:v}).execute(E)})}function E(a){J($("#profiles"),false);F(a,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();x=$(this).attr("rel");var b=u(new Date());var c=new Date();c.setMonth(c.getMonth()-1);c=u(c);gapi.client.analytics.data.ga.get({ids:"ga:"+x,"start-date":c,"end-date":b,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":G}).execute(N)})}function N(b){if(!b.code){if(b&&b.rows&&b.rows.length){var a=_.map(b.rows,function(d){var c=d[0];var e=d[1];if(e.indexOf(c)!==-1){return e}else{return c+e}});_.each(a,function(c){H.push({url:c})});gapi.client.load("pagespeedonline","v1",y)}}}function y(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(H,function(c,a){var b="http://"+c.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:b}).execute(function(d){K(a,d)})})}function K(g,a){if(a.code){H.splice(g,1);B("Error "+a.code+" - "+a.message)}else{H[g].pageSpeedScore=a.score;H[g].url=a.id}var b=_.countBy(H,function(j){return _.has(j,"pageSpeedScore")});if(_.has(b,"false")){$("#progress-bar").css("width",b["true"]/(H.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(H.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var i=0;var c=0;var e=0;_.each(H,function(j,k){i=H.length-k;c+=i;e+=j.pageSpeedScore*i});var d=Math.round(e/c);var h=$("#score");h.html(d);h.css("color","hsl("+parseInt((d/100)*120,10)+", 60%, 40%)");h.parent().show();var f=$("#details tbody").empty();_.each(H,function(j){var k=decodeURIComponent(j.url);f.append($('<tr><td><a href="'+k+'" target="_blank">'+k+"</a></td><td>"+j.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(j){j.preventDefault();$("#details").slideToggle("fast");var k=$(this);if(k.hasClass("expanded")){k.html("Show details →").removeClass("expanded")}else{k.html("Hide details ←").addClass("expanded")}}).show()}}function u(a){function b(c){return c<10?"0"+c:c}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())}}());(function(){var ak=this;var T=ak._;var ao={};var ar=Array.prototype,ah=Object.prototype,au=Function.prototype;var Z=ar.push,aA=ar.slice,ag=ar.concat,aq=ah.toString,V=ah.hasOwnProperty;var S=ar.forEach,aw=ar.map,aj=ar.reduce,av=ar.reduceRight,az=ar.filter,ax=ar.every,ay=ar.some,O=ar.indexOf,R=ar.lastIndexOf,an=Array.isArray,al=Object.keys,af=au.bind;var Q=function(a){if(a instanceof Q){return a}if(!(this instanceof Q)){return new Q(a)}this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=Q}exports._=Q}else{ak._=Q}Q.VERSION="1.4.3";var Y=Q.each=Q.forEach=function(c,d,e){if(c==null){return}if(S&&c.forEach===S){c.forEach(d,e)}else{if(c.length===+c.length){for(var f=0,b=c.length;f<b;f++){if(d.call(e,c[f],f,c)===ao){return}}}else{for(var a in c){if(Q.has(c,a)){if(d.call(e,c[a],a,c)===ao){return}}}}}};Q.map=Q.collect=function(a,b,c){var d=[];if(a==null){return d}if(aw&&a.map===aw){return a.map(b,c)}Y(a,function(e,g,f){d[d.length]=b.call(c,e,g,f)});return d};var ad="Reduce of empty array with no initial value";Q.reduce=Q.foldl=Q.inject=function(b,c,a,d){var e=arguments.length>2;if(b==null){b=[]}if(aj&&b.reduce===aj){if(d){c=Q.bind(c,d)}return e?b.reduce(c,a):b.reduce(c)}Y(b,function(f,h,g){if(!e){a=f;e=true}else{a=c.call(d,a,f,h,g)}});if(!e){throw new TypeError(ad)}return a};Q.reduceRight=Q.foldr=function(d,g,c,a){var b=arguments.length>2;if(d==null){d=[]}if(av&&d.reduceRight===av){if(a){g=Q.bind(g,a)}return b?d.reduceRight(g,c):d.reduceRight(g)}var e=d.length;if(e!==+e){var f=Q.keys(d);e=f.length}Y(d,function(h,j,i){j=f?f[--e]:--e;if(!b){c=d[j];b=true}else{c=g.call(a,c,d[j],j,i)}});if(!b){throw new TypeError(ad)}return c};Q.find=Q.detect=function(a,b,c){var d;N(a,function(e,g,f){if(b.call(c,e,g,f)){d=e;return true}});return d};Q.filter=Q.select=function(a,b,c){var d=[];if(a==null){return d}if(az&&a.filter===az){return a.filter(b,c)}Y(a,function(e,g,f){if(b.call(c,e,g,f)){d[d.length]=e}});return d};Q.reject=function(c,a,b){return Q.filter(c,function(d,f,e){return !a.call(b,d,f,e)},b)};Q.every=Q.all=function(a,b,c){b||(b=Q.identity);var d=true;if(a==null){return d}if(ax&&a.every===ax){return a.every(b,c)}Y(a,function(e,g,f){if(!(d=d&&b.call(c,e,g,f))){return ao}});return !!d};var N=Q.some=Q.any=function(a,b,c){b||(b=Q.identity);var d=false;if(a==null){return d}if(ay&&a.some===ay){return a.some(b,c)}Y(a,function(e,g,f){if(d||(d=b.call(c,e,g,f))){return ao}});return !!d};Q.contains=Q.include=function(a,b){if(a==null){return false}if(O&&a.indexOf===O){return a.indexOf(b)!=-1}return N(a,function(c){return c===b})};Q.invoke=function(a,c){var b=aA.call(arguments,2);return Q.map(a,function(d){return(Q.isFunction(c)?c:d[c]).apply(d,b)})};Q.pluck=function(a,b){return Q.map(a,function(c){return c[b]})};Q.where=function(a,b){if(Q.isEmpty(b)){return[]}return Q.filter(a,function(c){for(var d in b){if(b[d]!==c[d]){return false}}return true})};Q.max=function(a,b,c){if(!b&&Q.isArray(a)&&a[0]===+a[0]&&a.length<65535){return Math.max.apply(Math,a)}if(!b&&Q.isEmpty(a)){return -Infinity}var d={computed:-Infinity,value:-Infinity};Y(a,function(e,h,f){var g=b?b.call(c,e,h,f):e;g>=d.computed&&(d={value:e,computed:g})});return d.value};Q.min=function(a,b,c){if(!b&&Q.isArray(a)&&a[0]===+a[0]&&a.length<65535){return Math.min.apply(Math,a)}if(!b&&Q.isEmpty(a)){return Infinity}var d={computed:Infinity,value:Infinity};Y(a,function(e,h,f){var g=b?b.call(c,e,h,f):e;g<d.computed&&(d={value:e,computed:g})});return d.value};Q.shuffle=function(a){var b;var c=0;var d=[];Y(a,function(e){b=Q.random(c++);d[c-1]=d[b];d[b]=e});return d};var ac=function(a){return Q.isFunction(a)?a:function(b){return b[a]}};Q.sortBy=function(a,b,d){var c=ac(b);return Q.pluck(Q.map(a,function(e,g,f){return{value:e,index:g,criteria:c.call(d,e,g,f)}}).sort(function(e,f){var g=e.criteria;var h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(g<h||h===void 0){return -1}}return e.index<f.index?-1:1}),"value")};var ap=function(c,d,a,e){var b={};var f=ac(d||Q.identity);Y(c,function(g,i){var h=f.call(a,g,i,c);e(b,h,g)});return b};Q.groupBy=function(c,a,b){return ap(c,a,b,function(f,e,d){(Q.has(f,e)?f[e]:(f[e]=[])).push(d)})};Q.countBy=function(c,a,b){return ap(c,a,b,function(e,d){if(!Q.has(e,d)){e[d]=0}e[d]++})};Q.sortedIndex=function(e,f,a,b){a=a==null?Q.identity:ac(a);var g=a.call(b,f);var d=0,h=e.length;while(d<h){var c=(d+h)>>>1;a.call(b,e[c])<g?d=c+1:h=c}return d};Q.toArray=function(a){if(!a){return[]}if(Q.isArray(a)){return aA.call(a)}if(a.length===+a.length){return Q.map(a,Q.identity)}return Q.values(a)};Q.size=function(a){if(a==null){return 0}return(a.length===+a.length)?a.length:Q.keys(a).length};Q.first=Q.head=Q.take=function(c,a,b){if(c==null){return void 0}return(a!=null)&&!b?aA.call(c,0,a):c[0]};Q.initial=function(c,a,b){return aA.call(c,0,c.length-((a==null)||b?1:a))};Q.last=function(c,a,b){if(c==null){return void 0}if((a!=null)&&!b){return aA.call(c,Math.max(c.length-a,0))}else{return c[c.length-1]}};Q.rest=Q.tail=Q.drop=function(c,a,b){return aA.call(c,(a==null)||b?1:a)};Q.compact=function(a){return Q.filter(a,Q.identity)};var ai=function(a,c,b){Y(a,function(d){if(Q.isArray(d)){c?Z.apply(b,d):ai(d,c,b)}else{b.push(d)}});return b};Q.flatten=function(a,b){return ai(a,b,[])};Q.without=function(a){return Q.difference(a,aA.call(arguments,1))};Q.uniq=Q.unique=function(d,e,f,g){if(Q.isFunction(e)){g=f;f=e;e=false}var b=f?Q.map(d,f,g):d;var a=[];var c=[];Y(b,function(h,i){if(e?(!i||c[c.length-1]!==h):!Q.contains(c,h)){c.push(h);a.push(d[i])}});return a};Q.union=function(){return Q.uniq(ag.apply(ar,arguments))};Q.intersection=function(a){var b=aA.call(arguments,1);return Q.filter(Q.uniq(a),function(c){return Q.every(b,function(d){return Q.indexOf(d,c)>=0})})};Q.difference=function(a){var b=ag.apply(ar,aA.call(arguments,1));return Q.filter(a,function(c){return !Q.contains(b,c)})};Q.zip=function(){var d=aA.call(arguments);var a=Q.max(Q.pluck(d,"length"));var b=new Array(a);for(var c=0;c<a;c++){b[c]=Q.pluck(d,""+c)}return b};Q.object=function(b,d){if(b==null){return{}}var a={};for(var c=0,e=b.length;c<e;c++){if(d){a[b[c]]=d[c]}else{a[b[c][0]]=b[c][1]}}return a};Q.indexOf=function(b,d,c){if(b==null){return -1}var e=0,a=b.length;if(c){if(typeof c=="number"){e=(c<0?Math.max(0,a+c):c)}else{e=Q.sortedIndex(b,d);return b[e]===d?e:-1}}if(O&&b.indexOf===O){return b.indexOf(d,c)}for(;e<a;e++){if(b[e]===d){return e}}return -1};Q.lastIndexOf=function(b,d,c){if(b==null){return -1}var a=c!=null;if(R&&b.lastIndexOf===R){return a?b.lastIndexOf(d,c):b.lastIndexOf(d)}var e=(a?c:b.length);while(e--){if(b[e]===d){return e}}return -1};Q.range=function(c,e,d){if(arguments.length<=1){e=c||0;c=0}d=arguments[2]||1;var a=Math.max(Math.ceil((e-c)/d),0);var b=0;var f=new Array(a);while(b<a){f[b++]=c;c+=d}return f};var ab=function(){};Q.bind=function(a,c){var d,b;if(a.bind===af&&af){return af.apply(a,aA.call(arguments,1))}if(!Q.isFunction(a)){throw new TypeError}d=aA.call(arguments,2);return b=function(){if(!(this instanceof b)){return a.apply(c,d.concat(aA.call(arguments)))}ab.prototype=a.prototype;var e=new ab;ab.prototype=null;var f=a.apply(e,d.concat(aA.call(arguments)));if(Object(f)===f){return f}return e}};Q.bindAll=function(a){var b=aA.call(arguments,1);if(b.length==0){b=Q.functions(a)}Y(b,function(c){a[c]=Q.bind(a[c],a)});return a};Q.memoize=function(c,a){var b={};a||(a=Q.identity);return function(){var d=a.apply(this,arguments);return Q.has(b,d)?b[d]:(b[d]=c.apply(this,arguments))}};Q.delay=function(a,c){var b=aA.call(arguments,2);return setTimeout(function(){return a.apply(null,b)},c)};Q.defer=function(a){return Q.delay.apply(Q,[a,1].concat(aA.call(arguments,1)))};Q.throttle=function(g,e){var a,b,f,d;var h=0;var c=function(){h=new Date;f=null;d=g.apply(a,b)};return function(){var j=new Date;var i=e-(j-h);a=this;b=arguments;if(i<=0){clearTimeout(f);f=null;h=j;d=g.apply(a,b)}else{if(!f){f=setTimeout(c,i)}}return d}};Q.debounce=function(d,b,e){var c,a;return function(){var f=this,g=arguments;var h=function(){c=null;if(!e){a=d.apply(f,g)}};var i=e&&!c;clearTimeout(c);c=setTimeout(h,b);if(i){a=d.apply(f,g)}return a}};Q.once=function(c){var b=false,a;return function(){if(b){return a}b=true;a=c.apply(this,arguments);c=null;return a}};Q.wrap=function(b,a){return function(){var c=[b];Z.apply(c,arguments);return a.apply(this,c)}};Q.compose=function(){var a=arguments;return function(){var c=arguments;for(var b=a.length-1;b>=0;b--){c=[a[b].apply(this,c)]}return c[0]}};Q.after=function(a,b){if(a<=0){return b()}return function(){if(--a<1){return b.apply(this,arguments)}}};Q.keys=al||function(c){if(c!==Object(c)){throw new TypeError("Invalid object")}var a=[];for(var b in c){if(Q.has(c,b)){a[a.length]=b}}return a};Q.values=function(c){var b=[];for(var a in c){if(Q.has(c,a)){b.push(c[a])}}return b};Q.pairs=function(c){var a=[];for(var b in c){if(Q.has(c,b)){a.push([b,c[b]])}}return a};Q.invert=function(c){var b={};for(var a in c){if(Q.has(c,a)){b[c[a]]=a}}return b};Q.functions=Q.methods=function(c){var a=[];for(var b in c){if(Q.isFunction(c[b])){a.push(b)}}return a.sort()};Q.extend=function(a){Y(aA.call(arguments,1),function(c){if(c){for(var b in c){a[b]=c[b]}}});return a};Q.pick=function(a){var c={};var b=ag.apply(ar,aA.call(arguments,1));Y(b,function(d){if(d in a){c[d]=a[d]}});return c};Q.omit=function(b){var a={};var c=ag.apply(ar,aA.call(arguments,1));for(var d in b){if(!Q.contains(c,d)){a[d]=b[d]}}return a};Q.defaults=function(a){Y(aA.call(arguments,1),function(c){if(c){for(var b in c){if(a[b]==null){a[b]=c[b]}}}});return a};Q.clone=function(a){if(!Q.isObject(a)){return a}return Q.isArray(a)?a.slice():Q.extend({},a)};Q.tap=function(a,b){b(a);return a};var W=function(d,e,j,i){if(d===e){return d!==0||1/d==1/e}if(d==null||e==null){return d===e}if(d instanceof Q){d=d._wrapped}if(e instanceof Q){e=e._wrapped}var g=aq.call(d);if(g!=aq.call(e)){return false}switch(g){case"[object String]":return d==String(e);case"[object Number]":return d!=+d?e!=+e:(d==0?1/d==1/e:d==+e);case"[object Date]":case"[object Boolean]":return +d==+e;case"[object RegExp]":return d.source==e.source&&d.global==e.global&&d.multiline==e.multiline&&d.ignoreCase==e.ignoreCase}if(typeof d!="object"||typeof e!="object"){return false}var k=j.length;while(k--){if(j[k]==d){return i[k]==e}}j.push(d);i.push(e);var b=0,a=true;if(g=="[object Array]"){b=d.length;a=b==e.length;if(a){while(b--){if(!(a=W(d[b],e[b],j,i))){break}}}}else{var f=d.constructor,h=e.constructor;if(f!==h&&!(Q.isFunction(f)&&(f instanceof f)&&Q.isFunction(h)&&(h instanceof h))){return false}for(var c in d){if(Q.has(d,c)){b++;if(!(a=Q.has(e,c)&&W(d[c],e[c],j,i))){break}}}if(a){for(c in e){if(Q.has(e,c)&&!(b--)){break}}a=!b}}j.pop();i.pop();return a};Q.isEqual=function(a,b){return W(a,b,[],[])};Q.isEmpty=function(a){if(a==null){return true}if(Q.isArray(a)||Q.isString(a)){return a.length===0}for(var b in a){if(Q.has(a,b)){return false}}return true};Q.isElement=function(a){return !!(a&&a.nodeType===1)};Q.isArray=an||function(a){return aq.call(a)=="[object Array]"};Q.isObject=function(a){return a===Object(a)};Y(["Arguments","Function","String","Number","Date","RegExp"],function(a){Q["is"+a]=function(b){return aq.call(b)=="[object "+a+"]"}});if(!Q.isArguments(arguments)){Q.isArguments=function(a){return !!(a&&Q.has(a,"callee"))}}if(typeof(/./)!=="function"){Q.isFunction=function(a){return typeof a==="function"}}Q.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};Q.isNaN=function(a){return Q.isNumber(a)&&a!=+a};Q.isBoolean=function(a){return a===true||a===false||aq.call(a)=="[object Boolean]"};Q.isNull=function(a){return a===null};Q.isUndefined=function(a){return a===void 0};Q.has=function(a,b){return V.call(a,b)};Q.noConflict=function(){ak._=T;return this};Q.identity=function(a){return a};Q.times=function(b,c,d){var a=Array(b);for(var e=0;e<b;e++){a[e]=c.call(d,e)}return a};Q.random=function(a,b){if(b==null){b=a;a=0}return a+(0|Math.random()*(b-a+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=Q.invert(P.escape);var U={escape:new RegExp("["+Q.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+Q.keys(P.unescape).join("|")+")","g")};Q.each(["escape","unescape"],function(a){Q[a]=function(b){if(b==null){return""}return(""+b).replace(U[a],function(c){return P[a][c]})}});Q.result=function(b,c){if(b==null){return null}var a=b[c];return Q.isFunction(a)?a.call(b):a};Q.mixin=function(a){Y(Q.functions(a),function(c){var b=Q[c]=a[c];Q.prototype[c]=function(){var d=[this._wrapped];Z.apply(d,arguments);return at.call(this,b.apply(Q,d))}})};var ae=0;Q.uniqueId=function(b){var a=""+ ++ae;return b?b+a:a};Q.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var am=/(.)^/;var aa={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var X=/\\|'|\r|\n|\t|\u2028|\u2029/g;Q.template=function(a,f,g){g=Q.defaults({},g,Q.templateSettings);var e=new RegExp([(g.escape||am).source,(g.interpolate||am).source,(g.evaluate||am).source].join("|")+"|$","g");var d=0;var i="__p+='";a.replace(e,function(n,l,m,k,j){i+=a.slice(d,j).replace(X,function(o){return"\\"+aa[o]});if(l){i+="'+\n((__t=("+l+"))==null?'':_.escape(__t))+\n'"}if(m){i+="'+\n((__t=("+m+"))==null?'':__t)+\n'"}if(k){i+="';\n"+k+"\n__p+='"}d=j+n.length;return n});i+="';\n";if(!g.variable){i="with(obj||{}){\n"+i+"}\n"}i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var h=new Function(g.variable||"obj","_",i)}catch(c){c.source=i;throw c}if(f){return h(f,Q)}var b=function(j){return h.call(this,j,Q)};b.source="function("+(g.variable||"obj")+"){\n"+i+"}";return b};Q.chain=function(a){return Q(a).chain()};var at=function(a){return this._chain?Q(a).chain():a};Q.mixin(Q);Y(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=ar[b];Q.prototype[b]=function(){var c=this._wrapped;a.apply(c,arguments);if((b=="shift"||b=="splice")&&c.length===0){delete c[0]}return at.call(this,c)}});Y(["concat","join","slice"],function(b){var a=ar[b];Q.prototype[b]=function(){return at.call(this,a.apply(this._wrapped,arguments))}});Q.extend(Q.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var c=true;function m(u){if(c){console.log(u)}}var b,s,q;var g=[];var h=10;function e(v,u){v.removeClass("loading");if(u){v.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(u){u.preventDefault();var v=$(this);v.removeClass("selected").addClass("selected");var w=v.closest(".account-selector");w.find("li:not(.selected)").slideUp("fast");w.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){n(true)},1)};$("#authorize-button").click(function(u){u.preventDefault();n(false)});function n(u){e($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:u},r)}function r(u){if(u){$("#authorize-button").hide();gapi.client.load("analytics","v3",k)}else{e($("#authorization"),false);$("#authorize-button").show()}}function k(){e($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(f)}$("#log-out").click(function(u){u.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){l();n(true)},1)})});function l(){}function i(x,v,y,z){var w;if(!x.code){v.empty();if(x&&x.items&&x.items.length){var u=_.sortBy(x.items,"created").reverse();_.each(u,function(A){w=$("<li />");w.attr("rel",A.id);w.text(A.name);w.one("click",z);v.append(w)})}else{w=$("<li />");w.text("No "+y+" found.");v.append(w)}}else{m(x.message);w=$("<li />");w.text("Could not get "+y+".");v.append(w)}v.show()}function f(u){e($("#authorization"),false);e($("#accounts"),false);$("#username").html(u.username).show();$("#log-out").show();i(u,$("#accounts"),"accounts",function(){e($("#web-properties"),true);b=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:b}).execute(o)})}function o(u){e($("#web-properties"),false);i(u,$("#web-properties"),"web properties",function(){e($("#profiles"),true);s=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:b,webPropertyId:s}).execute(j)})}function j(u){e($("#profiles"),false);i(u,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();q=$(this).attr("rel");var w=t(new Date());var v=new Date();v.setMonth(v.getMonth()-1);v=t(v);gapi.client.analytics.data.ga.get({ids:"ga:"+q,"start-date":v,"end-date":w,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":h}).execute(a)})}function a(u){if(!u.code){if(u&&u.rows&&u.rows.length){var v=_.map(u.rows,function(w){var x=w[0];var y=w[1];if(y.indexOf(x)!==-1){return y}else{return x+y}});_.each(v,function(w){g.push({url:w})});gapi.client.load("pagespeedonline","v1",p)}}}function p(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(g,function(u,w){var v="http://"+u.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:v}).execute(function(x){d(w,x)})})}function d(w,C){if(C.code){g.splice(w,1);m("Error "+C.code+" - "+C.message)}else{g[w].pageSpeedScore=C.score;g[w].url=C.id}var B=_.countBy(g,function(D){return _.has(D,"pageSpeedScore")});if(_.has(B,"false")){$("#progress-bar").css("width",B["true"]/(g.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(g.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var u=0;var A=0;var y=0;_.each(g,function(E,D){u=g.length-D;A+=u;y+=E.pageSpeedScore*u});var z=Math.round(y/A);var v=$("#score");v.html(z);v.css("color","hsl("+parseInt((z/100)*120,10)+", 60%, 40%)");v.parent().show();var x=$("#details tbody").empty();_.each(g,function(E){var D=decodeURIComponent(E.url);x.append($('<tr><td><a href="'+D+'" target="_blank">'+D+"</a></td><td>"+E.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(E){E.preventDefault();$("#details").slideToggle("fast");var D=$(this);if(D.hasClass("expanded")){D.html("Show details →").removeClass("expanded")}else{D.html("Hide details ←").addClass("expanded")}}).show()}}function t(v){function u(w){return w<10?"0"+w:w}return v.getFullYear()+"-"+u(v.getMonth()+1)+"-"+u(v.getDate())}}());(function(){var p=this;var G=p._;var l={};var i=Array.prototype,s=Object.prototype,g=Function.prototype;var A=i.push,a=i.slice,t=i.concat,j=s.toString,E=s.hasOwnProperty;var H=i.forEach,e=i.map,q=i.reduce,f=i.reduceRight,b=i.filter,d=i.every,c=i.some,L=i.indexOf,I=i.lastIndexOf,m=Array.isArray,o=Object.keys,u=g.bind;var J=function(N){if(N instanceof J){return N}if(!(this instanceof J)){return new J(N)}this._wrapped=N};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=J}exports._=J}else{p._=J}J.VERSION="1.4.3";var B=J.each=J.forEach=function(Q,P,O){if(Q==null){return}if(H&&Q.forEach===H){Q.forEach(P,O)}else{if(Q.length===+Q.length){for(var N=0,R=Q.length;N<R;N++){if(P.call(O,Q[N],N,Q)===l){return}}}else{for(var S in Q){if(J.has(Q,S)){if(P.call(O,Q[S],S,Q)===l){return}}}}}};J.map=J.collect=function(Q,P,O){var N=[];if(Q==null){return N}if(e&&Q.map===e){return Q.map(P,O)}B(Q,function(T,R,S){N[N.length]=P.call(O,T,R,S)});return N};var w="Reduce of empty array with no initial value";J.reduce=J.foldl=J.inject=function(Q,P,R,O){var N=arguments.length>2;if(Q==null){Q=[]}if(q&&Q.reduce===q){if(O){P=J.bind(P,O)}return N?Q.reduce(P,R):Q.reduce(P)}B(Q,function(U,S,T){if(!N){R=U;N=true}else{R=P.call(O,R,U,S,T)}});if(!N){throw new TypeError(w)}return R};J.reduceRight=J.foldr=function(Q,N,R,T){var S=arguments.length>2;if(Q==null){Q=[]}if(f&&Q.reduceRight===f){if(T){N=J.bind(N,T)}return S?Q.reduceRight(N,R):Q.reduceRight(N)}var P=Q.length;if(P!==+P){var O=J.keys(Q);P=O.length}B(Q,function(W,U,V){U=O?O[--P]:--P;if(!S){R=Q[U];S=true}else{R=N.call(T,R,Q[U],U,V)}});if(!S){throw new TypeError(w)}return R};J.find=J.detect=function(Q,P,O){var N;M(Q,function(T,R,S){if(P.call(O,T,R,S)){N=T;return true}});return N};J.filter=J.select=function(Q,P,O){var N=[];if(Q==null){return N}if(b&&Q.filter===b){return Q.filter(P,O)}B(Q,function(T,R,S){if(P.call(O,T,R,S)){N[N.length]=T}});return N};J.reject=function(N,P,O){return J.filter(N,function(S,Q,R){return !P.call(O,S,Q,R)},O)};J.every=J.all=function(Q,P,O){P||(P=J.identity);var N=true;if(Q==null){return N}if(d&&Q.every===d){return Q.every(P,O)}B(Q,function(T,R,S){if(!(N=N&&P.call(O,T,R,S))){return l}});return !!N};var M=J.some=J.any=function(Q,P,O){P||(P=J.identity);var N=false;if(Q==null){return N}if(c&&Q.some===c){return Q.some(P,O)}B(Q,function(T,R,S){if(N||(N=P.call(O,T,R,S))){return l}});return !!N};J.contains=J.include=function(O,N){if(O==null){return false}if(L&&O.indexOf===L){return O.indexOf(N)!=-1}return M(O,function(P){return P===N})};J.invoke=function(P,N){var O=a.call(arguments,2);return J.map(P,function(Q){return(J.isFunction(N)?N:Q[N]).apply(Q,O)})};J.pluck=function(O,N){return J.map(O,function(P){return P[N]})};J.where=function(O,N){if(J.isEmpty(N)){return[]}return J.filter(O,function(Q){for(var P in N){if(N[P]!==Q[P]){return false}}return true})};J.max=function(Q,P,O){if(!P&&J.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.max.apply(Math,Q)}if(!P&&J.isEmpty(Q)){return -Infinity}var N={computed:-Infinity,value:-Infinity};B(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S>=N.computed&&(N={value:U,computed:S})});return N.value};J.min=function(Q,P,O){if(!P&&J.isArray(Q)&&Q[0]===+Q[0]&&Q.length<65535){return Math.min.apply(Math,Q)}if(!P&&J.isEmpty(Q)){return Infinity}var N={computed:Infinity,value:Infinity};B(Q,function(U,R,T){var S=P?P.call(O,U,R,T):U;S<N.computed&&(N={value:U,computed:S})});return N.value};J.shuffle=function(Q){var P;var O=0;var N=[];B(Q,function(R){P=J.random(O++);N[O-1]=N[P];N[P]=R});return N};var x=function(N){return J.isFunction(N)?N:function(O){return O[N]}};J.sortBy=function(Q,P,N){var O=x(P);return J.pluck(J.map(Q,function(T,R,S){return{value:T,index:R,criteria:O.call(N,T,R,S)}}).sort(function(U,T){var S=U.criteria;var R=T.criteria;if(S!==R){if(S>R||S===void 0){return 1}if(S<R||R===void 0){return -1}}return U.index<T.index?-1:1}),"value")};var k=function(Q,P,S,O){var R={};var N=x(P||J.identity);B(Q,function(V,T){var U=N.call(S,V,T,Q);O(R,U,V)});return R};J.groupBy=function(N,P,O){return k(N,P,O,function(Q,R,S){(J.has(Q,R)?Q[R]:(Q[R]=[])).push(S)})};J.countBy=function(N,P,O){return k(N,P,O,function(Q,R){if(!J.has(Q,R)){Q[R]=0}Q[R]++})};J.sortedIndex=function(Q,P,U,T){U=U==null?J.identity:x(U);var O=U.call(T,P);var R=0,N=Q.length;while(R<N){var S=(R+N)>>>1;U.call(T,Q[S])<O?R=S+1:N=S}return R};J.toArray=function(N){if(!N){return[]}if(J.isArray(N)){return a.call(N)}if(N.length===+N.length){return J.map(N,J.identity)}return J.values(N)};J.size=function(N){if(N==null){return 0}return(N.length===+N.length)?N.length:J.keys(N).length};J.first=J.head=J.take=function(N,P,O){if(N==null){return void 0}return(P!=null)&&!O?a.call(N,0,P):N[0]};J.initial=function(N,P,O){return a.call(N,0,N.length-((P==null)||O?1:P))};J.last=function(N,P,O){if(N==null){return void 0}if((P!=null)&&!O){return a.call(N,Math.max(N.length-P,0))}else{return N[N.length-1]}};J.rest=J.tail=J.drop=function(N,P,O){return a.call(N,(P==null)||O?1:P)};J.compact=function(N){return J.filter(N,J.identity)};var r=function(P,N,O){B(P,function(Q){if(J.isArray(Q)){N?A.apply(O,Q):r(Q,N,O)}else{O.push(Q)}});return O};J.flatten=function(O,N){return r(O,N,[])};J.without=function(N){return J.difference(N,a.call(arguments,1))};J.uniq=J.unique=function(Q,P,O,N){if(J.isFunction(P)){N=O;O=P;P=false}var S=O?J.map(Q,O,N):Q;var T=[];var R=[];B(S,function(V,U){if(P?(!U||R[R.length-1]!==V):!J.contains(R,V)){R.push(V);T.push(Q[U])}});return T};J.union=function(){return J.uniq(t.apply(i,arguments))};J.intersection=function(O){var N=a.call(arguments,1);return J.filter(J.uniq(O),function(P){return J.every(N,function(Q){return J.indexOf(Q,P)>=0})})};J.difference=function(O){var N=t.apply(i,a.call(arguments,1));return J.filter(O,function(P){return !J.contains(N,P)})};J.zip=function(){var N=a.call(arguments);var Q=J.max(J.pluck(N,"length"));var P=new Array(Q);for(var O=0;O<Q;O++){P[O]=J.pluck(N,""+O)}return P};J.object=function(Q,O){if(Q==null){return{}}var R={};for(var P=0,N=Q.length;P<N;P++){if(O){R[Q[P]]=O[P]}else{R[Q[P][0]]=Q[P][1]}}return R};J.indexOf=function(Q,O,P){if(Q==null){return -1}var N=0,R=Q.length;if(P){if(typeof P=="number"){N=(P<0?Math.max(0,R+P):P)}else{N=J.sortedIndex(Q,O);return Q[N]===O?N:-1}}if(L&&Q.indexOf===L){return Q.indexOf(O,P)}for(;N<R;N++){if(Q[N]===O){return N}}return -1};J.lastIndexOf=function(Q,O,P){if(Q==null){return -1}var R=P!=null;if(I&&Q.lastIndexOf===I){return R?Q.lastIndexOf(O,P):Q.lastIndexOf(O)}var N=(R?P:Q.length);while(N--){if(Q[N]===O){return N}}return -1};J.range=function(Q,O,P){if(arguments.length<=1){O=Q||0;Q=0}P=arguments[2]||1;var S=Math.max(Math.ceil((O-Q)/P),0);var R=0;var N=new Array(S);while(R<S){N[R++]=Q;Q+=P}return N};var y=function(){};J.bind=function(Q,O){var N,P;if(Q.bind===u&&u){return u.apply(Q,a.call(arguments,1))}if(!J.isFunction(Q)){throw new TypeError}N=a.call(arguments,2);return P=function(){if(!(this instanceof P)){return Q.apply(O,N.concat(a.call(arguments)))}y.prototype=Q.prototype;var S=new y;y.prototype=null;var R=Q.apply(S,N.concat(a.call(arguments)));if(Object(R)===R){return R}return S}};J.bindAll=function(O){var N=a.call(arguments,1);if(N.length==0){N=J.functions(O)}B(N,function(P){O[P]=J.bind(O[P],O)});return O};J.memoize=function(N,P){var O={};P||(P=J.identity);return function(){var Q=P.apply(this,arguments);return J.has(O,Q)?O[Q]:(O[Q]=N.apply(this,arguments))}};J.delay=function(P,N){var O=a.call(arguments,2);return setTimeout(function(){return P.apply(null,O)},N)};J.defer=function(N){return J.delay.apply(J,[N,1].concat(a.call(arguments,1)))};J.throttle=function(O,Q){var U,T,P,R;var N=0;var S=function(){N=new Date;P=null;R=O.apply(U,T)};return function(){var V=new Date;var W=Q-(V-N);U=this;T=arguments;if(W<=0){clearTimeout(P);P=null;N=V;R=O.apply(U,T)}else{if(!P){P=setTimeout(S,W)}}return R}};J.debounce=function(O,Q,N){var P,R;return function(){var V=this,U=arguments;var T=function(){P=null;if(!N){R=O.apply(V,U)}};var S=N&&!P;clearTimeout(P);P=setTimeout(T,Q);if(S){R=O.apply(V,U)}return R}};J.once=function(N){var O=false,P;return function(){if(O){return P}O=true;P=N.apply(this,arguments);N=null;return P}};J.wrap=function(N,O){return function(){var P=[N];A.apply(P,arguments);return O.apply(this,P)}};J.compose=function(){var N=arguments;return function(){var O=arguments;for(var P=N.length-1;P>=0;P--){O=[N[P].apply(this,O)]}return O[0]}};J.after=function(O,N){if(O<=0){return N()}return function(){if(--O<1){return N.apply(this,arguments)}}};J.keys=o||function(N){if(N!==Object(N)){throw new TypeError("Invalid object")}var P=[];for(var O in N){if(J.has(N,O)){P[P.length]=O}}return P};J.values=function(N){var O=[];for(var P in N){if(J.has(N,P)){O.push(N[P])}}return O};J.pairs=function(N){var P=[];for(var O in N){if(J.has(N,O)){P.push([O,N[O]])}}return P};J.invert=function(N){var O={};for(var P in N){if(J.has(N,P)){O[N[P]]=P}}return O};J.functions=J.methods=function(N){var P=[];for(var O in N){if(J.isFunction(N[O])){P.push(O)}}return P.sort()};J.extend=function(N){B(a.call(arguments,1),function(O){if(O){for(var P in O){N[P]=O[P]}}});return N};J.pick=function(P){var N={};var O=t.apply(i,a.call(arguments,1));B(O,function(Q){if(Q in P){N[Q]=P[Q]}});return N};J.omit=function(P){var Q={};var O=t.apply(i,a.call(arguments,1));for(var N in P){if(!J.contains(O,N)){Q[N]=P[N]}}return Q};J.defaults=function(N){B(a.call(arguments,1),function(O){if(O){for(var P in O){if(N[P]==null){N[P]=O[P]}}}});return N};J.clone=function(N){if(!J.isObject(N)){return N}return J.isArray(N)?N.slice():J.extend({},N)};J.tap=function(O,N){N(O);return O};var D=function(U,T,O,P){if(U===T){return U!==0||1/U==1/T}if(U==null||T==null){return U===T}if(U instanceof J){U=U._wrapped}if(T instanceof J){T=T._wrapped}var R=j.call(U);if(R!=j.call(T)){return false}switch(R){case"[object String]":return U==String(T);case"[object Number]":return U!=+U?T!=+T:(U==0?1/U==1/T:U==+T);case"[object Date]":case"[object Boolean]":return +U==+T;case"[object RegExp]":return U.source==T.source&&U.global==T.global&&U.multiline==T.multiline&&U.ignoreCase==T.ignoreCase}if(typeof U!="object"||typeof T!="object"){return false}var N=O.length;while(N--){if(O[N]==U){return P[N]==T}}O.push(U);P.push(T);var W=0,X=true;if(R=="[object Array]"){W=U.length;X=W==T.length;if(X){while(W--){if(!(X=D(U[W],T[W],O,P))){break}}}}else{var S=U.constructor,Q=T.constructor;if(S!==Q&&!(J.isFunction(S)&&(S instanceof S)&&J.isFunction(Q)&&(Q instanceof Q))){return false}for(var V in U){if(J.has(U,V)){W++;if(!(X=J.has(T,V)&&D(U[V],T[V],O,P))){break}}}if(X){for(V in T){if(J.has(T,V)&&!(W--)){break}}X=!W}}O.pop();P.pop();return X};J.isEqual=function(O,N){return D(O,N,[],[])};J.isEmpty=function(O){if(O==null){return true}if(J.isArray(O)||J.isString(O)){return O.length===0}for(var N in O){if(J.has(O,N)){return false}}return true};J.isElement=function(N){return !!(N&&N.nodeType===1)};J.isArray=m||function(N){return j.call(N)=="[object Array]"};J.isObject=function(N){return N===Object(N)};B(["Arguments","Function","String","Number","Date","RegExp"],function(N){J["is"+N]=function(O){return j.call(O)=="[object "+N+"]"}});if(!J.isArguments(arguments)){J.isArguments=function(N){return !!(N&&J.has(N,"callee"))}}if(typeof(/./)!=="function"){J.isFunction=function(N){return typeof N==="function"}}J.isFinite=function(N){return isFinite(N)&&!isNaN(parseFloat(N))};J.isNaN=function(N){return J.isNumber(N)&&N!=+N};J.isBoolean=function(N){return N===true||N===false||j.call(N)=="[object Boolean]"};J.isNull=function(N){return N===null};J.isUndefined=function(N){return N===void 0};J.has=function(O,N){return E.call(O,N)};J.noConflict=function(){p._=G;return this};J.identity=function(N){return N};J.times=function(Q,P,O){var R=Array(Q);for(var N=0;N<Q;N++){R[N]=P.call(O,N)}return R};J.random=function(O,N){if(N==null){N=O;O=0}return O+(0|Math.random()*(N-O+1))};var K={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};K.unescape=J.invert(K.escape);var F={escape:new RegExp("["+J.keys(K.escape).join("")+"]","g"),unescape:new RegExp("("+J.keys(K.unescape).join("|")+")","g")};J.each(["escape","unescape"],function(N){J[N]=function(O){if(O==null){return""}return(""+O).replace(F[N],function(P){return K[N][P]})}});J.result=function(O,N){if(O==null){return null}var P=O[N];return J.isFunction(P)?P.call(O):P};J.mixin=function(N){B(J.functions(N),function(O){var P=J[O]=N[O];J.prototype[O]=function(){var Q=[this._wrapped];A.apply(Q,arguments);return h.call(this,P.apply(J,Q))}})};var v=0;J.uniqueId=function(N){var O=""+ ++v;return N?N+O:O};J.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var n=/(.)^/;var z={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var C=/\\|'|\r|\n|\t|\u2028|\u2029/g;J.template=function(V,Q,P){P=J.defaults({},P,J.templateSettings);var R=new RegExp([(P.escape||n).source,(P.interpolate||n).source,(P.evaluate||n).source].join("|")+"|$","g");var S=0;var N="__p+='";V.replace(R,function(X,Z,Y,aa,W){N+=V.slice(S,W).replace(C,function(ab){return"\\"+z[ab]});if(Z){N+="'+\n((__t=("+Z+"))==null?'':_.escape(__t))+\n'"}if(Y){N+="'+\n((__t=("+Y+"))==null?'':__t)+\n'"}if(aa){N+="';\n"+aa+"\n__p+='"}S=W+X.length;return X});N+="';\n";if(!P.variable){N="with(obj||{}){\n"+N+"}\n"}N="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+N+"return __p;\n";try{var O=new Function(P.variable||"obj","_",N)}catch(T){T.source=N;throw T}if(Q){return O(Q,J)}var U=function(W){return O.call(this,W,J)};U.source="function("+(P.variable||"obj")+"){\n"+N+"}";return U};J.chain=function(N){return J(N).chain()};var h=function(N){return this._chain?J(N).chain():N};J.mixin(J);B(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var O=i[N];J.prototype[N]=function(){var P=this._wrapped;O.apply(P,arguments);if((N=="shift"||N=="splice")&&P.length===0){delete P[0]}return h.call(this,P)}});B(["concat","join","slice"],function(N){var O=i[N];J.prototype[N]=function(){return h.call(this,O.apply(this._wrapped,arguments))}});J.extend(J.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var L=true;function v(a){if(L){console.log(a)}}var M,B,D;var y=[];var I=10;function z(a,b){a.removeClass("loading");if(b){a.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(b){b.preventDefault();var a=$(this);a.removeClass("selected").addClass("selected");var c=a.closest(".account-selector");c.find("li:not(.selected)").slideUp("fast");c.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){F(true)},1)};$("#authorize-button").click(function(a){a.preventDefault();F(false)});function F(a){z($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:a},C)}function C(a){if(a){$("#authorize-button").hide();gapi.client.load("analytics","v3",w)}else{z($("#authorization"),false);$("#authorize-button").show()}}function w(){z($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(J)}$("#log-out").click(function(a){a.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){G();F(true)},1)})});function G(){}function x(e,a,d,c){var f;if(!e.code){a.empty();if(e&&e.items&&e.items.length){var b=_.sortBy(e.items,"created").reverse();_.each(b,function(g){f=$("<li />");f.attr("rel",g.id);f.text(g.name);f.one("click",c);a.append(f)})}else{f=$("<li />");f.text("No "+d+" found.");a.append(f)}}else{v(e.message);f=$("<li />");f.text("Could not get "+d+".");a.append(f)}a.show()}function J(a){z($("#authorization"),false);z($("#accounts"),false);$("#username").html(a.username).show();$("#log-out").show();x(a,$("#accounts"),"accounts",function(){z($("#web-properties"),true);M=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:M}).execute(u)})}function u(a){z($("#web-properties"),false);x(a,$("#web-properties"),"web properties",function(){z($("#profiles"),true);B=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:M,webPropertyId:B}).execute(H)})}function H(a){z($("#profiles"),false);x(a,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();D=$(this).attr("rel");var c=A(new Date());var b=new Date();b.setMonth(b.getMonth()-1);b=A(b);gapi.client.analytics.data.ga.get({ids:"ga:"+D,"start-date":b,"end-date":c,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":I}).execute(N)})}function N(b){if(!b.code){if(b&&b.rows&&b.rows.length){var a=_.map(b.rows,function(e){var d=e[0];var c=e[1];if(c.indexOf(d)!==-1){return c}else{return d+c}});_.each(a,function(c){y.push({url:c})});gapi.client.load("pagespeedonline","v1",E)}}}function E(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(y,function(b,c){var a="http://"+b.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:a}).execute(function(d){K(c,d)})})}function K(g,a){if(a.code){y.splice(g,1);v("Error "+a.code+" - "+a.message)}else{y[g].pageSpeedScore=a.score;y[g].url=a.id}var b=_.countBy(y,function(j){return _.has(j,"pageSpeedScore")});if(_.has(b,"false")){$("#progress-bar").css("width",b["true"]/(y.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(y.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var i=0;var c=0;var e=0;_.each(y,function(j,k){i=y.length-k;c+=i;e+=j.pageSpeedScore*i});var d=Math.round(e/c);var h=$("#score");h.html(d);h.css("color","hsl("+parseInt((d/100)*120,10)+", 60%, 40%)");h.parent().show();var f=$("#details tbody").empty();_.each(y,function(j){var k=decodeURIComponent(j.url);f.append($('<tr><td><a href="'+k+'" target="_blank">'+k+"</a></td><td>"+j.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(j){j.preventDefault();$("#details").slideToggle("fast");var k=$(this);if(k.hasClass("expanded")){k.html("Show details →").removeClass("expanded")}else{k.html("Hide details ←").addClass("expanded")}}).show()}}function A(a){function b(c){return c<10?"0"+c:c}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())}}());(function(){var R=this;var af=R._;var au={};var aw=Array.prototype,aq=Object.prototype,W=Function.prototype;var al=aw.push,Z=aw.slice,P=aw.concat,av=aq.toString,ah=aq.hasOwnProperty;var ae=aw.forEach,X=aw.map,ar=aw.reduce,ax=aw.reduceRight,az=aw.filter,ay=aw.every,Y=aw.some,aa=aw.indexOf,ad=aw.lastIndexOf,T=Array.isArray,at=Object.keys,ap=W.bind;var ac=function(a){if(a instanceof ac){return a}if(!(this instanceof ac)){return new ac(a)}this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=ac}exports._=ac}else{R._=ac}ac.VERSION="1.4.3";var ak=ac.each=ac.forEach=function(e,f,a){if(e==null){return}if(ae&&e.forEach===ae){e.forEach(f,a)}else{if(e.length===+e.length){for(var b=0,d=e.length;b<d;b++){if(f.call(a,e[b],b,e)===au){return}}}else{for(var c in e){if(ac.has(e,c)){if(f.call(a,e[c],c,e)===au){return}}}}}};ac.map=ac.collect=function(c,d,a){var b=[];if(c==null){return b}if(X&&c.map===X){return c.map(d,a)}ak(c,function(e,g,f){b[b.length]=d.call(a,e,g,f)});return b};var ao="Reduce of empty array with no initial value";ac.reduce=ac.foldl=ac.inject=function(d,e,c,a){var b=arguments.length>2;if(d==null){d=[]}if(ar&&d.reduce===ar){if(a){e=ac.bind(e,a)}return b?d.reduce(e,c):d.reduce(e)}ak(d,function(f,h,g){if(!b){c=f;b=true}else{c=e.call(a,c,f,h,g)}});if(!b){throw new TypeError(ao)}return c};ac.reduceRight=ac.foldr=function(f,b,e,c){var d=arguments.length>2;if(f==null){f=[]}if(ax&&f.reduceRight===ax){if(c){b=ac.bind(b,c)}return d?f.reduceRight(b,e):f.reduceRight(b)}var g=f.length;if(g!==+g){var a=ac.keys(f);g=a.length}ak(f,function(h,j,i){j=a?a[--g]:--g;if(!d){e=f[j];d=true}else{e=b.call(c,e,f[j],j,i)}});if(!d){throw new TypeError(ao)}return e};ac.find=ac.detect=function(c,d,a){var b;aA(c,function(e,g,f){if(d.call(a,e,g,f)){b=e;return true}});return b};ac.filter=ac.select=function(c,d,a){var b=[];if(c==null){return b}if(az&&c.filter===az){return c.filter(d,a)}ak(c,function(e,g,f){if(d.call(a,e,g,f)){b[b.length]=e}});return b};ac.reject=function(b,c,a){return ac.filter(b,function(d,f,e){return !c.call(a,d,f,e)},a)};ac.every=ac.all=function(c,d,a){d||(d=ac.identity);var b=true;if(c==null){return b}if(ay&&c.every===ay){return c.every(d,a)}ak(c,function(e,g,f){if(!(b=b&&d.call(a,e,g,f))){return au}});return !!b};var aA=ac.some=ac.any=function(c,d,a){d||(d=ac.identity);var b=false;if(c==null){return b}if(Y&&c.some===Y){return c.some(d,a)}ak(c,function(e,g,f){if(b||(b=d.call(a,e,g,f))){return au}});return !!b};ac.contains=ac.include=function(a,b){if(a==null){return false}if(aa&&a.indexOf===aa){return a.indexOf(b)!=-1}return aA(a,function(c){return c===b})};ac.invoke=function(c,b){var a=Z.call(arguments,2);return ac.map(c,function(d){return(ac.isFunction(b)?b:d[b]).apply(d,a)})};ac.pluck=function(a,b){return ac.map(a,function(c){return c[b]})};ac.where=function(a,b){if(ac.isEmpty(b)){return[]}return ac.filter(a,function(c){for(var d in b){if(b[d]!==c[d]){return false}}return true})};ac.max=function(c,d,a){if(!d&&ac.isArray(c)&&c[0]===+c[0]&&c.length<65535){return Math.max.apply(Math,c)}if(!d&&ac.isEmpty(c)){return -Infinity}var b={computed:-Infinity,value:-Infinity};ak(c,function(e,h,f){var g=d?d.call(a,e,h,f):e;g>=b.computed&&(b={value:e,computed:g})});return b.value};ac.min=function(c,d,a){if(!d&&ac.isArray(c)&&c[0]===+c[0]&&c.length<65535){return Math.min.apply(Math,c)}if(!d&&ac.isEmpty(c)){return Infinity}var b={computed:Infinity,value:Infinity};ak(c,function(e,h,f){var g=d?d.call(a,e,h,f):e;g<b.computed&&(b={value:e,computed:g})});return b.value};ac.shuffle=function(c){var d;var a=0;var b=[];ak(c,function(e){d=ac.random(a++);b[a-1]=b[d];b[d]=e});return b};var N=function(a){return ac.isFunction(a)?a:function(b){return b[a]}};ac.sortBy=function(c,d,b){var a=N(d);return ac.pluck(ac.map(c,function(e,g,f){return{value:e,index:g,criteria:a.call(b,e,g,f)}}).sort(function(e,f){var g=e.criteria;var h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(g<h||h===void 0){return -1}}return e.index<f.index?-1:1}),"value")};var U=function(e,f,c,a){var d={};var b=N(f||ac.identity);ak(e,function(g,i){var h=b.call(c,g,i,e);a(d,h,g)});return d};ac.groupBy=function(b,c,a){return U(b,c,a,function(f,e,d){(ac.has(f,e)?f[e]:(f[e]=[])).push(d)})};ac.countBy=function(b,c,a){return U(b,c,a,function(e,d){if(!ac.has(e,d)){e[d]=0}e[d]++})};ac.sortedIndex=function(g,h,c,d){c=c==null?ac.identity:N(c);var a=c.call(d,h);var f=0,b=g.length;while(f<b){var e=(f+b)>>>1;c.call(d,g[e])<a?f=e+1:b=e}return f};ac.toArray=function(a){if(!a){return[]}if(ac.isArray(a)){return Z.call(a)}if(a.length===+a.length){return ac.map(a,ac.identity)}return ac.values(a)};ac.size=function(a){if(a==null){return 0}return(a.length===+a.length)?a.length:ac.keys(a).length};ac.first=ac.head=ac.take=function(b,c,a){if(b==null){return void 0}return(c!=null)&&!a?Z.call(b,0,c):b[0]};ac.initial=function(b,c,a){return Z.call(b,0,b.length-((c==null)||a?1:c))};ac.last=function(b,c,a){if(b==null){return void 0}if((c!=null)&&!a){return Z.call(b,Math.max(b.length-c,0))}else{return b[b.length-1]}};ac.rest=ac.tail=ac.drop=function(b,c,a){return Z.call(b,(c==null)||a?1:c)};ac.compact=function(a){return ac.filter(a,ac.identity)};var Q=function(c,b,a){ak(c,function(d){if(ac.isArray(d)){b?al.apply(a,d):Q(d,b,a)}else{a.push(d)}});return a};ac.flatten=function(a,b){return Q(a,b,[])};ac.without=function(a){return ac.difference(a,Z.call(arguments,1))};ac.uniq=ac.unique=function(f,g,a,b){if(ac.isFunction(g)){b=a;a=g;g=false}var d=a?ac.map(f,a,b):f;var c=[];var e=[];ak(d,function(h,i){if(g?(!i||e[e.length-1]!==h):!ac.contains(e,h)){e.push(h);c.push(f[i])}});return c};ac.union=function(){return ac.uniq(P.apply(aw,arguments))};ac.intersection=function(a){var b=Z.call(arguments,1);return ac.filter(ac.uniq(a),function(c){return ac.every(b,function(d){return ac.indexOf(d,c)>=0})})};ac.difference=function(a){var b=P.apply(aw,Z.call(arguments,1));return ac.filter(a,function(c){return !ac.contains(b,c)})};ac.zip=function(){var b=Z.call(arguments);var c=ac.max(ac.pluck(b,"length"));var d=new Array(c);for(var a=0;a<c;a++){d[a]=ac.pluck(b,""+a)}return d};ac.object=function(d,a){if(d==null){return{}}var c={};for(var e=0,b=d.length;e<b;e++){if(a){c[d[e]]=a[e]}else{c[d[e][0]]=d[e][1]}}return c};ac.indexOf=function(d,a,e){if(d==null){return -1}var b=0,c=d.length;if(e){if(typeof e=="number"){b=(e<0?Math.max(0,c+e):e)}else{b=ac.sortedIndex(d,a);return d[b]===a?b:-1}}if(aa&&d.indexOf===aa){return d.indexOf(a,e)}for(;b<c;b++){if(d[b]===a){return b}}return -1};ac.lastIndexOf=function(d,a,e){if(d==null){return -1}var c=e!=null;if(ad&&d.lastIndexOf===ad){return c?d.lastIndexOf(a,e):d.lastIndexOf(a)}var b=(c?e:d.length);while(b--){if(d[b]===a){return b}}return -1};ac.range=function(e,a,f){if(arguments.length<=1){a=e||0;e=0}f=arguments[2]||1;var c=Math.max(Math.ceil((a-e)/f),0);var d=0;var b=new Array(c);while(d<c){b[d++]=e;e+=f}return b};var an=function(){};ac.bind=function(c,a){var b,d;if(c.bind===ap&&ap){return ap.apply(c,Z.call(arguments,1))}if(!ac.isFunction(c)){throw new TypeError}b=Z.call(arguments,2);return d=function(){if(!(this instanceof d)){return c.apply(a,b.concat(Z.call(arguments)))}an.prototype=c.prototype;var e=new an;an.prototype=null;var f=c.apply(e,b.concat(Z.call(arguments)));if(Object(f)===f){return f}return e}};ac.bindAll=function(a){var b=Z.call(arguments,1);if(b.length==0){b=ac.functions(a)}ak(b,function(c){a[c]=ac.bind(a[c],a)});return a};ac.memoize=function(b,c){var a={};c||(c=ac.identity);return function(){var d=c.apply(this,arguments);return ac.has(a,d)?a[d]:(a[d]=b.apply(this,arguments))}};ac.delay=function(c,b){var a=Z.call(arguments,2);return setTimeout(function(){return c.apply(null,a)},b)};ac.defer=function(a){return ac.delay.apply(ac,[a,1].concat(Z.call(arguments,1)))};ac.throttle=function(a,g){var c,d,h,f;var b=0;var e=function(){b=new Date;h=null;f=a.apply(c,d)};return function(){var j=new Date;var i=g-(j-b);c=this;d=arguments;if(i<=0){clearTimeout(h);h=null;b=j;f=a.apply(c,d)}else{if(!h){h=setTimeout(e,i)}}return f}};ac.debounce=function(a,d,b){var e,c;return function(){var f=this,g=arguments;var h=function(){e=null;if(!b){c=a.apply(f,g)}};var i=b&&!e;clearTimeout(e);e=setTimeout(h,d);if(i){c=a.apply(f,g)}return c}};ac.once=function(b){var a=false,c;return function(){if(a){return c}a=true;c=b.apply(this,arguments);b=null;return c}};ac.wrap=function(b,a){return function(){var c=[b];al.apply(c,arguments);return a.apply(this,c)}};ac.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}};ac.after=function(a,b){if(a<=0){return b()}return function(){if(--a<1){return b.apply(this,arguments)}}};ac.keys=at||function(b){if(b!==Object(b)){throw new TypeError("Invalid object")}var c=[];for(var a in b){if(ac.has(b,a)){c[c.length]=a}}return c};ac.values=function(b){var a=[];for(var c in b){if(ac.has(b,c)){a.push(b[c])}}return a};ac.pairs=function(b){var c=[];for(var a in b){if(ac.has(b,a)){c.push([a,b[a]])}}return c};ac.invert=function(b){var a={};for(var c in b){if(ac.has(b,c)){a[b[c]]=c}}return a};ac.functions=ac.methods=function(b){var c=[];for(var a in b){if(ac.isFunction(b[a])){c.push(a)}}return c.sort()};ac.extend=function(a){ak(Z.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}});return a};ac.pick=function(c){var b={};var a=P.apply(aw,Z.call(arguments,1));ak(a,function(d){if(d in c){b[d]=c[d]}});return b};ac.omit=function(d){var c={};var a=P.apply(aw,Z.call(arguments,1));for(var b in d){if(!ac.contains(a,b)){c[b]=d[b]}}return c};ac.defaults=function(a){ak(Z.call(arguments,1),function(b){if(b){for(var c in b){if(a[c]==null){a[c]=b[c]}}}});return a};ac.clone=function(a){if(!ac.isObject(a)){return a}return ac.isArray(a)?a.slice():ac.extend({},a)};ac.tap=function(a,b){b(a);return a};var ai=function(d,e,j,i){if(d===e){return d!==0||1/d==1/e}if(d==null||e==null){return d===e}if(d instanceof ac){d=d._wrapped}if(e instanceof ac){e=e._wrapped}var g=av.call(d);if(g!=av.call(e)){return false}switch(g){case"[object String]":return d==String(e);case"[object Number]":return d!=+d?e!=+e:(d==0?1/d==1/e:d==+e);case"[object Date]":case"[object Boolean]":return +d==+e;case"[object RegExp]":return d.source==e.source&&d.global==e.global&&d.multiline==e.multiline&&d.ignoreCase==e.ignoreCase}if(typeof d!="object"||typeof e!="object"){return false}var k=j.length;while(k--){if(j[k]==d){return i[k]==e}}j.push(d);i.push(e);var b=0,a=true;if(g=="[object Array]"){b=d.length;a=b==e.length;if(a){while(b--){if(!(a=ai(d[b],e[b],j,i))){break}}}}else{var f=d.constructor,h=e.constructor;if(f!==h&&!(ac.isFunction(f)&&(f instanceof f)&&ac.isFunction(h)&&(h instanceof h))){return false}for(var c in d){if(ac.has(d,c)){b++;if(!(a=ac.has(e,c)&&ai(d[c],e[c],j,i))){break}}}if(a){for(c in e){if(ac.has(e,c)&&!(b--)){break}}a=!b}}j.pop();i.pop();return a};ac.isEqual=function(a,b){return ai(a,b,[],[])};ac.isEmpty=function(a){if(a==null){return true}if(ac.isArray(a)||ac.isString(a)){return a.length===0}for(var b in a){if(ac.has(a,b)){return false}}return true};ac.isElement=function(a){return !!(a&&a.nodeType===1)};ac.isArray=T||function(a){return av.call(a)=="[object Array]"};ac.isObject=function(a){return a===Object(a)};ak(["Arguments","Function","String","Number","Date","RegExp"],function(a){ac["is"+a]=function(b){return av.call(b)=="[object "+a+"]"}});if(!ac.isArguments(arguments)){ac.isArguments=function(a){return !!(a&&ac.has(a,"callee"))}}if(typeof(/./)!=="function"){ac.isFunction=function(a){return typeof a==="function"}}ac.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};ac.isNaN=function(a){return ac.isNumber(a)&&a!=+a};ac.isBoolean=function(a){return a===true||a===false||av.call(a)=="[object Boolean]"};ac.isNull=function(a){return a===null};ac.isUndefined=function(a){return a===void 0};ac.has=function(a,b){return ah.call(a,b)};ac.noConflict=function(){R._=af;return this};ac.identity=function(a){return a};ac.times=function(d,e,a){var c=Array(d);for(var b=0;b<d;b++){c[b]=e.call(a,b)}return c};ac.random=function(a,b){if(b==null){b=a;a=0}return a+(0|Math.random()*(b-a+1))};var ab={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};ab.unescape=ac.invert(ab.escape);var ag={escape:new RegExp("["+ac.keys(ab.escape).join("")+"]","g"),unescape:new RegExp("("+ac.keys(ab.unescape).join("|")+")","g")};ac.each(["escape","unescape"],function(a){ac[a]=function(b){if(b==null){return""}return(""+b).replace(ag[a],function(c){return ab[a][c]})}});ac.result=function(a,b){if(a==null){return null}var c=a[b];return ac.isFunction(c)?c.call(a):c};ac.mixin=function(a){ak(ac.functions(a),function(b){var c=ac[b]=a[b];ac.prototype[b]=function(){var d=[this._wrapped];al.apply(d,arguments);return V.call(this,c.apply(ac,d))}})};var O=0;ac.uniqueId=function(b){var a=""+ ++O;return b?b+a:a};ac.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var S=/(.)^/;var am={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var aj=/\\|'|\r|\n|\t|\u2028|\u2029/g;ac.template=function(a,f,g){g=ac.defaults({},g,ac.templateSettings);var e=new RegExp([(g.escape||S).source,(g.interpolate||S).source,(g.evaluate||S).source].join("|")+"|$","g");var d=0;var i="__p+='";a.replace(e,function(l,j,k,n,m){i+=a.slice(d,m).replace(aj,function(o){return"\\"+am[o]});if(j){i+="'+\n((__t=("+j+"))==null?'':_.escape(__t))+\n'"}if(k){i+="'+\n((__t=("+k+"))==null?'':__t)+\n'"}if(n){i+="';\n"+n+"\n__p+='"}d=m+l.length;return l});i+="';\n";if(!g.variable){i="with(obj||{}){\n"+i+"}\n"}i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var h=new Function(g.variable||"obj","_",i)}catch(c){c.source=i;throw c}if(f){return h(f,ac)}var b=function(j){return h.call(this,j,ac)};b.source="function("+(g.variable||"obj")+"){\n"+i+"}";return b};ac.chain=function(a){return ac(a).chain()};var V=function(a){return this._chain?ac(a).chain():a};ac.mixin(ac);ak(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=aw[b];ac.prototype[b]=function(){var c=this._wrapped;a.apply(c,arguments);if((b=="shift"||b=="splice")&&c.length===0){delete c[0]}return V.call(this,c)}});ak(["concat","join","slice"],function(b){var a=aw[b];ac.prototype[b]=function(){return V.call(this,a.apply(this._wrapped,arguments))}});ac.extend(ac.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"}}());(function(){var c=true;function s(u){if(c){console.log(u)}}var b,m,k;var p=[];var f=10;function o(v,u){v.removeClass("loading");if(u){v.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(v){v.preventDefault();var w=$(this);w.removeClass("selected").addClass("selected");var u=w.closest(".account-selector");u.find("li:not(.selected)").slideUp("fast");u.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){i(true)},1)};$("#authorize-button").click(function(u){u.preventDefault();i(false)});function i(u){o($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:u},l)}function l(u){if(u){$("#authorize-button").hide();gapi.client.load("analytics","v3",r)}else{o($("#authorization"),false);$("#authorize-button").show()}}function r(){o($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(e)}$("#log-out").click(function(u){u.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){h();i(true)},1)})});function h(){}function q(z,x,u,v){var y;if(!z.code){x.empty();if(z&&z.items&&z.items.length){var w=_.sortBy(z.items,"created").reverse();_.each(w,function(A){y=$("<li />");y.attr("rel",A.id);y.text(A.name);y.one("click",v);x.append(y)})}else{y=$("<li />");y.text("No "+u+" found.");x.append(y)}}else{s(z.message);y=$("<li />");y.text("Could not get "+u+".");x.append(y)}x.show()}function e(u){o($("#authorization"),false);o($("#accounts"),false);$("#username").html(u.username).show();$("#log-out").show();q(u,$("#accounts"),"accounts",function(){o($("#web-properties"),true);b=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:b}).execute(t)})}function t(u){o($("#web-properties"),false);q(u,$("#web-properties"),"web properties",function(){o($("#profiles"),true);m=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:b,webPropertyId:m}).execute(g)})}function g(u){o($("#profiles"),false);q(u,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();k=$(this).attr("rel");var v=n(new Date());var w=new Date();w.setMonth(w.getMonth()-1);w=n(w);gapi.client.analytics.data.ga.get({ids:"ga:"+k,"start-date":w,"end-date":v,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":f}).execute(a)})}function a(u){if(!u.code){if(u&&u.rows&&u.rows.length){var v=_.map(u.rows,function(y){var w=y[0];var x=y[1];if(x.indexOf(w)!==-1){return x}else{return w+x}});_.each(v,function(w){p.push({url:w})});gapi.client.load("pagespeedonline","v1",j)}}}function j(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(p,function(v,u){var w="http://"+v.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:w}).execute(function(x){d(u,x)})})}function d(w,C){if(C.code){p.splice(w,1);s("Error "+C.code+" - "+C.message)}else{p[w].pageSpeedScore=C.score;p[w].url=C.id}var B=_.countBy(p,function(D){return _.has(D,"pageSpeedScore")});if(_.has(B,"false")){$("#progress-bar").css("width",B["true"]/(p.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(p.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var u=0;var A=0;var y=0;_.each(p,function(E,D){u=p.length-D;A+=u;y+=E.pageSpeedScore*u});var z=Math.round(y/A);var v=$("#score");v.html(z);v.css("color","hsl("+parseInt((z/100)*120,10)+", 60%, 40%)");v.parent().show();var x=$("#details tbody").empty();_.each(p,function(E){var D=decodeURIComponent(E.url);x.append($('<tr><td><a href="'+D+'" target="_blank">'+D+"</a></td><td>"+E.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(E){E.preventDefault();$("#details").slideToggle("fast");var D=$(this);if(D.hasClass("expanded")){D.html("Show details →").removeClass("expanded")}else{D.html("Hide details ←").addClass("expanded")}}).show()}}function n(v){function u(w){return w<10?"0"+w:w}return v.getFullYear()+"-"+u(v.getMonth()+1)+"-"+u(v.getDate())}}());(function(){var I=this;var u=I._;var g={};var e=Array.prototype,j=Object.prototype,D=Function.prototype;var o=e.push,A=e.slice,K=e.concat,f=j.toString,s=j.hasOwnProperty;var v=e.forEach,C=e.map,i=e.reduce,d=e.reduceRight,b=e.filter,c=e.every,B=e.some,z=e.indexOf,w=e.lastIndexOf,G=Array.isArray,h=Object.keys,k=D.bind;var x=function(N){if(N instanceof x){return N}if(!(this instanceof x)){return new x(N)}this._wrapped=N};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=x}exports._=x}else{I._=x}x.VERSION="1.4.3";var p=x.each=x.forEach=function(O,N,S){if(O==null){return}if(v&&O.forEach===v){O.forEach(N,S)}else{if(O.length===+O.length){for(var R=0,P=O.length;R<P;R++){if(N.call(S,O[R],R,O)===g){return}}}else{for(var Q in O){if(x.has(O,Q)){if(N.call(S,O[Q],Q,O)===g){return}}}}}};x.map=x.collect=function(O,N,Q){var P=[];if(O==null){return P}if(C&&O.map===C){return O.map(N,Q)}p(O,function(T,R,S){P[P.length]=N.call(Q,T,R,S)});return P};var l="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(O,N,P,R){var Q=arguments.length>2;if(O==null){O=[]}if(i&&O.reduce===i){if(R){N=x.bind(N,R)}return Q?O.reduce(N,P):O.reduce(N)}p(O,function(U,S,T){if(!Q){P=U;Q=true}else{P=N.call(R,P,U,S,T)}});if(!Q){throw new TypeError(l)}return P};x.reduceRight=x.foldr=function(O,S,P,R){var Q=arguments.length>2;if(O==null){O=[]}if(d&&O.reduceRight===d){if(R){S=x.bind(S,R)}return Q?O.reduceRight(S,P):O.reduceRight(S)}var N=O.length;if(N!==+N){var T=x.keys(O);N=T.length}p(O,function(W,U,V){U=T?T[--N]:--N;if(!Q){P=O[U];Q=true}else{P=S.call(R,P,O[U],U,V)}});if(!Q){throw new TypeError(l)}return P};x.find=x.detect=function(O,N,Q){var P;a(O,function(T,R,S){if(N.call(Q,T,R,S)){P=T;return true}});return P};x.filter=x.select=function(O,N,Q){var P=[];if(O==null){return P}if(b&&O.filter===b){return O.filter(N,Q)}p(O,function(T,R,S){if(N.call(Q,T,R,S)){P[P.length]=T}});return P};x.reject=function(O,N,P){return x.filter(O,function(S,Q,R){return !N.call(P,S,Q,R)},P)};x.every=x.all=function(O,N,Q){N||(N=x.identity);var P=true;if(O==null){return P}if(c&&O.every===c){return O.every(N,Q)}p(O,function(T,R,S){if(!(P=P&&N.call(Q,T,R,S))){return g}});return !!P};var a=x.some=x.any=function(O,N,Q){N||(N=x.identity);var P=false;if(O==null){return P}if(B&&O.some===B){return O.some(N,Q)}p(O,function(T,R,S){if(P||(P=N.call(Q,T,R,S))){return g}});return !!P};x.contains=x.include=function(O,N){if(O==null){return false}if(z&&O.indexOf===z){return O.indexOf(N)!=-1}return a(O,function(P){return P===N})};x.invoke=function(N,O){var P=A.call(arguments,2);return x.map(N,function(Q){return(x.isFunction(O)?O:Q[O]).apply(Q,P)})};x.pluck=function(O,N){return x.map(O,function(P){return P[N]})};x.where=function(O,N){if(x.isEmpty(N)){return[]}return x.filter(O,function(Q){for(var P in N){if(N[P]!==Q[P]){return false}}return true})};x.max=function(O,N,Q){if(!N&&x.isArray(O)&&O[0]===+O[0]&&O.length<65535){return Math.max.apply(Math,O)}if(!N&&x.isEmpty(O)){return -Infinity}var P={computed:-Infinity,value:-Infinity};p(O,function(U,R,T){var S=N?N.call(Q,U,R,T):U;S>=P.computed&&(P={value:U,computed:S})});return P.value};x.min=function(O,N,Q){if(!N&&x.isArray(O)&&O[0]===+O[0]&&O.length<65535){return Math.min.apply(Math,O)}if(!N&&x.isEmpty(O)){return Infinity}var P={computed:Infinity,value:Infinity};p(O,function(U,R,T){var S=N?N.call(Q,U,R,T):U;S<P.computed&&(P={value:U,computed:S})});return P.value};x.shuffle=function(O){var N;var Q=0;var P=[];p(O,function(R){N=x.random(Q++);P[Q-1]=P[N];P[N]=R});return P};var M=function(N){return x.isFunction(N)?N:function(O){return O[N]}};x.sortBy=function(O,N,P){var Q=M(N);return x.pluck(x.map(O,function(T,R,S){return{value:T,index:R,criteria:Q.call(P,T,R,S)}}).sort(function(U,T){var S=U.criteria;var R=T.criteria;if(S!==R){if(S>R||S===void 0){return 1}if(S<R||R===void 0){return -1}}return U.index<T.index?-1:1}),"value")};var F=function(O,N,Q,S){var P={};var R=M(N||x.identity);p(O,function(V,T){var U=R.call(Q,V,T,O);S(P,U,V)});return P};x.groupBy=function(O,N,P){return F(O,N,P,function(Q,R,S){(x.has(Q,R)?Q[R]:(Q[R]=[])).push(S)})};x.countBy=function(O,N,P){return F(O,N,P,function(Q,R){if(!x.has(Q,R)){Q[R]=0}Q[R]++})};x.sortedIndex=function(O,N,S,R){S=S==null?x.identity:M(S);var U=S.call(R,N);var P=0,T=O.length;while(P<T){var Q=(P+T)>>>1;S.call(R,O[Q])<U?P=Q+1:T=Q}return P};x.toArray=function(N){if(!N){return[]}if(x.isArray(N)){return A.call(N)}if(N.length===+N.length){return x.map(N,x.identity)}return x.values(N)};x.size=function(N){if(N==null){return 0}return(N.length===+N.length)?N.length:x.keys(N).length};x.first=x.head=x.take=function(O,N,P){if(O==null){return void 0}return(N!=null)&&!P?A.call(O,0,N):O[0]};x.initial=function(O,N,P){return A.call(O,0,O.length-((N==null)||P?1:N))};x.last=function(O,N,P){if(O==null){return void 0}if((N!=null)&&!P){return A.call(O,Math.max(O.length-N,0))}else{return O[O.length-1]}};x.rest=x.tail=x.drop=function(O,N,P){return A.call(O,(N==null)||P?1:N)};x.compact=function(N){return x.filter(N,x.identity)};var J=function(N,O,P){p(N,function(Q){if(x.isArray(Q)){O?o.apply(P,Q):J(Q,O,P)}else{P.push(Q)}});return P};x.flatten=function(O,N){return J(O,N,[])};x.without=function(N){return x.difference(N,A.call(arguments,1))};x.uniq=x.unique=function(O,N,T,S){if(x.isFunction(N)){S=T;T=N;N=false}var Q=T?x.map(O,T,S):O;var R=[];var P=[];p(Q,function(V,U){if(N?(!U||P[P.length-1]!==V):!x.contains(P,V)){P.push(V);R.push(O[U])}});return R};x.union=function(){return x.uniq(K.apply(e,arguments))};x.intersection=function(O){var N=A.call(arguments,1);return x.filter(x.uniq(O),function(P){return x.every(N,function(Q){return x.indexOf(Q,P)>=0})})};x.difference=function(O){var N=K.apply(e,A.call(arguments,1));return x.filter(O,function(P){return !x.contains(N,P)})};x.zip=function(){var P=A.call(arguments);var O=x.max(x.pluck(P,"length"));var N=new Array(O);for(var Q=0;Q<O;Q++){N[Q]=x.pluck(P,""+Q)}return N};x.object=function(O,R){if(O==null){return{}}var P={};for(var N=0,Q=O.length;N<Q;N++){if(R){P[O[N]]=R[N]}else{P[O[N][0]]=O[N][1]}}return P};x.indexOf=function(O,R,N){if(O==null){return -1}var Q=0,P=O.length;if(N){if(typeof N=="number"){Q=(N<0?Math.max(0,P+N):N)}else{Q=x.sortedIndex(O,R);return O[Q]===R?Q:-1}}if(z&&O.indexOf===z){return O.indexOf(R,N)}for(;Q<P;Q++){if(O[Q]===R){return Q}}return -1};x.lastIndexOf=function(O,R,N){if(O==null){return -1}var P=N!=null;if(w&&O.lastIndexOf===w){return P?O.lastIndexOf(R,N):O.lastIndexOf(R)}var Q=(P?N:O.length);while(Q--){if(O[Q]===R){return Q}}return -1};x.range=function(O,S,N){if(arguments.length<=1){S=O||0;O=0}N=arguments[2]||1;var Q=Math.max(Math.ceil((S-O)/N),0);var P=0;var R=new Array(Q);while(P<Q){R[P++]=O;O+=N}return R};var m=function(){};x.bind=function(O,Q){var P,N;if(O.bind===k&&k){return k.apply(O,A.call(arguments,1))}if(!x.isFunction(O)){throw new TypeError}P=A.call(arguments,2);return N=function(){if(!(this instanceof N)){return O.apply(Q,P.concat(A.call(arguments)))}m.prototype=O.prototype;var S=new m;m.prototype=null;var R=O.apply(S,P.concat(A.call(arguments)));if(Object(R)===R){return R}return S}};x.bindAll=function(O){var N=A.call(arguments,1);if(N.length==0){N=x.functions(O)}p(N,function(P){O[P]=x.bind(O[P],O)});return O};x.memoize=function(O,N){var P={};N||(N=x.identity);return function(){var Q=N.apply(this,arguments);return x.has(P,Q)?P[Q]:(P[Q]=O.apply(this,arguments))}};x.delay=function(N,O){var P=A.call(arguments,2);return setTimeout(function(){return N.apply(null,P)},O)};x.defer=function(N){return x.delay.apply(x,[N,1].concat(A.call(arguments,1)))};x.throttle=function(U,O){var S,R,N,P;var T=0;var Q=function(){T=new Date;N=null;P=U.apply(S,R)};return function(){var V=new Date;var W=O-(V-T);S=this;R=arguments;if(W<=0){clearTimeout(N);N=null;T=V;P=U.apply(S,R)}else{if(!N){N=setTimeout(Q,W)}}return P}};x.debounce=function(R,O,Q){var N,P;return function(){var V=this,U=arguments;var T=function(){N=null;if(!Q){P=R.apply(V,U)}};var S=Q&&!N;clearTimeout(N);N=setTimeout(T,O);if(S){P=R.apply(V,U)}return P}};x.once=function(O){var P=false,N;return function(){if(P){return N}P=true;N=O.apply(this,arguments);O=null;return N}};x.wrap=function(N,O){return function(){var P=[N];o.apply(P,arguments);return O.apply(this,P)}};x.compose=function(){var N=arguments;return function(){var P=arguments;for(var O=N.length-1;O>=0;O--){P=[N[O].apply(this,P)]}return P[0]}};x.after=function(O,N){if(O<=0){return N()}return function(){if(--O<1){return N.apply(this,arguments)}}};x.keys=h||function(O){if(O!==Object(O)){throw new TypeError("Invalid object")}var N=[];for(var P in O){if(x.has(O,P)){N[N.length]=P}}return N};x.values=function(O){var P=[];for(var N in O){if(x.has(O,N)){P.push(O[N])}}return P};x.pairs=function(O){var N=[];for(var P in O){if(x.has(O,P)){N.push([P,O[P]])}}return N};x.invert=function(O){var P={};for(var N in O){if(x.has(O,N)){P[O[N]]=N}}return P};x.functions=x.methods=function(O){var N=[];for(var P in O){if(x.isFunction(O[P])){N.push(P)}}return N.sort()};x.extend=function(N){p(A.call(arguments,1),function(P){if(P){for(var O in P){N[O]=P[O]}}});return N};x.pick=function(N){var O={};var P=K.apply(e,A.call(arguments,1));p(P,function(Q){if(Q in N){O[Q]=N[Q]}});return O};x.omit=function(N){var O={};var Q=K.apply(e,A.call(arguments,1));for(var P in N){if(!x.contains(Q,P)){O[P]=N[P]}}return O};x.defaults=function(N){p(A.call(arguments,1),function(P){if(P){for(var O in P){if(N[O]==null){N[O]=P[O]}}}});return N};x.clone=function(N){if(!x.isObject(N)){return N}return x.isArray(N)?N.slice():x.extend({},N)};x.tap=function(O,N){N(O);return O};var r=function(U,T,O,P){if(U===T){return U!==0||1/U==1/T}if(U==null||T==null){return U===T}if(U instanceof x){U=U._wrapped}if(T instanceof x){T=T._wrapped}var R=f.call(U);if(R!=f.call(T)){return false}switch(R){case"[object String]":return U==String(T);case"[object Number]":return U!=+U?T!=+T:(U==0?1/U==1/T:U==+T);case"[object Date]":case"[object Boolean]":return +U==+T;case"[object RegExp]":return U.source==T.source&&U.global==T.global&&U.multiline==T.multiline&&U.ignoreCase==T.ignoreCase}if(typeof U!="object"||typeof T!="object"){return false}var N=O.length;while(N--){if(O[N]==U){return P[N]==T}}O.push(U);P.push(T);var W=0,X=true;if(R=="[object Array]"){W=U.length;X=W==T.length;if(X){while(W--){if(!(X=r(U[W],T[W],O,P))){break}}}}else{var S=U.constructor,Q=T.constructor;if(S!==Q&&!(x.isFunction(S)&&(S instanceof S)&&x.isFunction(Q)&&(Q instanceof Q))){return false}for(var V in U){if(x.has(U,V)){W++;if(!(X=x.has(T,V)&&r(U[V],T[V],O,P))){break}}}if(X){for(V in T){if(x.has(T,V)&&!(W--)){break}}X=!W}}O.pop();P.pop();return X};x.isEqual=function(O,N){return r(O,N,[],[])};x.isEmpty=function(O){if(O==null){return true}if(x.isArray(O)||x.isString(O)){return O.length===0}for(var N in O){if(x.has(O,N)){return false}}return true};x.isElement=function(N){return !!(N&&N.nodeType===1)};x.isArray=G||function(N){return f.call(N)=="[object Array]"};x.isObject=function(N){return N===Object(N)};p(["Arguments","Function","String","Number","Date","RegExp"],function(N){x["is"+N]=function(O){return f.call(O)=="[object "+N+"]"}});if(!x.isArguments(arguments)){x.isArguments=function(N){return !!(N&&x.has(N,"callee"))}}if(typeof(/./)!=="function"){x.isFunction=function(N){return typeof N==="function"}}x.isFinite=function(N){return isFinite(N)&&!isNaN(parseFloat(N))};x.isNaN=function(N){return x.isNumber(N)&&N!=+N};x.isBoolean=function(N){return N===true||N===false||f.call(N)=="[object Boolean]"};x.isNull=function(N){return N===null};x.isUndefined=function(N){return N===void 0};x.has=function(O,N){return s.call(O,N)};x.noConflict=function(){I._=u;return this};x.identity=function(N){return N};x.times=function(O,N,R){var P=Array(O);for(var Q=0;Q<O;Q++){P[Q]=N.call(R,Q)}return P};x.random=function(O,N){if(N==null){N=O;O=0}return O+(0|Math.random()*(N-O+1))};var y={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};y.unescape=x.invert(y.escape);var t={escape:new RegExp("["+x.keys(y.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(y.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(N){x[N]=function(O){if(O==null){return""}return(""+O).replace(t[N],function(P){return y[N][P]})}});x.result=function(P,O){if(P==null){return null}var N=P[O];return x.isFunction(N)?N.call(P):N};x.mixin=function(N){p(x.functions(N),function(P){var O=x[P]=N[P];x.prototype[P]=function(){var Q=[this._wrapped];o.apply(Q,arguments);return E.call(this,O.apply(x,Q))}})};var L=0;x.uniqueId=function(N){var O=""+ ++L;return N?N+O:O};x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/;var n={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var q=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(V,Q,P){P=x.defaults({},P,x.templateSettings);var R=new RegExp([(P.escape||H).source,(P.interpolate||H).source,(P.evaluate||H).source].join("|")+"|$","g");var S=0;var N="__p+='";V.replace(R,function(aa,W,Z,X,Y){N+=V.slice(S,Y).replace(q,function(ab){return"\\"+n[ab]});if(W){N+="'+\n((__t=("+W+"))==null?'':_.escape(__t))+\n'"}if(Z){N+="'+\n((__t=("+Z+"))==null?'':__t)+\n'"}if(X){N+="';\n"+X+"\n__p+='"}S=Y+aa.length;return aa});N+="';\n";if(!P.variable){N="with(obj||{}){\n"+N+"}\n"}N="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+N+"return __p;\n";try{var O=new Function(P.variable||"obj","_",N)}catch(T){T.source=N;throw T}if(Q){return O(Q,x)}var U=function(W){return O.call(this,W,x)};U.source="function("+(P.variable||"obj")+"){\n"+N+"}";return U};x.chain=function(N){return x(N).chain()};var E=function(N){return this._chain?x(N).chain():N};x.mixin(x);p(["pop","push","reverse","shift","sort","splice","unshift"],function(N){var O=e[N];x.prototype[N]=function(){var P=this._wrapped;O.apply(P,arguments);if((N=="shift"||N=="splice")&&P.length===0){delete P[0]}return E.call(this,P)}});p(["concat","join","slice"],function(N){var O=e[N];x.prototype[N]=function(){return E.call(this,O.apply(this._wrapped,arguments))}});x.extend(x.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"};window.SITESPEEDY_DEBUG=false}());(function(){if(!SITESPEEDY_DEBUG){var b=b||[];b.push(["_setAccount","UA-37768124-1"]);b.push(["_trackPageview"]);(function(){var d=document.createElement("script");d.type="text/javascript";d.async=true;d.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)})()}}());(function(){function A(a){if(SITESPEEDY_DEBUG){console.log(a)}}var K,u,v;var D=[];var I=10;function E(a,b){a.removeClass("loading");if(b){a.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(a){a.preventDefault();var c=$(this);c.removeClass("selected").addClass("selected");var b=c.closest(".account-selector");b.find("li:not(.selected)").slideUp("fast");b.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){w(true)},1)};$("#authorize-button").click(function(a){a.preventDefault();w(false)});function w(a){E($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:a},F)}function F(a){if(a){$("#authorize-button").hide();gapi.client.load("analytics","v3",B)}else{E($("#authorization"),false);$("#authorize-button").show()}}function B(){E($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(y)}$("#log-out").click(function(a){a.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){H();w(true)},1)})});function H(){$(".initially-hidden").hide();$("#username").html("").hide()}function C(d,f,c,b){var e;if(!d.code){f.empty();if(d&&d.items&&d.items.length){var a=_.sortBy(d.items,"created").reverse();_.each(a,function(g){e=$("<li />");e.attr("rel",g.id);e.text(g.name);e.one("click",b);f.append(e)})}else{e=$("<li />");e.text("No "+c+" found.");f.append(e)}}else{A(d.message);e=$("<li />");e.text("Could not get "+c+".");f.append(e)}f.show()}function y(a){E($("#authorization"),false);E($("#accounts"),false);$("#username").html(a.username).show();$("#log-out").show();C(a,$("#accounts"),"accounts",function(){E($("#web-properties"),true);K=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:K}).execute(z)})}function z(a){E($("#web-properties"),false);C(a,$("#web-properties"),"web properties",function(){E($("#profiles"),true);u=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:K,webPropertyId:u}).execute(x)})}function x(a){E($("#profiles"),false);C(a,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();v=$(this).attr("rel");var b=t(new Date());var c=new Date();c.setMonth(c.getMonth()-1);c=t(c);gapi.client.analytics.data.ga.get({ids:"ga:"+v,"start-date":c,"end-date":b,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":I}).execute(L)})}function L(b){if(!b.code){if(b&&b.rows&&b.rows.length){var a=_.map(b.rows,function(d){var c=d[0];var e=d[1];if(e.indexOf(c)!==-1){return e}else{return c+e}});_.each(a,function(c){D.push({url:c})});gapi.client.load("pagespeedonline","v1",G)}}}function G(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(D,function(a,b){var c="http://"+a.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:c}).execute(function(d){J(b,d)})})}function J(g,a){if(a.code){D.splice(g,1);A("Error "+a.code+" - "+a.message)}else{D[g].pageSpeedScore=a.score;D[g].url=a.id}var b=_.countBy(D,function(j){return _.has(j,"pageSpeedScore")});if(_.has(b,"false")){$("#progress-bar").css("width",b["true"]/(D.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(D.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var i=0;var c=0;var e=0;_.each(D,function(j,k){i=D.length-k;c+=i;e+=j.pageSpeedScore*i});var d=Math.round(e/c);var h=$("#score");h.html(d);h.css("color","hsl("+parseInt((d/100)*120,10)+", 60%, 40%)");h.parent().show();var f=$("#details tbody").empty();_.each(D,function(j){var k=decodeURIComponent(j.url);f.append($('<tr><td><a href="'+k+'" target="_blank">'+k+"</a></td><td>"+j.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(j){j.preventDefault();$("#details").slideToggle("fast");var k=$(this);if(k.hasClass("expanded")){k.html("Show details →").removeClass("expanded")}else{k.html("Hide details ←").addClass("expanded")}}).show()}}function t(a){function b(c){return c<10?"0"+c:c}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())}}());(function(){var ad=this;var ap=ad._;var W={};var X=Array.prototype,av=Object.prototype,ai=Function.prototype;var S=X.push,al=X.slice,ab=X.concat,ax=av.toString,aq=av.hasOwnProperty;var O=X.forEach,aj=X.map,V=X.reduce,ay=X.reduceRight,az=X.filter,Y=X.every,ak=X.some,am=X.indexOf,ao=X.lastIndexOf,af=Array.isArray,aw=Object.keys,U=ai.bind;var N=function(a){if(a instanceof N){return a}if(!(this instanceof N)){return new N(a)}this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=N}exports._=N}else{ad._=N}N.VERSION="1.4.3";var R=N.each=N.forEach=function(a,b,c){if(a==null){return}if(O&&a.forEach===O){a.forEach(b,c)}else{if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++){if(b.call(c,a[d],d,a)===W){return}}}else{for(var e in a){if(N.has(a,e)){if(b.call(c,a[e],e,a)===W){return}}}}}};N.map=N.collect=function(a,b,c){var d=[];if(a==null){return d}if(aj&&a.map===aj){return a.map(b,c)}R(a,function(e,g,f){d[d.length]=b.call(c,e,g,f)});return d};var au="Reduce of empty array with no initial value";N.reduce=N.foldl=N.inject=function(a,b,e,c){var d=arguments.length>2;if(a==null){a=[]}if(V&&a.reduce===V){if(c){b=N.bind(b,c)}return d?a.reduce(b,e):a.reduce(b)}R(a,function(f,h,g){if(!d){e=f;d=true}else{e=b.call(c,e,f,h,g)}});if(!d){throw new TypeError(au)}return e};N.reduceRight=N.foldr=function(a,d,g,e){var f=arguments.length>2;if(a==null){a=[]}if(ay&&a.reduceRight===ay){if(e){d=N.bind(d,e)}return f?a.reduceRight(d,g):a.reduceRight(d)}var b=a.length;if(b!==+b){var c=N.keys(a);b=c.length}R(a,function(h,j,i){j=c?c[--b]:--b;if(!f){g=a[j];f=true}else{g=d.call(e,g,a[j],j,i)}});if(!f){throw new TypeError(au)}return g};N.find=N.detect=function(a,b,c){var d;Z(a,function(e,g,f){if(b.call(c,e,g,f)){d=e;return true}});return d};N.filter=N.select=function(a,b,c){var d=[];if(a==null){return d}if(az&&a.filter===az){return a.filter(b,c)}R(a,function(e,g,f){if(b.call(c,e,g,f)){d[d.length]=e}});return d};N.reject=function(a,b,c){return N.filter(a,function(d,f,e){return !b.call(c,d,f,e)},c)};N.every=N.all=function(a,b,c){b||(b=N.identity);var d=true;if(a==null){return d}if(Y&&a.every===Y){return a.every(b,c)}R(a,function(e,g,f){if(!(d=d&&b.call(c,e,g,f))){return W}});return !!d};var Z=N.some=N.any=function(a,b,c){b||(b=N.identity);var d=false;if(a==null){return d}if(ak&&a.some===ak){return a.some(b,c)}R(a,function(e,g,f){if(d||(d=b.call(c,e,g,f))){return W}});return !!d};N.contains=N.include=function(a,b){if(a==null){return false}if(am&&a.indexOf===am){return a.indexOf(b)!=-1}return Z(a,function(c){return c===b})};N.invoke=function(b,a){var c=al.call(arguments,2);return N.map(b,function(d){return(N.isFunction(a)?a:d[a]).apply(d,c)})};N.pluck=function(a,b){return N.map(a,function(c){return c[b]})};N.where=function(a,b){if(N.isEmpty(b)){return[]}return N.filter(a,function(c){for(var d in b){if(b[d]!==c[d]){return false}}return true})};N.max=function(a,b,c){if(!b&&N.isArray(a)&&a[0]===+a[0]&&a.length<65535){return Math.max.apply(Math,a)}if(!b&&N.isEmpty(a)){return -Infinity}var d={computed:-Infinity,value:-Infinity};R(a,function(e,h,f){var g=b?b.call(c,e,h,f):e;g>=d.computed&&(d={value:e,computed:g})});return d.value};N.min=function(a,b,c){if(!b&&N.isArray(a)&&a[0]===+a[0]&&a.length<65535){return Math.min.apply(Math,a)}if(!b&&N.isEmpty(a)){return Infinity}var d={computed:Infinity,value:Infinity};R(a,function(e,h,f){var g=b?b.call(c,e,h,f):e;g<d.computed&&(d={value:e,computed:g})});return d.value};N.shuffle=function(a){var b;var c=0;var d=[];R(a,function(e){b=N.random(c++);d[c-1]=d[b];d[b]=e});return d};var aA=function(a){return N.isFunction(a)?a:function(b){return b[a]}};N.sortBy=function(a,b,d){var c=aA(b);return N.pluck(N.map(a,function(e,g,f){return{value:e,index:g,criteria:c.call(d,e,g,f)}}).sort(function(e,f){var g=e.criteria;var h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(g<h||h===void 0){return -1}}return e.index<f.index?-1:1}),"value")};var ag=function(a,b,e,c){var f={};var d=aA(b||N.identity);R(a,function(g,i){var h=d.call(e,g,i,a);c(f,h,g)});return f};N.groupBy=function(a,b,c){return ag(a,b,c,function(f,e,d){(N.has(f,e)?f[e]:(f[e]=[])).push(d)})};N.countBy=function(a,b,c){return ag(a,b,c,function(e,d){if(!N.has(e,d)){e[d]=0}e[d]++})};N.sortedIndex=function(a,b,e,f){e=e==null?N.identity:aA(e);var c=e.call(f,b);var h=0,d=a.length;while(h<d){var g=(h+d)>>>1;e.call(f,a[g])<c?h=g+1:d=g}return h};N.toArray=function(a){if(!a){return[]}if(N.isArray(a)){return al.call(a)}if(a.length===+a.length){return N.map(a,N.identity)}return N.values(a)};N.size=function(a){if(a==null){return 0}return(a.length===+a.length)?a.length:N.keys(a).length};N.first=N.head=N.take=function(a,b,c){if(a==null){return void 0}return(b!=null)&&!c?al.call(a,0,b):a[0]};N.initial=function(a,b,c){return al.call(a,0,a.length-((b==null)||c?1:b))};N.last=function(a,b,c){if(a==null){return void 0}if((b!=null)&&!c){return al.call(a,Math.max(a.length-b,0))}else{return a[a.length-1]}};N.rest=N.tail=N.drop=function(a,b,c){return al.call(a,(b==null)||c?1:b)};N.compact=function(a){return N.filter(a,N.identity)};var ac=function(b,a,c){R(b,function(d){if(N.isArray(d)){a?S.apply(c,d):ac(d,a,c)}else{c.push(d)}});return c};N.flatten=function(a,b){return ac(a,b,[])};N.without=function(a){return N.difference(a,al.call(arguments,1))};N.uniq=N.unique=function(a,b,c,d){if(N.isFunction(b)){d=c;c=b;b=false}var f=c?N.map(a,c,d):a;var e=[];var g=[];R(f,function(h,i){if(b?(!i||g[g.length-1]!==h):!N.contains(g,h)){g.push(h);e.push(a[i])}});return e};N.union=function(){return N.uniq(ab.apply(X,arguments))};N.intersection=function(a){var b=al.call(arguments,1);return N.filter(N.uniq(a),function(c){return N.every(b,function(d){return N.indexOf(d,c)>=0})})};N.difference=function(a){var b=ab.apply(X,al.call(arguments,1));return N.filter(a,function(c){return !N.contains(b,c)})};N.zip=function(){var d=al.call(arguments);var a=N.max(N.pluck(d,"length"));var b=new Array(a);for(var c=0;c<a;c++){b[c]=N.pluck(d,""+c)}return b};N.object=function(a,c){if(a==null){return{}}var e={};for(var b=0,d=a.length;b<d;b++){if(c){e[a[b]]=c[b]}else{e[a[b][0]]=a[b][1]}}return e};N.indexOf=function(a,c,b){if(a==null){return -1}var d=0,e=a.length;if(b){if(typeof b=="number"){d=(b<0?Math.max(0,e+b):b)}else{d=N.sortedIndex(a,c);return a[d]===c?d:-1}}if(am&&a.indexOf===am){return a.indexOf(c,b)}for(;d<e;d++){if(a[d]===c){return d}}return -1};N.lastIndexOf=function(a,c,b){if(a==null){return -1}var e=b!=null;if(ao&&a.lastIndexOf===ao){return e?a.lastIndexOf(c,b):a.lastIndexOf(c)}var d=(e?b:a.length);while(d--){if(a[d]===c){return d}}return -1};N.range=function(a,c,b){if(arguments.length<=1){c=a||0;a=0}b=arguments[2]||1;var e=Math.max(Math.ceil((c-a)/b),0);var f=0;var d=new Array(e);while(f<e){d[f++]=a;a+=b}return d};var T=function(){};N.bind=function(a,c){var d,b;if(a.bind===U&&U){return U.apply(a,al.call(arguments,1))}if(!N.isFunction(a)){throw new TypeError}d=al.call(arguments,2);return b=function(){if(!(this instanceof b)){return a.apply(c,d.concat(al.call(arguments)))}T.prototype=a.prototype;var e=new T;T.prototype=null;var f=a.apply(e,d.concat(al.call(arguments)));if(Object(f)===f){return f}return e}};N.bindAll=function(a){var b=al.call(arguments,1);if(b.length==0){b=N.functions(a)}R(b,function(c){a[c]=N.bind(a[c],a)});return a};N.memoize=function(a,b){var c={};b||(b=N.identity);return function(){var d=b.apply(this,arguments);return N.has(c,d)?c[d]:(c[d]=a.apply(this,arguments))}};N.delay=function(b,a){var c=al.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},a)};N.defer=function(a){return N.delay.apply(N,[a,1].concat(al.call(arguments,1)))};N.throttle=function(c,a){var e,f,b,h;var d=0;var g=function(){d=new Date;b=null;h=c.apply(e,f)};return function(){var j=new Date;var i=a-(j-d);e=this;f=arguments;if(i<=0){clearTimeout(b);b=null;d=j;h=c.apply(e,f)}else{if(!b){b=setTimeout(g,i)}}return h}};N.debounce=function(c,a,d){var b,e;return function(){var f=this,g=arguments;var h=function(){b=null;if(!d){e=c.apply(f,g)}};var i=d&&!b;clearTimeout(b);b=setTimeout(h,a);if(i){e=c.apply(f,g)}return e}};N.once=function(a){var c=false,b;return function(){if(c){return b}c=true;b=a.apply(this,arguments);a=null;return b}};N.wrap=function(b,a){return function(){var c=[b];S.apply(c,arguments);return a.apply(this,c)}};N.compose=function(){var a=arguments;return function(){var c=arguments;for(var b=a.length-1;b>=0;b--){c=[a[b].apply(this,c)]}return c[0]}};N.after=function(a,b){if(a<=0){return b()}return function(){if(--a<1){return b.apply(this,arguments)}}};N.keys=aw||function(a){if(a!==Object(a)){throw new TypeError("Invalid object")}var b=[];for(var c in a){if(N.has(a,c)){b[b.length]=c}}return b};N.values=function(a){var c=[];for(var b in a){if(N.has(a,b)){c.push(a[b])}}return c};N.pairs=function(a){var b=[];for(var c in a){if(N.has(a,c)){b.push([c,a[c]])}}return b};N.invert=function(a){var c={};for(var b in a){if(N.has(a,b)){c[a[b]]=b}}return c};N.functions=N.methods=function(a){var b=[];for(var c in a){if(N.isFunction(a[c])){b.push(c)}}return b.sort()};N.extend=function(a){R(al.call(arguments,1),function(c){if(c){for(var b in c){a[b]=c[b]}}});return a};N.pick=function(b){var a={};var c=ab.apply(X,al.call(arguments,1));R(c,function(d){if(d in b){a[d]=b[d]}});return a};N.omit=function(b){var a={};var c=ab.apply(X,al.call(arguments,1));for(var d in b){if(!N.contains(c,d)){a[d]=b[d]}}return a};N.defaults=function(a){R(al.call(arguments,1),function(c){if(c){for(var b in c){if(a[b]==null){a[b]=c[b]}}}});return a};N.clone=function(a){if(!N.isObject(a)){return a}return N.isArray(a)?a.slice():N.extend({},a)};N.tap=function(a,b){b(a);return a};var Q=function(d,e,j,i){if(d===e){return d!==0||1/d==1/e}if(d==null||e==null){return d===e}if(d instanceof N){d=d._wrapped}if(e instanceof N){e=e._wrapped}var g=ax.call(d);if(g!=ax.call(e)){return false}switch(g){case"[object String]":return d==String(e);case"[object Number]":return d!=+d?e!=+e:(d==0?1/d==1/e:d==+e);case"[object Date]":case"[object Boolean]":return +d==+e;case"[object RegExp]":return d.source==e.source&&d.global==e.global&&d.multiline==e.multiline&&d.ignoreCase==e.ignoreCase}if(typeof d!="object"||typeof e!="object"){return false}var k=j.length;while(k--){if(j[k]==d){return i[k]==e}}j.push(d);i.push(e);var b=0,a=true;if(g=="[object Array]"){b=d.length;a=b==e.length;if(a){while(b--){if(!(a=Q(d[b],e[b],j,i))){break}}}}else{var f=d.constructor,h=e.constructor;if(f!==h&&!(N.isFunction(f)&&(f instanceof f)&&N.isFunction(h)&&(h instanceof h))){return false}for(var c in d){if(N.has(d,c)){b++;if(!(a=N.has(e,c)&&Q(d[c],e[c],j,i))){break}}}if(a){for(c in e){if(N.has(e,c)&&!(b--)){break}}a=!b}}j.pop();i.pop();return a};N.isEqual=function(a,b){return Q(a,b,[],[])};N.isEmpty=function(a){if(a==null){return true}if(N.isArray(a)||N.isString(a)){return a.length===0}for(var b in a){if(N.has(a,b)){return false}}return true};N.isElement=function(a){return !!(a&&a.nodeType===1)};N.isArray=af||function(a){return ax.call(a)=="[object Array]"};N.isObject=function(a){return a===Object(a)};R(["Arguments","Function","String","Number","Date","RegExp"],function(a){N["is"+a]=function(b){return ax.call(b)=="[object "+a+"]"}});if(!N.isArguments(arguments)){N.isArguments=function(a){return !!(a&&N.has(a,"callee"))}}if(typeof(/./)!=="function"){N.isFunction=function(a){return typeof a==="function"}}N.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};N.isNaN=function(a){return N.isNumber(a)&&a!=+a};N.isBoolean=function(a){return a===true||a===false||ax.call(a)=="[object Boolean]"};N.isNull=function(a){return a===null};N.isUndefined=function(a){return a===void 0};N.has=function(a,b){return aq.call(a,b)};N.noConflict=function(){ad._=ap;return this};N.identity=function(a){return a};N.times=function(a,b,c){var e=Array(a);for(var d=0;d<a;d++){e[d]=b.call(c,d)}return e};N.random=function(a,b){if(b==null){b=a;a=0}return a+(0|Math.random()*(b-a+1))};var an={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};an.unescape=N.invert(an.escape);var P={escape:new RegExp("["+N.keys(an.escape).join("")+"]","g"),unescape:new RegExp("("+N.keys(an.unescape).join("|")+")","g")};N.each(["escape","unescape"],function(a){N[a]=function(b){if(b==null){return""}return(""+b).replace(P[a],function(c){return an[a][c]})}});N.result=function(c,a){if(c==null){return null}var b=c[a];return N.isFunction(b)?b.call(c):b};N.mixin=function(a){R(N.functions(a),function(c){var b=N[c]=a[c];N.prototype[c]=function(){var d=[this._wrapped];S.apply(d,arguments);return ah.call(this,b.apply(N,d))}})};var aa=0;N.uniqueId=function(b){var a=""+ ++aa;return b?b+a:a};N.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ae=/(.)^/;var at={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var ar=/\\|'|\r|\n|\t|\u2028|\u2029/g;N.template=function(a,f,g){g=N.defaults({},g,N.templateSettings);var e=new RegExp([(g.escape||ae).source,(g.interpolate||ae).source,(g.evaluate||ae).source].join("|")+"|$","g");var d=0;var i="__p+='";a.replace(e,function(n,m,j,l,k){i+=a.slice(d,k).replace(ar,function(o){return"\\"+at[o]});if(m){i+="'+\n((__t=("+m+"))==null?'':_.escape(__t))+\n'"}if(j){i+="'+\n((__t=("+j+"))==null?'':__t)+\n'"}if(l){i+="';\n"+l+"\n__p+='"}d=k+n.length;return n});i+="';\n";if(!g.variable){i="with(obj||{}){\n"+i+"}\n"}i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var h=new Function(g.variable||"obj","_",i)}catch(c){c.source=i;throw c}if(f){return h(f,N)}var b=function(j){return h.call(this,j,N)};b.source="function("+(g.variable||"obj")+"){\n"+i+"}";return b};N.chain=function(a){return N(a).chain()};var ah=function(a){return this._chain?N(a).chain():a};N.mixin(N);R(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=X[b];N.prototype[b]=function(){var c=this._wrapped;a.apply(c,arguments);if((b=="shift"||b=="splice")&&c.length===0){delete c[0]}return ah.call(this,c)}});R(["concat","join","slice"],function(b){var a=X[b];N.prototype[b]=function(){return ah.call(this,a.apply(this._wrapped,arguments))}});N.extend(N.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);(function(){window.SITESPEEDY_CREDENTIALS={clientId:"168282890157.apps.googleusercontent.com",apiKey:"AIzaSyCLV4xGkRF4-mh2pd_nd-cJiaQeckr8xEU",scope:"https://www.googleapis.com/auth/analytics.readonly"};window.SITESPEEDY_DEBUG=false}());(function(){if(!SITESPEEDY_DEBUG){var a=a||[];a.push(["_setAccount","UA-37768124-1"]);a.push(["_trackPageview"]);(function(){var c=document.createElement("script");c.type="text/javascript";c.async=true;c.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b)})()}}());(function(){function l(t){if(SITESPEEDY_DEBUG){console.log(t)}}var b,r,q;var i=[];var d=10;function h(u,t){u.removeClass("loading");if(t){u.addClass("loading")}}$(".account-selector").on("click","li:not(.selected)",function(v){v.preventDefault();var t=$(this);t.removeClass("selected").addClass("selected");var u=t.closest(".account-selector");u.find("li:not(.selected)").slideUp("fast");u.nextAll(".account-selector").slideUp("fast").empty()});window.onGoogleClientLoad=function(){gapi.client.setApiKey(SITESPEEDY_CREDENTIALS.apiKey);window.setTimeout(function(){p(true)},1)};$("#authorize-button").click(function(t){t.preventDefault();p(false)});function p(t){h($("#authorization"),true);gapi.auth.authorize({client_id:SITESPEEDY_CREDENTIALS.clientId,scope:SITESPEEDY_CREDENTIALS.scope,immediate:t},g)}function g(t){if(t){$("#authorize-button").hide();gapi.client.load("analytics","v3",k)}else{h($("#authorization"),false);$("#authorize-button").show()}}function k(){h($("#accounts"),true);gapi.client.analytics.management.accounts.list().execute(n)}$("#log-out").click(function(t){t.preventDefault();$.get("https://accounts.google.com/o/oauth2/revoke",{token:gapi.auth.getToken().access_token}).error(function(){window.setTimeout(function(){e();p(true)},1)})});function e(){$(".initially-hidden").hide();$("#username").html("").hide()}function j(u,y,v,w){var t;if(!u.code){y.empty();if(u&&u.items&&u.items.length){var x=_.sortBy(u.items,"created").reverse();_.each(x,function(z){t=$("<li />");t.attr("rel",z.id);t.text(z.name);t.one("click",w);y.append(t)})}else{t=$("<li />");t.text("No "+v+" found.");y.append(t)}}else{l(u.message);t=$("<li />");t.text("Could not get "+v+".");y.append(t)}y.show()}function n(t){h($("#authorization"),false);h($("#accounts"),false);$("#username").html(t.username).show();$("#log-out").show();j(t,$("#accounts"),"accounts",function(){h($("#web-properties"),true);b=$(this).attr("rel");gapi.client.analytics.management.webproperties.list({accountId:b}).execute(m)})}function m(t){h($("#web-properties"),false);j(t,$("#web-properties"),"web properties",function(){h($("#profiles"),true);r=$(this).attr("rel");gapi.client.analytics.management.profiles.list({accountId:b,webPropertyId:r}).execute(o)})}function o(t){h($("#profiles"),false);j(t,$("#profiles"),"profiles",function(){$("#loading-ga-data").show();$("#status-message").html("Getting top URL’s…").show();q=$(this).attr("rel");var v=s(new Date());var u=new Date();u.setMonth(u.getMonth()-1);u=s(u);gapi.client.analytics.data.ga.get({ids:"ga:"+q,"start-date":u,"end-date":v,dimensions:"ga:hostname,ga:pagePath",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":d}).execute(a)})}function a(t){if(!t.code){if(t&&t.rows&&t.rows.length){var u=_.map(t.rows,function(w){var x=w[0];var v=w[1];if(v.indexOf(x)!==-1){return v}else{return x+v}});_.each(u,function(v){i.push({url:v})});gapi.client.load("pagespeedonline","v1",f)}}}function f(){$("#loading-ga-data").hide();$("#status-message").html("Getting PageSpeed data…");$("#progress-bar-container").show();_.each(i,function(v,u){var t="http://"+v.url;gapi.client.pagespeedonline.pagespeedapi.runpagespeed({url:t}).execute(function(w){c(u,w)})})}function c(v,B){if(B.code){i.splice(v,1);l("Error "+B.code+" - "+B.message)}else{i[v].pageSpeedScore=B.score;i[v].url=B.id}var A=_.countBy(i,function(C){return _.has(C,"pageSpeedScore")});if(_.has(A,"false")){$("#progress-bar").css("width",A["true"]/(i.length-1)*100+"%")}else{$("#progress-bar-container").hide();if(i.length===0){$("#status-message").html("Found no pages to analyze.");return}$("#status-message").hide();var t=0;var z=0;var x=0;_.each(i,function(D,C){t=i.length-C;z+=t;x+=D.pageSpeedScore*t});var y=Math.round(x/z);var u=$("#score");u.html(y);u.css("color","hsl("+parseInt((y/100)*120,10)+", 60%, 40%)");u.parent().show();var w=$("#details tbody").empty();_.each(i,function(D){var C=decodeURIComponent(D.url);w.append($('<tr><td><a href="'+C+'" target="_blank">'+C+"</a></td><td>"+D.pageSpeedScore+"</td></tr>"))});$("#show-details-link").click(function(D){D.preventDefault();$("#details").slideToggle("fast");var C=$(this);if(C.hasClass("expanded")){C.html("Show details →").removeClass("expanded")}else{C.html("Hide details ←").addClass("expanded")}}).show()}}function s(u){function t(v){return v<10?"0"+v:v}return u.getFullYear()+"-"+t(u.getMonth()+1)+"-"+t(u.getDate())}}());